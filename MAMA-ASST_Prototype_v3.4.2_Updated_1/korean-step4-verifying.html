<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4ë‹¨ê³„: ê²€ì¦ | êµ­ì–´ í•™ìŠµ | MAMA-ASST</title>
  <meta name="description" content="MAMA-ASST êµ­ì–´ 5ë‹¨ê³„ í•™ìŠµ - 4ë‹¨ê³„ O/X ê²€ì¦">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FF6D4D',
            'primary-light': '#FFF0ED',
            navy: '#1A2E4D',
            korean: '#4285F4',
            'korean-light': '#E8F0FE',
            'korean-dark': '#3367D6',
            background: '#F9FAFB',
            surface: '#FFFFFF',
            'border-light': '#E5E7EB',
            'text-primary': '#1F2937',
            'text-secondary': '#6B7280',
            'text-tertiary': '#9CA3AF',
            success: '#22C55E',
            'success-light': '#F0FDF4',
            error: '#EF4444',
            'error-light': '#FEF2F2',
            warning: '#F59E0B',
          },
          fontFamily: { sans: ['Pretendard', 'Apple SD Gothic Neo', 'Malgun Gothic', 'sans-serif'] },
        },
      },
    }
  </script>
  
  <style>
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #D1D5DB; border-radius: 3px; }
    
    .step-circle { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
    .step-circle.active { background: linear-gradient(135deg, #4285F4 0%, #5A95F5 100%); color: white; box-shadow: 0 4px 12px rgba(66, 133, 244, 0.4); }
    .step-circle.completed { background: #22C55E; color: white; }
    .step-circle.pending { background: #F3F4F6; color: #9CA3AF; }
    .step-connector { position: absolute; top: 20px; left: 40px; width: calc(100% - 40px); height: 3px; background: #E5E7EB; z-index: 0; }
    .step-connector.completed { background: #22C55E; }
    .step-connector.active { background: linear-gradient(90deg, #22C55E 0%, #4285F4 100%); }
    
    /* O/X Buttons */
    .ox-btn {
      width: 120px; height: 120px;
      border-radius: 50%;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      font-size: 48px; font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 4px solid transparent;
    }
    .ox-btn:hover { transform: scale(1.05); }
    .ox-btn.o-btn {
      background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
      color: #2E7D32;
    }
    .ox-btn.o-btn:hover { box-shadow: 0 8px 25px rgba(46, 125, 50, 0.3); }
    .ox-btn.x-btn {
      background: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%);
      color: #C62828;
    }
    .ox-btn.x-btn:hover { box-shadow: 0 8px 25px rgba(198, 40, 40, 0.3); }
    
    .ox-btn.selected { transform: scale(1.1); }
    .ox-btn.correct { 
      border-color: #22C55E;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.3);
    }
    .ox-btn.incorrect {
      border-color: #EF4444;
      box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.3);
    }
    .ox-btn.disabled { opacity: 0.5; pointer-events: none; }
    
    @keyframes confetti {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-100px) rotate(720deg); opacity: 0; }
    }
    .confetti { animation: confetti 1s ease-out forwards; }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    .shake { animation: shake 0.4s ease-in-out; }
    
    @keyframes pulse-ring {
      0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
      100% { box-shadow: 0 0 0 20px rgba(34, 197, 94, 0); }
    }
    .pulse-ring { animation: pulse-ring 0.6s ease-out; }
    
    .quiz-progress-dot {
      width: 12px; height: 12px; border-radius: 50%;
      transition: all 0.3s ease;
    }
    .quiz-progress-dot.current { transform: scale(1.3); box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.3); }
    
    .bottom-nav-mobile { box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08); }
  </style>
</head>
<body class="bg-background font-sans text-text-primary antialiased">
  
  <!-- Desktop Layout -->
  <div class="hidden lg:flex h-screen overflow-hidden">
    
    <!-- Sidebar -->
    <aside class="w-20 bg-navy flex flex-col items-center py-6 flex-shrink-0">
      <a href="student-dashboard.html" class="w-12 h-12 bg-primary rounded-xl flex items-center justify-center shadow-lg mb-8">
        <span class="text-white font-bold text-xl">M</span>
      </a>
      <nav class="flex flex-col items-center gap-4 flex-1">
        <a href="student-dashboard.html" class="w-12 h-12 rounded-xl flex items-center justify-center text-white/50 hover:bg-white/10 hover:text-white transition-colors"><span class="material-icons-round">home</span></a>
        <a href="subject-korean.html" class="w-12 h-12 rounded-xl flex items-center justify-center bg-korean text-white shadow-lg"><span class="material-icons-round">menu_book</span></a>
        <a href="subject-english.html" class="w-12 h-12 rounded-xl flex items-center justify-center text-white/50 hover:bg-white/10 hover:text-white transition-colors"><span class="material-icons-round">translate</span></a>
        <a href="subject-math.html" class="w-12 h-12 rounded-xl flex items-center justify-center text-white/50 hover:bg-white/10 hover:text-white transition-colors"><span class="material-icons-round">calculate</span></a>
      </nav>
      <a href="subject-korean.html" class="w-12 h-12 rounded-xl flex items-center justify-center text-white/50 hover:bg-white/10 hover:text-red-400 transition-colors"><span class="material-icons-round">close</span></a>
    </aside>
    
    <!-- Main Content -->
    <main class="flex-1 flex flex-col overflow-hidden">
      
      <!-- Header -->
      <header class="bg-surface border-b border-border-light px-8 py-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-4">
            <a href="korean-step3-structuring.html" class="w-10 h-10 rounded-xl bg-background hover:bg-border-light flex items-center justify-center transition-colors">
              <span class="material-icons-round text-text-secondary">arrow_back</span>
            </a>
            <div>
              <div class="flex items-center gap-2 mb-1">
                <span class="px-2 py-0.5 bg-korean-light text-korean text-xs font-bold rounded">ë¹„ë¬¸í•™</span>
              </div>
              <h1 class="text-xl font-bold text-text-primary">ì¸ê³µì§€ëŠ¥ê³¼ ë¯¸ë˜ ì‚¬íšŒ</h1>
            </div>
          </div>
          
          <div class="flex items-center gap-6">
            <!-- Score -->
            <div class="flex items-center gap-3 px-4 py-2 bg-success-light rounded-xl">
              <span class="material-icons-round text-success">check_circle</span>
              <div>
                <p class="text-xs text-success font-medium">ë§íŒ ë¬¸ì œ</p>
                <p class="text-lg font-bold text-success"><span id="correctCount">3</span> / 5</p>
              </div>
            </div>
            <!-- XP -->
            <div class="flex items-center gap-2 px-4 py-2 bg-primary-light rounded-xl">
              <span class="material-icons-round text-primary">star</span>
              <p class="text-lg font-bold text-primary">+<span id="xpCount">30</span> XP</p>
            </div>
          </div>
        </div>
        
        <!-- Step Indicator -->
        <div class="mt-6">
          <div class="flex items-center">
            <div class="step-item flex items-center relative" style="flex: 1;">
              <div class="flex flex-col items-center z-10">
                <div class="step-circle completed"><span class="material-icons-round text-lg">check</span></div>
                <span class="text-xs font-medium text-success mt-2">ì½ê¸°</span>
              </div>
              <div class="step-connector completed"></div>
            </div>
            <div class="step-item flex items-center relative" style="flex: 1;">
              <div class="flex flex-col items-center z-10">
                <div class="step-circle completed"><span class="material-icons-round text-lg">check</span></div>
                <span class="text-xs font-medium text-success mt-2">ì–´íœ˜</span>
              </div>
              <div class="step-connector completed"></div>
            </div>
            <div class="step-item flex items-center relative" style="flex: 1;">
              <div class="flex flex-col items-center z-10">
                <div class="step-circle completed"><span class="material-icons-round text-lg">check</span></div>
                <span class="text-xs font-medium text-success mt-2">êµ¬ì¡°í™”</span>
              </div>
              <div class="step-connector completed"></div>
            </div>
            <div class="step-item flex items-center relative" style="flex: 1;">
              <div class="flex flex-col items-center z-10">
                <div class="step-circle active"><span class="material-icons-round text-lg">quiz</span></div>
                <span class="text-xs font-semibold text-korean mt-2">ê²€ì¦</span>
              </div>
              <div class="step-connector active"></div>
            </div>
            <div class="step-item flex items-center">
              <div class="flex flex-col items-center z-10">
                <div class="step-circle pending"><span class="material-icons-round text-lg">summarize</span></div>
                <span class="text-xs font-medium text-text-tertiary mt-2">ìš”ì•½</span>
              </div>
            </div>
          </div>
        </div>
      </header>
      
      <!-- Content -->
      <div class="flex-1 overflow-hidden flex items-center justify-center p-8">
        
        <div class="max-w-3xl w-full">
          
          <!-- Quiz Progress -->
          <div class="flex items-center justify-center gap-3 mb-8">
            <div class="quiz-progress-dot bg-success" data-q="1"></div>
            <div class="quiz-progress-dot bg-success" data-q="2"></div>
            <div class="quiz-progress-dot bg-error" data-q="3"></div>
            <div class="quiz-progress-dot bg-korean current" data-q="4"></div>
            <div class="quiz-progress-dot bg-border-light" data-q="5"></div>
          </div>
          
          <!-- Question Card -->
          <div class="bg-surface rounded-3xl shadow-card p-8 border border-border-light/50" id="quizCard">
            
            <!-- Question Number -->
            <div class="text-center mb-6">
              <span class="px-4 py-1 bg-korean-light text-korean text-sm font-bold rounded-full">ë¬¸ì œ 4 / 5</span>
            </div>
            
            <!-- Question -->
            <div class="text-center mb-10">
              <h2 class="text-2xl font-bold text-text-primary leading-relaxed" id="questionText">
                AIì˜ ë°œì „ìœ¼ë¡œ ì¸í•´ 2030ë…„ê¹Œì§€<br>ì•½ 4ì–µ ê°œì˜ ì¼ìë¦¬ê°€ ì‚¬ë¼ì§ˆ ê²ƒì´ë‹¤.
              </h2>
            </div>
            
            <!-- O/X Buttons -->
            <div class="flex items-center justify-center gap-16" id="oxButtons">
              <button class="ox-btn o-btn" onclick="selectAnswer('O')">
                <span>O</span>
                <span class="text-xs font-medium mt-1">ë§ì•„ìš”</span>
              </button>
              <button class="ox-btn x-btn" onclick="selectAnswer('X')">
                <span>X</span>
                <span class="text-xs font-medium mt-1">ì•„ë‹ˆì—ìš”</span>
              </button>
            </div>
            
            <!-- Result (Hidden) -->
            <div id="resultArea" class="hidden mt-8">
              <div id="resultContent" class="rounded-2xl p-6"></div>
              <button onclick="nextQuestion()" id="nextBtn" class="mt-6 w-full py-4 bg-korean hover:bg-korean-dark text-white font-bold rounded-xl transition-colors flex items-center justify-center gap-2">
                ë‹¤ìŒ ë¬¸ì œ
                <span class="material-icons-round">arrow_forward</span>
              </button>
            </div>
            
          </div>
          
          <!-- Reference Text Toggle (Hidden until answer) -->
          <div id="referenceToggleArea" class="hidden mt-6 text-center">
            <button onclick="toggleReference()" class="text-korean hover:underline text-sm flex items-center justify-center gap-1 mx-auto">
              <span class="material-icons-round text-sm">visibility</span>
              ì§€ë¬¸ ë‹¤ì‹œ ë³´ê¸°
            </button>
          </div>
          
          <!-- Reference Panel (Hidden) -->
          <div id="referencePanel" class="hidden mt-4 bg-surface rounded-xl p-6 border border-border-light max-h-60 overflow-y-auto">
            <h4 class="font-bold text-text-primary mb-3 text-sm">ğŸ“– ì§€ë¬¸ ë‚´ìš©</h4>
            <p class="text-sm text-text-secondary leading-relaxed">
              ë§¥í‚¨ì§€ ê¸€ë¡œë²Œ ì—°êµ¬ì†Œì˜ ë³´ê³ ì„œì— ë”°ë¥´ë©´, 2030ë…„ê¹Œì§€ ì „ ì„¸ê³„ì ìœ¼ë¡œ ì•½ 4ì–µ ê°œì˜ ì¼ìë¦¬ê°€ <strong>ìë™í™”ì˜ ì˜í–¥ì„ ë°›ì„</strong> ê²ƒìœ¼ë¡œ ì „ë§ëœë‹¤. (â€» 'ì‚¬ë¼ì§„ë‹¤'ê°€ ì•„ë‹Œ 'ì˜í–¥ì„ ë°›ëŠ”ë‹¤')
            </p>
          </div>
          
        </div>
        
      </div>
      
    </main>
  </div>
  
  <!-- Mobile Layout -->
  <div class="lg:hidden min-h-screen flex flex-col">
    
    <!-- Mobile Header -->
    <header class="bg-surface border-b border-border-light px-4 py-3 sticky top-0 z-30">
      <div class="flex items-center justify-between mb-3">
        <a href="korean-step3-structuring.html" class="w-10 h-10 rounded-xl bg-background flex items-center justify-center">
          <span class="material-icons-round text-text-secondary">arrow_back</span>
        </a>
        <div class="text-center">
          <span class="px-2 py-0.5 bg-korean-light text-korean text-[10px] font-bold rounded">STEP 4</span>
          <h1 class="text-sm font-bold text-text-primary">ê²€ì¦ (Verifying)</h1>
        </div>
        <div class="flex items-center gap-1 px-2 py-1 bg-success-light rounded-lg">
          <span class="text-sm font-bold text-success" id="mobileCorrectCount">3/5</span>
        </div>
      </div>
      <div class="flex items-center gap-1">
        <div class="flex-1 h-1.5 bg-success rounded-full"></div>
        <div class="flex-1 h-1.5 bg-success rounded-full"></div>
        <div class="flex-1 h-1.5 bg-success rounded-full"></div>
        <div class="flex-1 h-1.5 bg-korean rounded-full"></div>
        <div class="flex-1 h-1.5 bg-border-light rounded-full"></div>
      </div>
    </header>
    
    <!-- Mobile Content -->
    <main class="flex-1 overflow-y-auto p-4 pb-24 flex flex-col items-center justify-center">
      
      <!-- Quiz Progress Dots -->
      <div class="flex items-center justify-center gap-2 mb-6">
        <div class="w-3 h-3 rounded-full bg-success"></div>
        <div class="w-3 h-3 rounded-full bg-success"></div>
        <div class="w-3 h-3 rounded-full bg-error"></div>
        <div class="w-4 h-4 rounded-full bg-korean"></div>
        <div class="w-3 h-3 rounded-full bg-border-light"></div>
      </div>
      
      <!-- Question -->
      <div class="bg-surface rounded-2xl shadow-card p-6 border border-border-light w-full max-w-md" id="mobileQuizCard">
        <span class="px-3 py-0.5 bg-korean-light text-korean text-xs font-bold rounded-full">ë¬¸ì œ 4/5</span>
        
        <h2 class="text-lg font-bold text-text-primary mt-4 mb-8 leading-relaxed" id="mobileQuestionText">
          AIì˜ ë°œì „ìœ¼ë¡œ ì¸í•´ 2030ë…„ê¹Œì§€ ì•½ 4ì–µ ê°œì˜ ì¼ìë¦¬ê°€ ì‚¬ë¼ì§ˆ ê²ƒì´ë‹¤.
        </h2>
        
        <!-- Mobile O/X -->
        <div class="flex items-center justify-center gap-8" id="mobileOxButtons">
          <button class="ox-btn o-btn" style="width: 90px; height: 90px; font-size: 36px;" onclick="selectAnswerMobile('O')">
            <span>O</span>
          </button>
          <button class="ox-btn x-btn" style="width: 90px; height: 90px; font-size: 36px;" onclick="selectAnswerMobile('X')">
            <span>X</span>
          </button>
        </div>
        
        <!-- Mobile Result -->
        <div id="mobileResultArea" class="hidden mt-6">
          <div id="mobileResultContent" class="rounded-xl p-4"></div>
        </div>
      </div>
      
    </main>
    
    <!-- Mobile Bottom Nav -->
    <div class="fixed bottom-0 left-0 right-0 bg-surface border-t border-border-light p-4 bottom-nav-mobile">
      <button onclick="nextQuestionMobile()" id="mobileNextBtn" class="w-full py-4 bg-korean text-white font-bold rounded-xl flex items-center justify-center gap-2 opacity-50 pointer-events-none">
        ë‹¤ìŒ ë¬¸ì œ
        <span class="material-icons-round">arrow_forward</span>
      </button>
    </div>
    
  </div>
  
  <script>
    // Quiz Data
    const quizzes = [
      { q: "ì¸ê³µì§€ëŠ¥ì€ ì¸ê°„ì˜ í•™ìŠµëŠ¥ë ¥ì„ ì¸ê³µì ìœ¼ë¡œ êµ¬í˜„í•œ ê²ƒì´ë‹¤.", answer: "O", explanation: "1ë¬¸ë‹¨ì—ì„œ AIì˜ ì •ì˜ë¥¼ ì„¤ëª…í•˜ê³  ìˆì–´ìš”." },
      { q: "ë”¥ëŸ¬ë‹ ê¸°ìˆ ì€ AI ë°œì „ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì•˜ë‹¤.", answer: "X", explanation: "ì§€ë¬¸ì—ì„œ 'ë”¥ëŸ¬ë‹ ê¸°ìˆ ì˜ ë°œì „ìœ¼ë¡œ AIëŠ” ì„±ê³¼ë¥¼ ë³´ì—¬ì£¼ê³  ìˆë‹¤'ê³  í–ˆì–´ìš”." },
      { q: "AIëŠ” ì˜ë£Œ ë¶„ì•¼ì—ì„œë§Œ ê¸ì •ì  ì—­í• ì„ í•  ê²ƒìœ¼ë¡œ ê¸°ëŒ€ëœë‹¤.", answer: "X", explanation: "ì˜ë£Œë¿ë§Œ ì•„ë‹ˆë¼ êµìœ¡, í™˜ê²½ ë“± ë‹¤ì–‘í•œ ë¶„ì•¼ì—ì„œ ê¸ì •ì  ì—­í• ì´ ê¸°ëŒ€ë¼ìš”." },
      { q: "AIì˜ ë°œì „ìœ¼ë¡œ 2030ë…„ê¹Œì§€ ì•½ 4ì–µ ê°œì˜ ì¼ìë¦¬ê°€ ì‚¬ë¼ì§ˆ ê²ƒì´ë‹¤.", answer: "X", explanation: "'ì‚¬ë¼ì§„ë‹¤'ê°€ ì•„ë‹Œ 'ìë™í™”ì˜ ì˜í–¥ì„ ë°›ëŠ”ë‹¤'ê³  í‘œí˜„í–ˆì–´ìš”. ì‚¬ë¼ì§€ëŠ” ê²ƒê³¼ ì˜í–¥ì„ ë°›ëŠ” ê²ƒì€ ë‹¤ë¦…ë‹ˆë‹¤." },
      { q: "ê¸€ì“´ì´ëŠ” ì¸ê°„ ì¤‘ì‹¬ì˜ AI ìœ¤ë¦¬ ì›ì¹™ ìˆ˜ë¦½ì´ í•„ìš”í•˜ë‹¤ê³  ì£¼ì¥í•œë‹¤.", answer: "O", explanation: "5ë¬¸ë‹¨ ê²°ë¡ ì—ì„œ ì¸ê°„ ì¤‘ì‹¬ì˜ AI ìœ¤ë¦¬ ì›ì¹™ ìˆ˜ë¦½ì´ ì‹œê¸‰í•˜ë‹¤ê³  í–ˆì–´ìš”." }
    ];
    
    let currentQ = 3; // 0-indexed, showing question 4
    let correctTotal = 3;
    const correctAnswer = "X";
    
    function selectAnswer(choice) {
      const oBtn = document.querySelector('.o-btn');
      const xBtn = document.querySelector('.x-btn');
      const resultArea = document.getElementById('resultArea');
      const resultContent = document.getElementById('resultContent');
      
      oBtn.classList.add('disabled');
      xBtn.classList.add('disabled');
      
      const selectedBtn = choice === 'O' ? oBtn : xBtn;
      selectedBtn.classList.add('selected');
      
      setTimeout(() => {
        const isCorrect = choice === correctAnswer;
        
        if (isCorrect) {
          selectedBtn.classList.add('correct', 'pulse-ring');
          resultContent.className = 'rounded-2xl p-6 bg-success-light border border-success/30';
          resultContent.innerHTML = `
            <div class="flex items-start gap-4">
              <span class="material-icons-round text-success text-3xl">check_circle</span>
              <div>
                <h3 class="font-bold text-success text-lg">ì •ë‹µì´ì—ìš”! ğŸ‰</h3>
                <p class="text-sm text-text-secondary mt-2">${quizzes[currentQ].explanation}</p>
              </div>
            </div>
          `;
          correctTotal++;
          document.getElementById('correctCount').textContent = correctTotal;
          document.getElementById('xpCount').textContent = correctTotal * 10;
        } else {
          selectedBtn.classList.add('incorrect', 'shake');
          const correctBtn = correctAnswer === 'O' ? oBtn : xBtn;
          correctBtn.classList.add('correct');
          resultContent.className = 'rounded-2xl p-6 bg-error-light border border-error/30';
          resultContent.innerHTML = `
            <div class="flex items-start gap-4">
              <span class="material-icons-round text-error text-3xl">cancel</span>
              <div>
                <h3 class="font-bold text-error text-lg">ì•„ì‰¬ì›Œìš”!</h3>
                <p class="text-sm text-text-secondary mt-2">ì •ë‹µì€ <strong class="text-error">${correctAnswer}</strong>ì˜ˆìš”. ${quizzes[currentQ].explanation}</p>
              </div>
            </div>
          `;
        }
        
        resultArea.classList.remove('hidden');
        
        // Show reference toggle after answer
        document.getElementById('referenceToggleArea').classList.remove('hidden');
        
        // Check if last question
        if (currentQ >= quizzes.length - 1) {
          document.getElementById('nextBtn').innerHTML = `
            ìš”ì•½í•˜ê¸°ë¡œ ì´ë™
            <span class="material-icons-round">arrow_forward</span>
          `;
          document.getElementById('nextBtn').onclick = () => window.location.href = 'korean-step5-summary.html';
        }
      }, 500);
    }
    
    function selectAnswerMobile(choice) {
      const oBtn = document.querySelector('#mobileOxButtons .o-btn');
      const xBtn = document.querySelector('#mobileOxButtons .x-btn');
      const resultArea = document.getElementById('mobileResultArea');
      const resultContent = document.getElementById('mobileResultContent');
      const nextBtn = document.getElementById('mobileNextBtn');
      
      oBtn.classList.add('disabled');
      xBtn.classList.add('disabled');
      
      const selectedBtn = choice === 'O' ? oBtn : xBtn;
      const isCorrect = choice === correctAnswer;
      
      setTimeout(() => {
        if (isCorrect) {
          selectedBtn.style.borderColor = '#22C55E';
          resultContent.className = 'rounded-xl p-4 bg-success-light border border-success/30';
          resultContent.innerHTML = `
            <div class="flex items-center gap-3">
              <span class="material-icons-round text-success">check_circle</span>
              <div>
                <span class="font-bold text-success">ì •ë‹µ! ğŸ‰</span>
                <p class="text-xs text-text-secondary">${quizzes[currentQ].explanation}</p>
              </div>
            </div>
          `;
        } else {
          selectedBtn.style.borderColor = '#EF4444';
          (correctAnswer === 'O' ? oBtn : xBtn).style.borderColor = '#22C55E';
          resultContent.className = 'rounded-xl p-4 bg-error-light border border-error/30';
          resultContent.innerHTML = `
            <div class="flex items-center gap-3">
              <span class="material-icons-round text-error">cancel</span>
              <div>
                <span class="font-bold text-error">ì˜¤ë‹µ</span>
                <p class="text-xs text-text-secondary">ì •ë‹µì€ ${correctAnswer}. ${quizzes[currentQ].explanation}</p>
              </div>
            </div>
          `;
        }
        
        resultArea.classList.remove('hidden');
        nextBtn.classList.remove('opacity-50', 'pointer-events-none');
        
        if (currentQ >= quizzes.length - 1) {
          nextBtn.innerHTML = `ìš”ì•½í•˜ê¸°ë¡œ ì´ë™ <span class="material-icons-round">arrow_forward</span>`;
          nextBtn.onclick = () => window.location.href = 'korean-step5-summary.html';
        }
      }, 300);
    }
    
    function nextQuestion() {
      currentQ++;
      if (currentQ < quizzes.length) {
        // Hide reference toggle for next question
        document.getElementById('referenceToggleArea').classList.add('hidden');
        document.getElementById('referencePanel').classList.add('hidden');
        
        // Reset UI and load next question
        const oBtn = document.querySelector('.o-btn');
        const xBtn = document.querySelector('.x-btn');
        oBtn.classList.remove('disabled', 'selected', 'correct', 'incorrect', 'pulse-ring', 'shake');
        xBtn.classList.remove('disabled', 'selected', 'correct', 'incorrect', 'pulse-ring', 'shake');
        oBtn.style.borderColor = '';
        xBtn.style.borderColor = '';
        
        document.getElementById('resultArea').classList.add('hidden');
        
        // Update question
        const quiz = quizzes[currentQ];
        correctAnswer = quiz.answer;
        document.getElementById('questionNum').textContent = `ë¬¸ì œ ${currentQ + 1}/5`;
        document.getElementById('questionText').textContent = quiz.question;
        
        // Update progress dots
        updateProgressDots();
      } else {
        // All questions complete - go to step5
        window.location.href = 'korean-step5-summary.html';
      }
    }
    
    function updateProgressDots() {
      // Update desktop dots (would need to implement based on answers)
    }
    
    function nextQuestionMobile() {
      currentQ++;
      if (currentQ < quizzes.length) {
        window.location.reload();
      } else {
        window.location.href = 'korean-step5-summary.html';
      }
    }
    
    function toggleReference() {
      const panel = document.getElementById('referencePanel');
      panel.classList.toggle('hidden');
    }
  </script>
  
  <!-- MAMA-ASST Common Modules -->
  <script src="assets/js/common.js"></script>
  <script src="assets/js/modal.js"></script>
  <script src="assets/js/toast.js"></script>
  <script src="assets/js/table.js"></script>
  <script src="assets/js/chart-config.js"></script>

</body>
</html>
