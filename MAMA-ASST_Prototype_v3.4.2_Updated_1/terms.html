<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>약관 동의 | MAMA-ASST</title>
  <meta name="description" content="MAMA-ASST 서비스 이용을 위한 약관에 동의해주세요.">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="assets/css/common.css">
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23FF6D4D' rx='20' width='100' height='100'/><text x='50' y='68' font-size='50' text-anchor='middle' fill='white'>M</text></svg>">
  
  <style>
    /* Terms Page Specific Styles */
    .auth-icon {
      background: var(--color-coral);
    }
    
    .auth-icon svg {
      width: 28px;
      height: 28px;
    }
    
    .terms-form {
      margin-top: var(--space-2);
    }
    
    /* All agree checkbox */
    .all-agree-section {
      background: var(--color-bg);
      border-radius: var(--radius-md);
      padding: var(--space-4);
      margin-bottom: var(--space-5);
    }
    
    .all-agree-checkbox {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      cursor: pointer;
    }
    
    .all-agree-checkbox .form-check-input {
      width: 22px;
      height: 22px;
    }
    
    .all-agree-checkbox .form-check-label {
      font-size: var(--text-body-lg);
      font-weight: var(--weight-semibold);
      color: var(--color-navy);
    }
    
    /* Individual terms */
    .terms-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }
    
    .terms-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .terms-item-left {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }
    
    .terms-item .form-check-input {
      width: 20px;
      height: 20px;
    }
    
    .terms-label {
      font-size: var(--text-body);
      color: var(--color-text-primary);
    }
    
    .terms-label .required-badge {
      color: var(--color-coral);
      font-weight: var(--weight-medium);
    }
    
    .terms-label .optional-badge {
      color: var(--color-text-secondary);
    }
    
    .view-terms-btn {
      font-size: var(--text-caption);
      color: var(--color-text-secondary);
      text-decoration: underline;
      cursor: pointer;
      background: none;
      border: none;
      padding: 0;
    }
    
    .view-terms-btn:hover {
      color: var(--color-coral);
    }
    
    .submit-btn {
      margin-top: var(--space-8);
    }
    
    /* Terms Modal */
    .terms-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: var(--z-modal);
      opacity: 0;
      visibility: hidden;
      transition: all var(--transition-base);
      padding: var(--space-4);
    }
    
    .terms-modal.show {
      opacity: 1;
      visibility: visible;
    }
    
    .terms-modal-content {
      background: white;
      border-radius: var(--radius-xl);
      width: 100%;
      max-width: 560px;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      transform: translateY(20px);
      transition: transform var(--transition-base);
    }
    
    .terms-modal.show .terms-modal-content {
      transform: translateY(0);
    }
    
    .terms-modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--space-5) var(--space-6);
      border-bottom: 1px solid var(--color-border-light);
    }
    
    .terms-modal-title {
      font-size: var(--text-h4);
      font-weight: var(--weight-semibold);
      color: var(--color-navy);
    }
    
    .terms-modal-close {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--color-text-secondary);
      transition: all var(--transition-fast);
    }
    
    .terms-modal-close:hover {
      background: var(--color-bg);
      color: var(--color-navy);
    }
    
    .terms-modal-body {
      flex: 1;
      overflow-y: auto;
      padding: var(--space-6);
    }
    
    .terms-modal-body h3 {
      font-size: var(--text-body-lg);
      font-weight: var(--weight-semibold);
      color: var(--color-navy);
      margin-top: var(--space-6);
      margin-bottom: var(--space-3);
    }
    
    .terms-modal-body h3:first-child {
      margin-top: 0;
    }
    
    .terms-modal-body p {
      font-size: var(--text-body);
      color: var(--color-text-secondary);
      line-height: 1.7;
      margin-bottom: var(--space-4);
    }
    
    .terms-modal-body ul {
      margin-left: var(--space-5);
      margin-bottom: var(--space-4);
    }
    
    .terms-modal-body li {
      font-size: var(--text-body);
      color: var(--color-text-secondary);
      line-height: 1.7;
      list-style: disc;
      margin-bottom: var(--space-2);
    }
    
    .terms-modal-footer {
      padding: var(--space-4) var(--space-6);
      border-top: 1px solid var(--color-border-light);
    }
    
    /* Error state */
    .terms-error {
      display: none;
      align-items: center;
      gap: var(--space-2);
      color: var(--color-error);
      font-size: var(--text-caption);
      margin-top: var(--space-4);
    }
    
    .terms-error.show {
      display: flex;
    }
    
    .terms-error svg {
      width: 16px;
      height: 16px;
    }
  </style>
</head>
<body>
  <main class="auth-layout">
    <div class="auth-card">
      <header class="auth-header">
        <div class="auth-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="9" y1="15" x2="15" y2="15"/>
            <line x1="9" y1="11" x2="15" y2="11"/>
          </svg>
        </div>
        <h1 class="auth-title">약관 동의</h1>
        <p class="auth-subtitle">서비스 이용을 위해 약관에 동의해주세요</p>
      </header>
      
      <form class="terms-form" id="termsForm" novalidate>
        <div class="all-agree-section">
          <label class="all-agree-checkbox">
            <input type="checkbox" id="allAgree" class="form-check-input">
            <span class="form-check-label">전체 동의</span>
          </label>
        </div>
        
        <div class="terms-list">
          <div class="terms-item">
            <div class="terms-item-left">
              <input type="checkbox" id="termsService" class="form-check-input term-checkbox" data-required="true">
              <label for="termsService" class="terms-label">
                <span class="required-badge">[필수]</span> 서비스 이용약관
              </label>
            </div>
            <button type="button" class="view-terms-btn" data-terms="service">보기</button>
          </div>
          
          <div class="terms-item">
            <div class="terms-item-left">
              <input type="checkbox" id="termsPrivacy" class="form-check-input term-checkbox" data-required="true">
              <label for="termsPrivacy" class="terms-label">
                <span class="required-badge">[필수]</span> 개인정보 처리방침
              </label>
            </div>
            <button type="button" class="view-terms-btn" data-terms="privacy">보기</button>
          </div>
          
          <div class="terms-item">
            <div class="terms-item-left">
              <input type="checkbox" id="termsAge" class="form-check-input term-checkbox" data-required="true">
              <label for="termsAge" class="terms-label">
                <span class="required-badge">[필수]</span> 만 14세 이상
              </label>
            </div>
          </div>
          
          <div class="terms-item">
            <div class="terms-item-left">
              <input type="checkbox" id="termsMarketing" class="form-check-input term-checkbox">
              <label for="termsMarketing" class="terms-label">
                <span class="optional-badge">[선택]</span> 마케팅 수신 동의
              </label>
            </div>
          </div>
        </div>
        
        <div class="terms-error" id="termsError">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
          <span>필수 약관에 모두 동의해주세요</span>
        </div>
        
        <div class="submit-btn">
          <button type="submit" class="btn btn-primary btn-full" id="submitBtn">
            동의하고 시작하기
          </button>
        </div>
      </form>
    </div>
  </main>

  <!-- Terms Modal -->
  <div class="terms-modal" id="termsModal">
    <div class="terms-modal-content">
      <div class="terms-modal-header">
        <h2 class="terms-modal-title" id="modalTitle">서비스 이용약관</h2>
        <button type="button" class="terms-modal-close" id="closeModal">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="terms-modal-body" id="modalBody">
        <!-- Content will be injected here -->
      </div>
      <div class="terms-modal-footer">
        <button type="button" class="btn btn-primary btn-full" id="agreeAndClose">확인</button>
      </div>
    </div>
  </div>

  <script>
    // DOM Elements
    const allAgreeCheckbox = document.getElementById('allAgree');
    const termCheckboxes = document.querySelectorAll('.term-checkbox');
    const termsForm = document.getElementById('termsForm');
    const termsError = document.getElementById('termsError');
    const submitBtn = document.getElementById('submitBtn');
    const termsModal = document.getElementById('termsModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    const closeModal = document.getElementById('closeModal');
    const agreeAndClose = document.getElementById('agreeAndClose');
    const viewTermsBtns = document.querySelectorAll('.view-terms-btn');
    
    // Terms content
    const termsContent = {
      service: {
        title: '서비스 이용약관',
        content: `
          <h3>제1조 (목적)</h3>
          <p>본 약관은 MAMA-ASST(이하 "회사")가 제공하는 AI 학습 서비스(이하 "서비스")의 이용조건 및 절차, 회사와 회원 간의 권리, 의무 및 책임사항을 규정함을 목적으로 합니다.</p>
          
          <h3>제2조 (용어의 정의)</h3>
          <p>본 약관에서 사용하는 용어의 정의는 다음과 같습니다:</p>
          <ul>
            <li>"서비스"란 회사가 제공하는 AI 기반 학습 플랫폼을 말합니다.</li>
            <li>"회원"이란 본 약관에 동의하고 서비스를 이용하는 자를 말합니다.</li>
            <li>"학원"이란 회사와 계약을 체결하고 서비스를 제공받는 교육 기관을 말합니다.</li>
          </ul>
          
          <h3>제3조 (약관의 효력)</h3>
          <p>본 약관은 서비스 화면에 게시하거나 기타의 방법으로 회원에게 공지함으로써 효력이 발생합니다.</p>
          
          <h3>제4조 (서비스의 제공)</h3>
          <p>회사는 다음과 같은 서비스를 제공합니다:</p>
          <ul>
            <li>국어, 영어, 수학 AI 학습 도우미</li>
            <li>학습 성향 분석 및 맞춤형 커리큘럼</li>
            <li>학습 플래너 및 진도 관리</li>
            <li>상담 및 평가 리포트</li>
          </ul>
          
          <h3>제5조 (회원의 의무)</h3>
          <p>회원은 서비스 이용 시 다음 행위를 하여서는 안 됩니다:</p>
          <ul>
            <li>타인의 정보를 도용하는 행위</li>
            <li>서비스를 영리 목적으로 무단 복제하는 행위</li>
            <li>서비스 운영을 방해하는 행위</li>
          </ul>
        `
      },
      privacy: {
        title: '개인정보 처리방침',
        content: `
          <h3>제1조 (수집하는 개인정보)</h3>
          <p>회사는 서비스 제공을 위해 다음과 같은 개인정보를 수집합니다:</p>
          <ul>
            <li>필수항목: 이름, 연락처, 학교급, 학년</li>
            <li>선택항목: 이메일, 프로필 사진</li>
            <li>자동수집항목: 학습 기록, 접속 로그, 기기 정보</li>
          </ul>
          
          <h3>제2조 (개인정보의 이용목적)</h3>
          <p>수집된 개인정보는 다음의 목적을 위해 이용됩니다:</p>
          <ul>
            <li>서비스 제공 및 회원 관리</li>
            <li>맞춤형 학습 콘텐츠 제공</li>
            <li>학습 분석 및 리포트 생성</li>
            <li>서비스 개선 및 신규 서비스 개발</li>
          </ul>
          
          <h3>제3조 (개인정보의 보유기간)</h3>
          <p>회사는 원칙적으로 개인정보 수집 및 이용목적이 달성된 후에는 해당 정보를 지체없이 파기합니다. 단, 관련 법령에 의해 보존할 필요가 있는 경우 일정 기간 동안 보관합니다.</p>
          
          <h3>제4조 (개인정보의 제3자 제공)</h3>
          <p>회사는 회원의 동의 없이 개인정보를 제3자에게 제공하지 않습니다. 다만, 다음의 경우는 예외로 합니다:</p>
          <ul>
            <li>법령의 규정에 의한 경우</li>
            <li>수사 목적으로 법령에 정해진 절차에 따라 요청이 있는 경우</li>
          </ul>
          
          <h3>제5조 (개인정보보호책임자)</h3>
          <p>회사는 개인정보 처리에 관한 업무를 총괄해서 책임지고, 관련 불만처리 및 피해구제를 위해 아래와 같이 개인정보보호책임자를 지정하고 있습니다.</p>
        `
      }
    };
    
    // All agree checkbox
    allAgreeCheckbox.addEventListener('change', (e) => {
      termCheckboxes.forEach(checkbox => {
        checkbox.checked = e.target.checked;
      });
      termsError.classList.remove('show');
    });
    
    // Individual checkboxes
    termCheckboxes.forEach(checkbox => {
      checkbox.addEventListener('change', () => {
        const allChecked = Array.from(termCheckboxes).every(cb => cb.checked);
        allAgreeCheckbox.checked = allChecked;
        termsError.classList.remove('show');
      });
    });
    
    // View terms buttons
    let currentTermsType = null;
    viewTermsBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        currentTermsType = btn.dataset.terms;
        const terms = termsContent[currentTermsType];
        modalTitle.textContent = terms.title;
        modalBody.innerHTML = terms.content;
        termsModal.classList.add('show');
        document.body.style.overflow = 'hidden';
      });
    });
    
    // Close modal
    function closeTermsModal() {
      termsModal.classList.remove('show');
      document.body.style.overflow = '';
      currentTermsType = null;
    }
    
    closeModal.addEventListener('click', closeTermsModal);
    
    termsModal.addEventListener('click', (e) => {
      if (e.target === termsModal) {
        closeTermsModal();
      }
    });
    
    // Agree and close
    agreeAndClose.addEventListener('click', () => {
      if (currentTermsType === 'service') {
        document.getElementById('termsService').checked = true;
      } else if (currentTermsType === 'privacy') {
        document.getElementById('termsPrivacy').checked = true;
      }
      
      // Update all agree checkbox
      const allChecked = Array.from(termCheckboxes).every(cb => cb.checked);
      allAgreeCheckbox.checked = allChecked;
      
      closeTermsModal();
    });
    
    // Form submission
    termsForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Check required terms
      const requiredCheckboxes = document.querySelectorAll('.term-checkbox[data-required="true"]');
      const allRequiredChecked = Array.from(requiredCheckboxes).every(cb => cb.checked);
      
      if (!allRequiredChecked) {
        termsError.classList.add('show');
        return;
      }
      
      // Show loading
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<span class="spinner"></span> 처리 중...';
      
      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      // Redirect to dashboard
      window.location.href = 'student-dashboard.html';
    });
    
    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && termsModal.classList.contains('show')) {
        closeTermsModal();
      }
    });
  </script>
  <!-- MAMA-ASST Common Modules -->
  <script src="assets/js/common.js"></script>
  <script src="assets/js/modal.js"></script>
  <script src="assets/js/toast.js"></script>
  <script src="assets/js/table.js"></script>
  <script src="assets/js/chart-config.js"></script>

</body>
</html>
