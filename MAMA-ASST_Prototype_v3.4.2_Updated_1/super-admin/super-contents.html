<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>콘텐츠 마스터 | MAMA-ASST 슈퍼관리자</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'super': '#6366F1',
            'super-dark': '#4F46E5',
            'super-light': '#EEF2FF',
            primary: '#FF6D4D',
            'primary-dark': '#E55A3A',
            'primary-light': '#FFF0ED',
            navy: '#1A2E4D',
            'navy-light': '#2C4872',
            korean: '#4285F4',
            'korean-light': '#E8F0FE',
            math: '#FBBC05',
            'math-light': '#FEF7E0',
            english: '#34A853',
            'english-light': '#E6F4EA',
            planner: '#9C27B0',
            'planner-light': '#F3E5F5',
            background: '#F9FAFB',
            surface: '#FFFFFF',
            'border-light': '#E5E7EB',
            'text-primary': '#1F2937',
            'text-secondary': '#6B7280',
            'text-tertiary': '#9CA3AF',
            success: '#22C55E',
            'success-light': '#F0FDF4',
            error: '#EF4444',
            'error-light': '#FEF2F2',
            warning: '#F59E0B',
            'warning-light': '#FFFBEB',
            info: '#3B82F6',
            'info-light': '#EFF6FF',
          },
          fontFamily: { sans: ['Pretendard', 'Apple SD Gothic Neo', 'Malgun Gothic', 'sans-serif'] },
        },
      },
    }
  </script>
  
  <style>
    .sidebar-item.active { 
      background: linear-gradient(135deg, #6366F1 0%, #818CF8 100%); 
      color: white; 
    }
    .sidebar-item.active .material-icons-round { color: white; }
    .mobile-menu-overlay { opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
    .mobile-menu-overlay.open { opacity: 1; visibility: visible; }
    .mobile-menu { transform: translateX(-100%); transition: transform 0.3s ease; }
    .mobile-menu.open { transform: translateX(0); }
    .gradient-super { background: linear-gradient(135deg, #6366F1 0%, #818CF8 100%); }
    .gradient-korean { background: linear-gradient(135deg, #4285F4 0%, #6EA8FE 100%); }
    .gradient-english { background: linear-gradient(135deg, #34A853 0%, #5DC573 100%); }
    .gradient-math { background: linear-gradient(135deg, #FBBC05 0%, #FFCE3A 100%); }
    .modal-overlay { opacity: 0; visibility: hidden; transition: all 0.3s; }
    .modal-overlay.open { opacity: 1; visibility: visible; }
    .modal-content { transform: scale(0.95) translateY(10px); transition: all 0.3s; }
    .modal-overlay.open .modal-content { transform: scale(1) translateY(0); }
    .subject-tab { transition: all 0.2s ease; border-bottom: 3px solid transparent; }
    .subject-tab.active-korean { border-color: #4285F4; background: #E8F0FE; color: #4285F4; }
    .subject-tab.active-english { border-color: #34A853; background: #E6F4EA; color: #34A853; }
    .subject-tab.active-math { border-color: #FBBC05; background: #FEF7E0; color: #9A7B0A; }
    .status-badge { padding: 4px 10px; border-radius: 9999px; font-size: 12px; font-weight: 500; }
    .table-row:hover { background-color: #F9FAFB; }
    .content-card { transition: all 0.2s ease; }
    .content-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
    .upload-zone { border: 2px dashed #D1D5DB; transition: all 0.2s; }
    .upload-zone:hover, .upload-zone.dragover { border-color: #6366F1; background: #EEF2FF; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .ai-processing { animation: pulse 2s ease-in-out infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .spin { animation: spin 1s linear infinite; }
  </style>
</head>
<body class="bg-background font-sans text-text-primary antialiased">
  
  <div class="flex min-h-screen">
    
    <!-- Desktop Sidebar -->
    <aside class="hidden lg:flex w-72 bg-gradient-to-b from-slate-900 to-slate-800 text-white flex-col fixed h-full z-40">
      <div class="p-5 border-b border-white/10">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-super rounded-xl flex items-center justify-center">
            <span class="material-icons-round text-white">shield</span>
          </div>
          <div>
            <span class="font-bold text-lg">MAMA-ASST</span>
            <p class="text-xs text-super-light">Super Admin</p>
          </div>
        </div>
      </div>
      
      <nav class="flex-1 p-4 space-y-1 overflow-y-auto">
        <a href="super-dashboard.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
          <span class="material-icons-round text-xl">space_dashboard</span>
          <span class="font-medium">플랫폼 대시보드</span>
        </a>
        
        <div class="pt-4">
          <p class="px-4 py-2 text-xs text-white/40 font-medium uppercase tracking-wider">비즈니스</p>
          <a href="super-academies.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
            <span class="material-icons-round text-xl">apartment</span>
            <span class="font-medium">학원 관리</span>
            <span class="ml-auto px-2 py-0.5 bg-super/50 text-white text-xs rounded-full">127</span>
          </a>
          <a href="super-inquiries.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
            <span class="material-icons-round text-xl">support_agent</span>
            <span class="font-medium">도입 문의</span>
            <span class="ml-auto px-2 py-0.5 bg-warning text-white text-xs rounded-full">12</span>
          </a>
          <a href="super-payments.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
            <span class="material-icons-round text-xl">account_balance</span>
            <span class="font-medium">결제/정산</span>
          </a>
        </div>
        
        <div class="pt-4">
          <p class="px-4 py-2 text-xs text-white/40 font-medium uppercase tracking-wider">콘텐츠</p>
          <a href="super-contents.html" class="sidebar-item active flex items-center gap-3 px-4 py-3 rounded-xl transition-all">
            <span class="material-icons-round text-xl">library_books</span>
            <span class="font-medium">콘텐츠 마스터</span>
          </a>
        </div>
        
        <div class="pt-4">
          <p class="px-4 py-2 text-xs text-white/40 font-medium uppercase tracking-wider">운영</p>
          <a href="super-users.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
            <span class="material-icons-round text-xl">groups</span>
            <span class="font-medium">사용자 관리</span>
          </a>
          <a href="super-ai-usage.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
            <span class="material-icons-round text-xl">smart_toy</span>
            <span class="font-medium">AI 모니터링</span>
          </a>
          <a href="super-notices.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
            <span class="material-icons-round text-xl">campaign</span>
            <span class="font-medium">공지사항</span>
          </a>
        </div>
        
        <div class="pt-4">
          <p class="px-4 py-2 text-xs text-white/40 font-medium uppercase tracking-wider">시스템</p>
          <a href="super-settings.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
            <span class="material-icons-round text-xl">tune</span>
            <span class="font-medium">시스템 설정</span>
          </a>
          <a href="super-logs.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
            <span class="material-icons-round text-xl">history</span>
            <span class="font-medium">로그/감사</span>
          </a>
        </div>
      </nav>
      
      <div class="p-4 border-t border-white/10">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-10 h-10 rounded-full gradient-super flex items-center justify-center text-white font-bold">
            <span class="material-icons-round text-xl">admin_panel_settings</span>
          </div>
          <div class="flex-1 min-w-0">
            <p class="font-medium text-sm truncate">Super Admin</p>
            <p class="text-xs text-white/60">MAMA-ASST Platform</p>
          </div>
        </div>
        <a href="../login.html" class="flex items-center justify-center gap-2 px-4 py-2 border border-white/20 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all text-sm">
          <span class="material-icons-round text-sm">logout</span>
          <span>로그아웃</span>
        </a>
      </div>
    </aside>
    
    <!-- Mobile Menu Overlay -->
    <div id="mobileMenuOverlay" class="mobile-menu-overlay fixed inset-0 bg-black/50 z-50 lg:hidden" onclick="closeMobileMenu()"></div>
    
    <!-- Mobile Slide Menu -->
    <div id="mobileMenu" class="mobile-menu fixed top-0 left-0 w-72 h-full bg-gradient-to-b from-slate-900 to-slate-800 text-white z-50 lg:hidden flex flex-col">
      <div class="p-5 border-b border-white/10 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-super rounded-xl flex items-center justify-center">
            <span class="material-icons-round text-white">shield</span>
          </div>
          <span class="font-bold text-lg">Super Admin</span>
        </div>
        <button onclick="closeMobileMenu()" class="p-2 hover:bg-white/10 rounded-lg">
          <span class="material-icons-round">close</span>
        </button>
      </div>
      
      <nav class="flex-1 p-4 space-y-1 overflow-y-auto">
        <a href="super-dashboard.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
          <span class="material-icons-round text-xl">space_dashboard</span>
          <span class="font-medium">플랫폼 대시보드</span>
        </a>
        <a href="super-academies.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
          <span class="material-icons-round text-xl">apartment</span>
          <span class="font-medium">학원 관리</span>
        </a>
        <a href="super-inquiries.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
          <span class="material-icons-round text-xl">support_agent</span>
          <span class="font-medium">도입 문의</span>
        </a>
        <a href="super-payments.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
          <span class="material-icons-round text-xl">account_balance</span>
          <span class="font-medium">결제/정산</span>
        </a>
        <a href="super-contents.html" class="sidebar-item active flex items-center gap-3 px-4 py-3 rounded-xl transition-all">
          <span class="material-icons-round text-xl">library_books</span>
          <span class="font-medium">콘텐츠 마스터</span>
        </a>
        <a href="super-users.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
          <span class="material-icons-round text-xl">groups</span>
          <span class="font-medium">사용자 관리</span>
        </a>
        <a href="super-settings.html" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
          <span class="material-icons-round text-xl">tune</span>
          <span class="font-medium">시스템 설정</span>
        </a>
      </nav>
    </div>
    
    <!-- Main Content -->
    <main class="flex-1 lg:ml-72">
      <!-- Top Header -->
      <header class="bg-white border-b border-border-light sticky top-0 z-30">
        <div class="flex items-center justify-between px-4 lg:px-8 py-4">
          <div class="flex items-center gap-4">
            <button onclick="openMobileMenu()" class="lg:hidden p-2 hover:bg-gray-100 rounded-xl">
              <span class="material-icons-round">menu</span>
            </button>
            <div>
              <h1 class="text-xl font-bold text-navy">콘텐츠 마스터</h1>
              <p class="text-sm text-text-secondary">국어/영어/수학 학습 콘텐츠 통합 관리</p>
            </div>
          </div>
          
          <div class="flex items-center gap-3">
            <button onclick="openBulkReviewModal()" class="hidden md:flex items-center gap-2 px-4 py-2 border border-planner text-planner rounded-xl hover:bg-planner-light transition-colors">
              <span class="material-icons-round text-sm">checklist</span>
              <span class="font-medium">일괄 검수</span>
              <span class="px-1.5 py-0.5 bg-planner text-white text-xs rounded-full">8</span>
            </button>
            <button onclick="openUploadModal()" class="hidden sm:flex items-center gap-2 px-4 py-2 gradient-super text-white rounded-xl hover:opacity-90 transition-opacity">
              <span class="material-icons-round text-sm">cloud_upload</span>
              <span class="font-medium">CSV 업로드</span>
            </button>
            <button onclick="openExportModal()" class="p-2 hover:bg-gray-100 rounded-xl" title="콘텐츠 내보내기">
              <span class="material-icons-round text-text-secondary">file_download</span>
            </button>
            <button onclick="openBulkReprocessModal()" class="p-2 hover:bg-warning-light rounded-xl" title="일괄 AI 재처리">
              <span class="material-icons-round text-warning">replay</span>
            </button>
          </div>
        </div>
      </header>
      
      <div class="p-4 lg:p-8">
        <!-- 콘텐츠 통계 카드 -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-6">
          <!-- 전체 콘텐츠 -->
          <div class="content-card bg-white rounded-2xl p-5 shadow-sm border border-border-light">
            <div class="flex items-center justify-between mb-3">
              <div class="w-12 h-12 rounded-xl gradient-super flex items-center justify-center">
                <span class="material-icons-round text-white text-2xl">inventory_2</span>
              </div>
              <span class="px-2 py-1 bg-success-light text-success text-xs font-medium rounded-lg">+45 이번 주</span>
            </div>
            <p class="text-sm text-text-secondary mb-1">전체 콘텐츠</p>
            <p class="text-2xl font-bold text-navy">2,335</p>
          </div>
          
          <!-- 국어 지문 -->
          <div class="content-card bg-white rounded-2xl p-5 shadow-sm border border-border-light">
            <div class="flex items-center justify-between mb-3">
              <div class="w-12 h-12 rounded-xl gradient-korean flex items-center justify-center">
                <span class="material-icons-round text-white text-2xl">menu_book</span>
              </div>
              <span class="px-2 py-1 bg-korean-light text-korean text-xs font-medium rounded-lg">국어</span>
            </div>
            <p class="text-sm text-text-secondary mb-1">국어 지문</p>
            <p class="text-2xl font-bold text-korean">245</p>
          </div>
          
          <!-- 영어 단어 -->
          <div class="content-card bg-white rounded-2xl p-5 shadow-sm border border-border-light">
            <div class="flex items-center justify-between mb-3">
              <div class="w-12 h-12 rounded-xl gradient-english flex items-center justify-center">
                <span class="material-icons-round text-white text-2xl">translate</span>
              </div>
              <span class="px-2 py-1 bg-english-light text-english text-xs font-medium rounded-lg">영어</span>
            </div>
            <p class="text-sm text-text-secondary mb-1">영어 단어</p>
            <p class="text-2xl font-bold text-english">1,200</p>
          </div>
          
          <!-- 수학 문제 -->
          <div class="content-card bg-white rounded-2xl p-5 shadow-sm border border-border-light">
            <div class="flex items-center justify-between mb-3">
              <div class="w-12 h-12 rounded-xl gradient-math flex items-center justify-center">
                <span class="material-icons-round text-white text-2xl">calculate</span>
              </div>
              <span class="px-2 py-1 bg-math-light text-yellow-700 text-xs font-medium rounded-lg">수학</span>
            </div>
            <p class="text-sm text-text-secondary mb-1">수학 문제</p>
            <p class="text-2xl font-bold" style="color: #9A7B0A;">890</p>
          </div>
        </div>
        
        <!-- AI 처리 현황 -->
        <div class="bg-white rounded-2xl p-5 shadow-sm border border-border-light mb-6">
          <div class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-4">
            <h3 class="font-bold text-navy flex items-center gap-2">
              <span class="material-icons-round text-super">smart_toy</span>
              AI 처리 현황
            </h3>
            <div class="flex gap-4 text-sm">
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-warning"></span>
                <span class="text-text-secondary">대기 중 <span class="font-bold text-warning">12</span></span>
              </div>
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-info ai-processing"></span>
                <span class="text-text-secondary">처리 중 <span class="font-bold text-info">5</span></span>
              </div>
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-planner"></span>
                <span class="text-text-secondary">검수 대기 <span class="font-bold text-planner">8</span></span>
              </div>
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-error"></span>
                <span class="text-text-secondary">실패 <span class="font-bold text-error">2</span></span>
              </div>
            </div>
          </div>
          
          <!-- 처리 큐 -->
          <div class="grid grid-cols-1 lg:grid-cols-4 gap-4">
            <!-- 대기 중 -->
            <div class="bg-warning-light/50 rounded-xl p-4">
              <div class="flex items-center gap-2 mb-3">
                <span class="material-icons-round text-warning">schedule</span>
                <span class="font-medium text-warning">대기 중</span>
              </div>
              <div class="space-y-2">
                <div class="bg-white rounded-lg p-3 text-sm cursor-pointer hover:ring-2 hover:ring-warning/30" onclick="openAiQueueModal('pending', 'KOR-246~250')">
                  <p class="font-medium text-navy truncate">국어 지문 #246-250</p>
                  <p class="text-xs text-text-tertiary">구조 분석 대기</p>
                </div>
                <div class="bg-white rounded-lg p-3 text-sm cursor-pointer hover:ring-2 hover:ring-warning/30" onclick="openAiQueueModal('pending', 'MATH-891~897')">
                  <p class="font-medium text-navy truncate">수학 문제 #891-897</p>
                  <p class="text-xs text-text-tertiary">풀이 생성 대기</p>
                </div>
              </div>
            </div>
            
            <!-- 처리 중 -->
            <div class="bg-info-light/50 rounded-xl p-4">
              <div class="flex items-center gap-2 mb-3">
                <span class="material-icons-round text-info spin">sync</span>
                <span class="font-medium text-info">처리 중</span>
              </div>
              <div class="space-y-2">
                <div class="bg-white rounded-lg p-3 text-sm cursor-pointer hover:ring-2 hover:ring-info/30" onclick="openAiProgressModal('ENG-1201~1210', '영어 단어 마커 처리')">
                  <p class="font-medium text-navy truncate">영어 단어 #1201-1210</p>
                  <p class="text-xs text-text-tertiary">마커 처리 중... 60%</p>
                  <div class="w-full h-1.5 bg-gray-200 rounded-full mt-2">
                    <div class="h-full bg-info rounded-full" style="width: 60%"></div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 검수 대기 -->
            <div class="bg-planner-light/50 rounded-xl p-4">
              <div class="flex items-center gap-2 mb-3">
                <span class="material-icons-round text-planner">fact_check</span>
                <span class="font-medium text-planner">검수 대기</span>
              </div>
              <div class="space-y-2">
                <div class="bg-white rounded-lg p-3 text-sm cursor-pointer hover:ring-2 hover:ring-planner/30" onclick="openReviewModal('KOR-241', '국어 지문 #241-245')">
                  <p class="font-medium text-navy truncate">국어 지문 #241-245</p>
                  <p class="text-xs text-text-tertiary">O/X 퀴즈 검수 필요</p>
                </div>
                <div class="bg-white rounded-lg p-3 text-sm cursor-pointer hover:ring-2 hover:ring-planner/30" onclick="openReviewModal('MATH-885', '수학 문제 #885-890')">
                  <p class="font-medium text-navy truncate">수학 문제 #885-890</p>
                  <p class="text-xs text-text-tertiary">단계별 풀이 검수</p>
                </div>
              </div>
            </div>
            
            <!-- 실패 -->
            <div class="bg-error-light/50 rounded-xl p-4">
              <div class="flex items-center gap-2 mb-3">
                <span class="material-icons-round text-error">error</span>
                <span class="font-medium text-error">실패</span>
              </div>
              <div class="space-y-2">
                <div class="bg-white rounded-lg p-3 text-sm cursor-pointer hover:ring-2 hover:ring-error/30" onclick="openAiFailureModal('MATH-878', '적분', 'LaTeX 파싱 오류')">
                  <p class="font-medium text-navy truncate">수학 문제 #878</p>
                  <p class="text-xs text-error">LaTeX 파싱 오류</p>
                  <button onclick="event.stopPropagation(); retryAiProcess('MATH-878')" class="mt-2 px-3 py-1 bg-error text-white text-xs rounded-lg hover:bg-error/90">재시도</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 과목별 탭 -->
        <div class="bg-white rounded-2xl shadow-sm border border-border-light overflow-hidden">
          <!-- 탭 헤더 -->
          <div class="flex border-b border-border-light overflow-x-auto">
            <button class="subject-tab active-korean flex-1 min-w-[120px] px-6 py-4 text-sm font-medium text-center flex items-center justify-center gap-2" onclick="switchSubjectTab('korean')">
              <span class="material-icons-round text-lg">menu_book</span>
              국어 지문
              <span class="px-2 py-0.5 bg-white/80 text-xs rounded-full">245</span>
            </button>
            <button class="subject-tab flex-1 min-w-[120px] px-6 py-4 text-sm font-medium text-center text-text-secondary hover:bg-gray-50 flex items-center justify-center gap-2" onclick="switchSubjectTab('english')">
              <span class="material-icons-round text-lg">translate</span>
              영어 단어
              <span class="px-2 py-0.5 bg-gray-100 text-xs rounded-full">1,200</span>
            </button>
            <button class="subject-tab flex-1 min-w-[120px] px-6 py-4 text-sm font-medium text-center text-text-secondary hover:bg-gray-50 flex items-center justify-center gap-2" onclick="switchSubjectTab('math')">
              <span class="material-icons-round text-lg">calculate</span>
              수학 문제
              <span class="px-2 py-0.5 bg-gray-100 text-xs rounded-full">890</span>
            </button>
          </div>
          
          <!-- 국어 탭 콘텐츠 -->
          <div id="tab-korean" class="subject-content p-6">
            <!-- 검색 및 필터 -->
            <div class="flex flex-col lg:flex-row gap-4 mb-6">
              <div class="flex-1 relative">
                <span class="material-icons-round absolute left-4 top-1/2 -translate-y-1/2 text-text-tertiary">search</span>
                <input type="text" placeholder="지문 제목, ID 검색" 
                       class="w-full pl-12 pr-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none focus:ring-2 focus:ring-korean/20 focus:border-korean">
              </div>
              <div class="flex flex-wrap gap-3">
                <select class="px-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none text-sm">
                  <option>전체 학년</option>
                  <option>초등 3-4</option>
                  <option>초등 5-6</option>
                  <option>중등 1-3</option>
                  <option>고등 1-3</option>
                </select>
                <select class="px-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none text-sm">
                  <option>전체 유형</option>
                  <option>문학</option>
                  <option>비문학</option>
                  <option>시</option>
                </select>
                <select class="px-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none text-sm">
                  <option>전체 상태</option>
                  <option>승인됨</option>
                  <option>검수 대기</option>
                  <option>AI 처리중</option>
                </select>
              </div>
            </div>
            
            <!-- 국어 지문 테이블 -->
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-korean-light/50 border-y border-border-light">
                  <tr>
                    <th class="px-4 py-3 text-left text-xs font-semibold text-korean uppercase">ID</th>
                    <th class="px-4 py-3 text-left text-xs font-semibold text-korean uppercase">제목</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-korean uppercase">유형</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-korean uppercase">학년</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-korean uppercase">AI 상태</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-korean uppercase">콘텐츠 상태</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-korean uppercase">등록일</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-korean uppercase">관리</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-border-light">
                  <tr class="table-row cursor-pointer" onclick="openContentDetail('korean', 'KOR-245')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm text-korean">KOR-245</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy">윤동주 - 서시</p>
                      <p class="text-xs text-text-tertiary truncate max-w-xs">죽는 날까지 하늘을 우러러...</p>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-planner-light text-planner">시</span>
                    </td>
                    <td class="px-4 py-3 text-center text-sm">고등 1-3</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success-light text-success">완료</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success text-white">승인됨</span>
                    </td>
                    <td class="px-4 py-3 text-center text-sm text-text-secondary">01.08</td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button onclick="openContentDetail('korean', 'KOR-245')" class="p-2 hover:bg-gray-100 rounded-lg" title="미리보기">
                          <span class="material-icons-round text-text-secondary text-lg">visibility</span>
                        </button>
                        <button onclick="openEditContentModal('korean', 'KOR-245', '윤동주 - 서시')" class="p-2 hover:bg-gray-100 rounded-lg" title="수정">
                          <span class="material-icons-round text-text-secondary text-lg">edit</span>
                        </button>
                        <button onclick="toggleContentDropdown(event, 'KOR-245')" class="p-2 hover:bg-gray-100 rounded-lg" title="더보기">
                          <span class="material-icons-round text-text-secondary text-lg">more_vert</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr class="table-row cursor-pointer bg-planner-light/20" onclick="openContentDetail('korean', 'KOR-244')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm text-korean">KOR-244</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy">인공지능의 미래와 윤리</p>
                      <p class="text-xs text-text-tertiary truncate max-w-xs">인공지능 기술이 발전하면서...</p>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-info-light text-info">비문학</span>
                    </td>
                    <td class="px-4 py-3 text-center text-sm">중등 1-3</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success-light text-success">완료</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-planner text-white">검수 대기</span>
                    </td>
                    <td class="px-4 py-3 text-center text-sm text-text-secondary">01.07</td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button class="p-2 hover:bg-planner-light rounded-lg" title="검수하기" onclick="openReviewModal('KOR-244', '인공지능의 미래와 윤리')">
                          <span class="material-icons-round text-planner text-lg">fact_check</span>
                        </button>
                        <button onclick="openContentDetail('korean', 'KOR-244')" class="p-2 hover:bg-gray-100 rounded-lg" title="미리보기">
                          <span class="material-icons-round text-text-secondary text-lg">visibility</span>
                        </button>
                        <button onclick="openEditContentModal('korean', 'KOR-244', '인공지능의 미래와 윤리')" class="p-2 hover:bg-gray-100 rounded-lg" title="수정">
                          <span class="material-icons-round text-text-secondary text-lg">edit</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr class="table-row cursor-pointer" onclick="openContentDetail('korean', 'KOR-243')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm text-korean">KOR-243</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy">홍길동전 발췌</p>
                      <p class="text-xs text-text-tertiary truncate max-w-xs">조선 시대 영웅 소설의 대표작...</p>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-primary-light text-primary">문학</span>
                    </td>
                    <td class="px-4 py-3 text-center text-sm">중등 1-3</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-info text-white ai-processing">처리 중</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-gray-200 text-text-secondary">대기</span>
                    </td>
                    <td class="px-4 py-3 text-center text-sm text-text-secondary">01.07</td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button onclick="openAiProgressModal('KOR-243', '홍길동전 발췌')" class="p-2 hover:bg-info-light rounded-lg" title="처리 현황">
                          <span class="material-icons-round text-info text-lg">hourglass_top</span>
                        </button>
                        <button onclick="openContentDetail('korean', 'KOR-243')" class="p-2 hover:bg-gray-100 rounded-lg" title="미리보기">
                          <span class="material-icons-round text-text-secondary text-lg">visibility</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- 영어 탭 콘텐츠 -->
          <div id="tab-english" class="subject-content p-6 hidden">
            <!-- 검색 및 필터 -->
            <div class="flex flex-col lg:flex-row gap-4 mb-6">
              <div class="flex-1 relative">
                <span class="material-icons-round absolute left-4 top-1/2 -translate-y-1/2 text-text-tertiary">search</span>
                <input type="text" placeholder="단어, 뜻, ID 검색" 
                       class="w-full pl-12 pr-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none focus:ring-2 focus:ring-english/20 focus:border-english">
              </div>
              <div class="flex flex-wrap gap-3">
                <select class="px-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none text-sm">
                  <option>전체 레벨</option>
                  <option>초급 (1-3)</option>
                  <option>중급 (4-6)</option>
                  <option>고급 (7-9)</option>
                </select>
                <select class="px-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none text-sm">
                  <option>전체 상태</option>
                  <option>승인됨</option>
                  <option>마커 처리 중</option>
                  <option>검수 대기</option>
                </select>
              </div>
            </div>
            
            <!-- 영어 단어 테이블 -->
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-english-light/50 border-y border-border-light">
                  <tr>
                    <th class="px-4 py-3 text-left text-xs font-semibold text-english uppercase">ID</th>
                    <th class="px-4 py-3 text-left text-xs font-semibold text-english uppercase">단어</th>
                    <th class="px-4 py-3 text-left text-xs font-semibold text-english uppercase">뜻</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-english uppercase">레벨</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-english uppercase">마커 상태</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-english uppercase">콘텐츠 상태</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-english uppercase">관리</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-border-light">
                  <tr class="table-row cursor-pointer" onclick="openContentDetail('english', 'ENG-1200')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm text-english">ENG-1200</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy">serendipity</p>
                      <p class="text-xs text-text-tertiary">/ˌserənˈdɪpɪti/</p>
                    </td>
                    <td class="px-4 py-3 text-sm">우연한 발견, 뜻밖의 행운</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-error-light text-error">고급</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success-light text-success">완료</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success text-white">승인됨</span>
                    </td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button onclick="openContentDetail('english', 'ENG-1200')" class="p-2 hover:bg-gray-100 rounded-lg" title="미리보기">
                          <span class="material-icons-round text-text-secondary text-lg">visibility</span>
                        </button>
                        <button onclick="openEditContentModal('english', 'ENG-1200', 'serendipity')" class="p-2 hover:bg-gray-100 rounded-lg" title="편집">
                          <span class="material-icons-round text-text-secondary text-lg">edit</span>
                        </button>
                        <button onclick="toggleContentDropdown(event, 'ENG-1200')" class="p-2 hover:bg-gray-100 rounded-lg" title="더보기">
                          <span class="material-icons-round text-text-secondary text-lg">more_vert</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr class="table-row cursor-pointer" onclick="openContentDetail('english', 'ENG-1199')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm text-english">ENG-1199</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy">eloquent</p>
                      <p class="text-xs text-text-tertiary">/ˈeləkwənt/</p>
                    </td>
                    <td class="px-4 py-3 text-sm">웅변의, 설득력 있는</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-warning-light text-warning">중급</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-info text-white ai-processing">처리 중</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-gray-200 text-text-secondary">대기</span>
                    </td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button onclick="openContentDetail('english', 'ENG-1199')" class="p-2 hover:bg-gray-100 rounded-lg" title="미리보기">
                          <span class="material-icons-round text-text-secondary text-lg">visibility</span>
                        </button>
                        <button onclick="openAiProgressModal('ENG-1199', 'eloquent')" class="p-2 hover:bg-info-light rounded-lg" title="처리 현황">
                          <span class="material-icons-round text-info text-lg">hourglass_top</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr class="table-row cursor-pointer" onclick="openContentDetail('english', 'ENG-1198')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm text-english">ENG-1198</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy">abundant</p>
                      <p class="text-xs text-text-tertiary">/əˈbʌndənt/</p>
                    </td>
                    <td class="px-4 py-3 text-sm">풍부한, 많은</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success-light text-success">초급</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success-light text-success">완료</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success text-white">승인됨</span>
                    </td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button onclick="openContentDetail('english', 'ENG-1198')" class="p-2 hover:bg-gray-100 rounded-lg" title="미리보기">
                          <span class="material-icons-round text-text-secondary text-lg">visibility</span>
                        </button>
                        <button onclick="openEditContentModal('english', 'ENG-1198', 'abundant')" class="p-2 hover:bg-gray-100 rounded-lg" title="편집">
                          <span class="material-icons-round text-text-secondary text-lg">edit</span>
                        </button>
                        <button onclick="toggleContentDropdown(event, 'ENG-1198')" class="p-2 hover:bg-gray-100 rounded-lg" title="더보기">
                          <span class="material-icons-round text-text-secondary text-lg">more_vert</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                  
                  <!-- 영어 검수 대기 콘텐츠 -->
                  <tr class="table-row cursor-pointer" onclick="openContentDetail('english', 'ENG-1195')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm text-english">ENG-1195</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy">perseverance</p>
                      <p class="text-xs text-text-tertiary">/ˌpɜːsɪˈvɪərəns/</p>
                    </td>
                    <td class="px-4 py-3 text-sm">인내, 끈기</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-warning-light text-warning">중급</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success-light text-success">완료</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-planner text-white">검수 대기</span>
                    </td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button onclick="openReviewModal('ENG-1195', 'perseverance')" class="p-2 hover:bg-planner-light rounded-lg" title="검수하기">
                          <span class="material-icons-round text-planner text-lg">fact_check</span>
                        </button>
                        <button onclick="openContentDetail('english', 'ENG-1195')" class="p-2 hover:bg-gray-100 rounded-lg" title="미리보기">
                          <span class="material-icons-round text-text-secondary text-lg">visibility</span>
                        </button>
                        <button onclick="openEditContentModal('english', 'ENG-1195', 'perseverance')" class="p-2 hover:bg-gray-100 rounded-lg" title="편집">
                          <span class="material-icons-round text-text-secondary text-lg">edit</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                  
                  <!-- 영어 검수 대기 콘텐츠 2 -->
                  <tr class="table-row cursor-pointer" onclick="openContentDetail('english', 'ENG-1192')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm text-english">ENG-1192</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy">meticulous</p>
                      <p class="text-xs text-text-tertiary">/məˈtɪkjələs/</p>
                    </td>
                    <td class="px-4 py-3 text-sm">꼼꼼한, 세심한</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-error-light text-error">고급</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success-light text-success">완료</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-planner text-white">검수 대기</span>
                    </td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button onclick="openReviewModal('ENG-1192', 'meticulous')" class="p-2 hover:bg-planner-light rounded-lg" title="검수하기">
                          <span class="material-icons-round text-planner text-lg">fact_check</span>
                        </button>
                        <button onclick="openContentDetail('english', 'ENG-1192')" class="p-2 hover:bg-gray-100 rounded-lg" title="미리보기">
                          <span class="material-icons-round text-text-secondary text-lg">visibility</span>
                        </button>
                        <button onclick="openEditContentModal('english', 'ENG-1192', 'meticulous')" class="p-2 hover:bg-gray-100 rounded-lg" title="편집">
                          <span class="material-icons-round text-text-secondary text-lg">edit</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- 수학 탭 콘텐츠 -->
          <div id="tab-math" class="subject-content p-6 hidden">
            <!-- 검색 및 필터 -->
            <div class="flex flex-col lg:flex-row gap-4 mb-6">
              <div class="flex-1 relative">
                <span class="material-icons-round absolute left-4 top-1/2 -translate-y-1/2 text-text-tertiary">search</span>
                <input type="text" placeholder="문제 ID, 단원명 검색" 
                       class="w-full pl-12 pr-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none focus:ring-2 focus:ring-math/20 focus:border-math">
              </div>
              <div class="flex flex-wrap gap-3">
                <select class="px-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none text-sm">
                  <option>전체 학년</option>
                  <option>초등 3-4</option>
                  <option>초등 5-6</option>
                  <option>중등 1-3</option>
                  <option>고등 1-3</option>
                </select>
                <select class="px-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none text-sm">
                  <option>전체 유형</option>
                  <option>계산</option>
                  <option>개념</option>
                  <option>응용</option>
                  <option>심화</option>
                </select>
                <select class="px-4 py-3 bg-background border border-border-light rounded-xl focus:outline-none text-sm">
                  <option>전체 상태</option>
                  <option>승인됨</option>
                  <option>검수 대기</option>
                  <option>AI 처리중</option>
                </select>
              </div>
            </div>
            
            <!-- 수학 문제 테이블 -->
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-math-light/50 border-y border-border-light">
                  <tr>
                    <th class="px-4 py-3 text-left text-xs font-semibold text-yellow-700 uppercase">ID</th>
                    <th class="px-4 py-3 text-left text-xs font-semibold text-yellow-700 uppercase">문제</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-yellow-700 uppercase">단원</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-yellow-700 uppercase">학년</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-yellow-700 uppercase">유형</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-yellow-700 uppercase">AI 상태</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-yellow-700 uppercase">콘텐츠 상태</th>
                    <th class="px-4 py-3 text-center text-xs font-semibold text-yellow-700 uppercase">관리</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-border-light">
                  <tr class="table-row cursor-pointer" onclick="openContentDetail('math', 'MATH-890')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm" style="color: #9A7B0A;">MATH-890</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy truncate max-w-xs">이차방정식 x² - 5x + 6 = 0의 해를 구하시오.</p>
                    </td>
                    <td class="px-4 py-3 text-center text-sm">이차방정식</td>
                    <td class="px-4 py-3 text-center text-sm">중3</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-info-light text-info">계산</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success-light text-success">완료</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success text-white">승인됨</span>
                    </td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button onclick="openContentDetail('math', 'MATH-890')" class="p-2 hover:bg-gray-100 rounded-lg" title="미리보기">
                          <span class="material-icons-round text-text-secondary text-lg">visibility</span>
                        </button>
                        <button onclick="openEditContentModal('math', 'MATH-890', '이차방정식')" class="p-2 hover:bg-gray-100 rounded-lg" title="편집">
                          <span class="material-icons-round text-text-secondary text-lg">edit</span>
                        </button>
                        <button onclick="toggleContentDropdown(event, 'MATH-890')" class="p-2 hover:bg-gray-100 rounded-lg" title="더보기">
                          <span class="material-icons-round text-text-secondary text-lg">more_vert</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr class="table-row bg-error-light/20 cursor-pointer" onclick="openAiFailureModal('MATH-878', '적분', 'LaTeX 파싱 오류')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm" style="color: #9A7B0A;">MATH-878</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy truncate max-w-xs">∫sin²x dx의 값을 구하시오.</p>
                    </td>
                    <td class="px-4 py-3 text-center text-sm">적분</td>
                    <td class="px-4 py-3 text-center text-sm">고2</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-primary-light text-primary">심화</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-error text-white">실패</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-gray-200 text-text-secondary">대기</span>
                    </td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button onclick="openAiFailureModal('MATH-878', '적분', 'LaTeX 파싱 오류')" class="p-2 hover:bg-error-light rounded-lg" title="실패 상세">
                          <span class="material-icons-round text-error text-lg">error_outline</span>
                        </button>
                        <button onclick="retryAiProcess('MATH-878')" class="p-2 hover:bg-warning-light rounded-lg" title="재시도">
                          <span class="material-icons-round text-warning text-lg">refresh</span>
                        </button>
                        <button onclick="openEditContentModal('math', 'MATH-878', '적분')" class="p-2 hover:bg-gray-100 rounded-lg" title="편집">
                          <span class="material-icons-round text-text-secondary text-lg">edit</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr class="table-row cursor-pointer" onclick="openContentDetail('math', 'MATH-877')">
                    <td class="px-4 py-3">
                      <span class="font-mono text-sm" style="color: #9A7B0A;">MATH-877</span>
                    </td>
                    <td class="px-4 py-3">
                      <p class="font-medium text-navy truncate max-w-xs">피타고라스 정리를 이용하여 빗변의 길이를 구하시오.</p>
                    </td>
                    <td class="px-4 py-3 text-center text-sm">피타고라스</td>
                    <td class="px-4 py-3 text-center text-sm">중2</td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-warning-light text-warning">응용</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-success-light text-success">완료</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                      <span class="status-badge bg-planner text-white">검수 대기</span>
                    </td>
                    <td class="px-4 py-3 text-center" onclick="event.stopPropagation()">
                      <div class="flex items-center justify-center gap-1">
                        <button onclick="openReviewModal('MATH-877', '피타고라스 정리')" class="p-2 hover:bg-planner-light rounded-lg" title="검수하기">
                          <span class="material-icons-round text-planner text-lg">fact_check</span>
                        </button>
                        <button onclick="openContentDetail('math', 'MATH-877')" class="p-2 hover:bg-gray-100 rounded-lg" title="미리보기">
                          <span class="material-icons-round text-text-secondary text-lg">visibility</span>
                        </button>
                        <button onclick="openEditContentModal('math', 'MATH-877', '피타고라스')" class="p-2 hover:bg-gray-100 rounded-lg" title="편집">
                          <span class="material-icons-round text-text-secondary text-lg">edit</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- 페이지네이션 -->
          <div class="px-6 py-4 border-t border-border-light flex flex-col sm:flex-row items-center justify-between gap-4">
            <p class="text-sm text-text-secondary">총 <span class="font-bold text-navy" id="totalCount">245</span>개 콘텐츠</p>
            <div class="flex items-center gap-2">
              <button class="p-2 border border-border-light rounded-lg hover:bg-gray-50 disabled:opacity-50" disabled>
                <span class="material-icons-round text-sm">chevron_left</span>
              </button>
              <button class="w-10 h-10 gradient-super text-white rounded-lg font-medium">1</button>
              <button class="w-10 h-10 border border-border-light rounded-lg hover:bg-gray-50 font-medium">2</button>
              <button class="w-10 h-10 border border-border-light rounded-lg hover:bg-gray-50 font-medium">3</button>
              <span class="px-2 text-text-tertiary">...</span>
              <button class="w-10 h-10 border border-border-light rounded-lg hover:bg-gray-50 font-medium">25</button>
              <button class="p-2 border border-border-light rounded-lg hover:bg-gray-50">
                <span class="material-icons-round text-sm">chevron_right</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <!-- CSV 업로드 모달 -->
  <div id="uploadModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeUploadModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-xl overflow-hidden" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-border-light flex items-center justify-between">
        <h2 class="text-lg font-bold text-navy">CSV 콘텐츠 업로드</h2>
        <button onclick="closeUploadModal()" class="p-2 hover:bg-gray-100 rounded-lg">
          <span class="material-icons-round">close</span>
        </button>
      </div>
      
      <div class="p-6">
        <!-- 과목 선택 -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-navy mb-2">과목 선택</label>
          <div class="grid grid-cols-3 gap-3">
            <button class="upload-subject-btn px-4 py-3 border-2 border-korean bg-korean-light text-korean rounded-xl font-medium flex items-center justify-center gap-2" data-subject="korean">
              <span class="material-icons-round">menu_book</span>
              국어
            </button>
            <button class="upload-subject-btn px-4 py-3 border-2 border-border-light rounded-xl font-medium flex items-center justify-center gap-2 text-text-secondary hover:border-english hover:bg-english-light hover:text-english" data-subject="english">
              <span class="material-icons-round">translate</span>
              영어
            </button>
            <button class="upload-subject-btn px-4 py-3 border-2 border-border-light rounded-xl font-medium flex items-center justify-center gap-2 text-text-secondary hover:border-math hover:bg-math-light hover:text-yellow-700" data-subject="math">
              <span class="material-icons-round">calculate</span>
              수학
            </button>
          </div>
        </div>
        
        <!-- 업로드 영역 -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-navy mb-2">CSV 파일</label>
          <div id="uploadZone" class="upload-zone rounded-xl p-8 text-center cursor-pointer" 
               onclick="document.getElementById('fileInput').click()"
               ondragover="handleDragOver(event)"
               ondragleave="handleDragLeave(event)"
               ondrop="handleDrop(event)">
            <input type="file" id="fileInput" class="hidden" accept=".csv" onchange="handleFileSelect(event)">
            <span class="material-icons-round text-4xl text-text-tertiary mb-3">cloud_upload</span>
            <p class="font-medium text-navy mb-1">CSV 파일을 드래그하거나 클릭하여 업로드</p>
            <p class="text-sm text-text-secondary">최대 10MB, UTF-8 인코딩</p>
          </div>
        </div>
        
        <!-- 업로드된 파일 -->
        <div id="uploadedFile" class="hidden mb-6 p-4 bg-success-light rounded-xl">
          <div class="flex items-center gap-3">
            <span class="material-icons-round text-success">description</span>
            <div class="flex-1">
              <p id="fileName" class="font-medium text-navy">korean_contents_20250108.csv</p>
              <p id="fileInfo" class="text-sm text-text-secondary">245 행 · 156 KB</p>
            </div>
            <button onclick="removeFile()" class="p-2 hover:bg-success/20 rounded-lg">
              <span class="material-icons-round text-success">close</span>
            </button>
          </div>
        </div>
        
        <!-- 템플릿 다운로드 -->
        <div class="p-4 bg-info-light rounded-xl mb-6">
          <div class="flex items-start gap-3">
            <span class="material-icons-round text-info">info</span>
            <div>
              <p class="font-medium text-navy mb-1">CSV 템플릿</p>
              <p class="text-sm text-text-secondary mb-2">올바른 형식의 CSV 파일을 업로드해주세요.</p>
              <div class="flex gap-2">
                <a href="#" onclick="downloadTemplate('korean'); return false;" class="text-sm text-korean hover:underline">국어 템플릿</a>
                <a href="#" onclick="downloadTemplate('english'); return false;" class="text-sm text-english hover:underline">영어 템플릿</a>
                <a href="#" onclick="downloadTemplate('math'); return false;" class="text-sm hover:underline" style="color: #9A7B0A;">수학 템플릿</a>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 옵션 -->
        <div class="space-y-3 mb-6">
          <label class="flex items-center gap-3 cursor-pointer">
            <input type="checkbox" checked class="w-5 h-5 rounded border-border-light text-super focus:ring-super/20">
            <span class="text-sm">업로드 후 자동 AI 처리 시작</span>
          </label>
          <label class="flex items-center gap-3 cursor-pointer">
            <input type="checkbox" class="w-5 h-5 rounded border-border-light text-super focus:ring-super/20">
            <span class="text-sm">중복 콘텐츠 덮어쓰기</span>
          </label>
        </div>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-end gap-3">
        <button onclick="closeUploadModal()" class="px-6 py-2 border border-border-light rounded-xl hover:bg-gray-50">
          취소
        </button>
        <button onclick="startUpload()" class="px-6 py-2 gradient-super text-white rounded-xl hover:opacity-90 flex items-center gap-2">
          <span class="material-icons-round text-sm">cloud_upload</span>
          업로드
        </button>
      </div>
    </div>
  </div>
  
  <!-- 콘텐츠 검수 모달 -->
  <div id="reviewModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeReviewModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-border-light flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div id="reviewSubjectIcon" class="w-10 h-10 rounded-xl bg-korean-light flex items-center justify-center">
            <span class="material-icons-round text-korean">menu_book</span>
          </div>
          <div>
            <h2 class="text-lg font-bold text-navy">콘텐츠 검수</h2>
            <p class="text-sm text-text-secondary" id="reviewContentInfo">KOR-244 · 인공지능의 미래와 윤리</p>
          </div>
        </div>
        <button onclick="closeReviewModal()" class="p-2 hover:bg-gray-100 rounded-lg">
          <span class="material-icons-round">close</span>
        </button>
      </div>
      
      <div class="flex flex-col lg:flex-row max-h-[70vh]">
        <!-- 왼쪽: 원본 콘텐츠 (동적) -->
        <div id="reviewContentArea" class="flex-1 p-6 border-r border-border-light overflow-y-auto">
          <!-- 국어 검수 콘텐츠 (기본) -->
          <div id="reviewKorean">
            <h3 class="font-bold text-navy mb-3">원본 지문</h3>
            <div class="bg-gray-50 rounded-xl p-4 text-sm leading-relaxed mb-6">
              인공지능 기술이 발전하면서 우리 사회의 많은 부분이 변화하고 있다. 
              자율주행 자동차, 의료 진단 시스템, 금융 서비스 등 다양한 분야에서 
              인공지능이 활용되고 있으며, 이는 우리 삶의 편의성을 크게 향상시키고 있다...
            </div>
            
            <h3 class="font-bold text-navy mb-3">AI 생성 O/X 퀴즈</h3>
            <div class="space-y-3">
              <div class="bg-white border border-border-light rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-6 h-6 rounded-full bg-korean-light flex items-center justify-center text-korean text-sm font-bold">1</span>
                  <div class="flex-1">
                    <p class="text-sm mb-2">인공지능 기술은 자율주행 자동차에만 활용되고 있다.</p>
                    <div class="flex gap-2">
                      <span class="px-3 py-1 bg-error-light text-error text-xs rounded-lg font-medium">정답: X</span>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white border border-border-light rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-6 h-6 rounded-full bg-korean-light flex items-center justify-center text-korean text-sm font-bold">2</span>
                  <div class="flex-1">
                    <p class="text-sm mb-2">인공지능은 우리 삶의 편의성을 향상시키고 있다.</p>
                    <div class="flex gap-2">
                      <span class="px-3 py-1 bg-success-light text-success text-xs rounded-lg font-medium">정답: O</span>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white border border-border-light rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-6 h-6 rounded-full bg-korean-light flex items-center justify-center text-korean text-sm font-bold">3</span>
                  <div class="flex-1">
                    <p class="text-sm mb-2">인공지능의 발전으로 인해 윤리적 문제가 제기되고 있다.</p>
                    <div class="flex gap-2">
                      <span class="px-3 py-1 bg-success-light text-success text-xs rounded-lg font-medium">정답: O</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <h3 class="font-bold text-navy mb-3 mt-6">AI 생성 요약 카드</h3>
            <div class="bg-success-light rounded-xl p-4">
              <p class="text-sm font-medium text-success mb-2">핵심 요약</p>
              <p class="text-sm text-text-primary">인공지능 기술의 발전으로 다양한 분야에서 편의성이 향상되고 있으나, 동시에 윤리적 문제가 제기되고 있다.</p>
            </div>
          </div>
          
          <!-- 영어 검수 콘텐츠 -->
          <div id="reviewEnglish" class="hidden">
            <h3 class="font-bold text-navy mb-3">단어 정보</h3>
            <div class="bg-english-light rounded-xl p-5 mb-6">
              <div class="flex items-center gap-4 mb-3">
                <p class="text-2xl font-bold text-english" id="reviewEngWord">serendipity</p>
                <span class="px-3 py-1 bg-error-light text-error text-xs rounded-lg font-medium">고급</span>
              </div>
              <p class="text-lg text-text-secondary mb-2" id="reviewEngPronun">/ˌserənˈdɪpɪti/</p>
              <p class="text-text-primary font-medium" id="reviewEngMeaning">우연한 발견, 뜻밖의 행운</p>
            </div>
            
            <h3 class="font-bold text-navy mb-3">AI 생성 예문 (마커 처리)</h3>
            <div class="space-y-3">
              <div class="bg-white border border-border-light rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-6 h-6 rounded-full bg-english-light flex items-center justify-center text-english text-sm font-bold">1</span>
                  <div class="flex-1">
                    <p class="text-sm mb-2">Finding that rare book was pure <span class="px-1.5 py-0.5 bg-english text-white rounded font-medium">**serendipity**</span>.</p>
                    <p class="text-xs text-text-tertiary">그 희귀한 책을 찾은 것은 순전히 우연의 행운이었다.</p>
                  </div>
                </div>
              </div>
              
              <div class="bg-white border border-border-light rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-6 h-6 rounded-full bg-english-light flex items-center justify-center text-english text-sm font-bold">2</span>
                  <div class="flex-1">
                    <p class="text-sm mb-2">The discovery of penicillin was a classic case of <span class="px-1.5 py-0.5 bg-english text-white rounded font-medium">**serendipity**</span>.</p>
                    <p class="text-xs text-text-tertiary">페니실린의 발견은 전형적인 우연한 발견의 사례였다.</p>
                  </div>
                </div>
              </div>
              
              <div class="bg-white border border-border-light rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-6 h-6 rounded-full bg-english-light flex items-center justify-center text-english text-sm font-bold">3</span>
                  <div class="flex-1">
                    <p class="text-sm mb-2">By <span class="px-1.5 py-0.5 bg-english text-white rounded font-medium">**serendipity**</span>, I met my best friend on that trip.</p>
                    <p class="text-xs text-text-tertiary">우연히도, 나는 그 여행에서 가장 친한 친구를 만났다.</p>
                  </div>
                </div>
              </div>
            </div>
            
            <h3 class="font-bold text-navy mb-3 mt-6">7초 발화 테스트 미리보기</h3>
            <div class="bg-gray-50 rounded-xl p-4 flex items-center justify-between">
              <div class="flex items-center gap-3">
                <button onclick="playPronunciation()" class="w-12 h-12 rounded-full bg-english flex items-center justify-center hover:bg-english/90">
                  <span class="material-icons-round text-white text-2xl">play_arrow</span>
                </button>
                <div>
                  <p class="font-medium text-navy">발음 듣기</p>
                  <p class="text-xs text-text-tertiary">TTS 생성 음성</p>
                </div>
              </div>
              <div class="text-right">
                <p class="text-sm text-text-secondary">예상 난이도</p>
                <p class="font-bold text-error">어려움</p>
              </div>
            </div>
          </div>
          
          <!-- 수학 검수 콘텐츠 -->
          <div id="reviewMath" class="hidden">
            <h3 class="font-bold text-navy mb-3">문제 원본</h3>
            <div class="bg-math-light rounded-xl p-5 mb-6">
              <p class="text-lg font-medium text-navy mb-2" id="reviewMathProblem">이차방정식 x² - 5x + 6 = 0의 해를 구하시오.</p>
              <div class="flex gap-2 mt-3">
                <span class="px-3 py-1 bg-white text-text-secondary text-xs rounded-lg">중3</span>
                <span class="px-3 py-1 bg-info-light text-info text-xs rounded-lg font-medium">계산</span>
              </div>
            </div>
            
            <h3 class="font-bold text-navy mb-3">AI 생성 단계별 풀이</h3>
            <div class="space-y-3">
              <div class="bg-white border border-border-light rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-8 h-8 rounded-lg flex items-center justify-center text-white text-sm font-bold" style="background: #FBBC05;">1</span>
                  <div class="flex-1">
                    <p class="text-sm font-medium text-navy mb-1">인수분해 가능 여부 확인</p>
                    <p class="text-sm text-text-secondary">두 수를 곱해서 6, 더해서 -5가 되는 조합을 찾습니다.</p>
                    <div class="mt-2 p-2 bg-gray-50 rounded-lg font-mono text-sm">
                      -2 × -3 = 6, -2 + (-3) = -5 ✓
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white border border-border-light rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-8 h-8 rounded-lg flex items-center justify-center text-white text-sm font-bold" style="background: #FBBC05;">2</span>
                  <div class="flex-1">
                    <p class="text-sm font-medium text-navy mb-1">인수분해 실행</p>
                    <p class="text-sm text-text-secondary">이차방정식을 인수분해 형태로 변환합니다.</p>
                    <div class="mt-2 p-2 bg-gray-50 rounded-lg font-mono text-sm">
                      x² - 5x + 6 = (x - 2)(x - 3) = 0
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white border border-border-light rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-8 h-8 rounded-lg flex items-center justify-center text-white text-sm font-bold" style="background: #FBBC05;">3</span>
                  <div class="flex-1">
                    <p class="text-sm font-medium text-navy mb-1">해 구하기</p>
                    <p class="text-sm text-text-secondary">각 인수를 0으로 놓고 x의 값을 구합니다.</p>
                    <div class="mt-2 p-2 bg-gray-50 rounded-lg font-mono text-sm">
                      x - 2 = 0 → x = 2<br>
                      x - 3 = 0 → x = 3
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <h3 class="font-bold text-navy mb-3 mt-6">최종 답안</h3>
            <div class="bg-success-light rounded-xl p-4 flex items-center gap-3">
              <span class="material-icons-round text-success text-2xl">check_circle</span>
              <div>
                <p class="text-sm text-text-secondary">정답</p>
                <p class="text-lg font-bold text-success">x = 2 또는 x = 3</p>
              </div>
            </div>
            
            <h3 class="font-bold text-navy mb-3 mt-6">AI 생성 힌트</h3>
            <div class="space-y-2">
              <div class="bg-info-light rounded-lg p-3 flex items-start gap-2">
                <span class="material-icons-round text-info text-lg">lightbulb</span>
                <p class="text-sm text-info">힌트 1: 상수항 6을 두 수의 곱으로 나타내보세요.</p>
              </div>
              <div class="bg-info-light rounded-lg p-3 flex items-start gap-2">
                <span class="material-icons-round text-info text-lg">lightbulb</span>
                <p class="text-sm text-info">힌트 2: 그 두 수의 합이 -5가 되어야 합니다.</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 오른쪽: 검수 결과 (동적) -->
        <div class="w-full lg:w-96 bg-gray-50 p-6 overflow-y-auto">
          <h3 class="font-bold text-navy mb-4">검수 결과</h3>
          
          <!-- 국어 검수 항목 -->
          <div id="reviewItemsKorean" class="space-y-4 mb-6">
            <div>
              <label class="block text-sm font-medium text-navy mb-2">지문 구조 분석</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('structure', 'good')" class="review-btn-structure-good flex-1 px-4 py-2 bg-success text-white rounded-xl text-sm font-medium">적합</button>
                <button onclick="setReviewItem('structure', 'fix')" class="review-btn-structure-fix flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">수정 필요</button>
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-navy mb-2">O/X 퀴즈 품질</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('quiz', 'good')" class="review-btn-quiz-good flex-1 px-4 py-2 bg-success text-white rounded-xl text-sm font-medium">적합</button>
                <button onclick="setReviewItem('quiz', 'fix')" class="review-btn-quiz-fix flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">수정 필요</button>
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-navy mb-2">요약 카드</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('summary', 'good')" class="review-btn-summary-good flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">적합</button>
                <button onclick="setReviewItem('summary', 'fix')" class="review-btn-summary-fix flex-1 px-4 py-2 bg-warning text-white rounded-xl text-sm font-medium">수정 필요</button>
              </div>
            </div>
          </div>
          
          <!-- 영어 검수 항목 -->
          <div id="reviewItemsEnglish" class="space-y-4 mb-6 hidden">
            <div>
              <label class="block text-sm font-medium text-navy mb-2">단어/뜻/발음 정확성</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('word', 'good')" class="review-btn-word-good flex-1 px-4 py-2 bg-success text-white rounded-xl text-sm font-medium">적합</button>
                <button onclick="setReviewItem('word', 'fix')" class="review-btn-word-fix flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">수정 필요</button>
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-navy mb-2">예문 마커 처리</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('marker', 'good')" class="review-btn-marker-good flex-1 px-4 py-2 bg-success text-white rounded-xl text-sm font-medium">적합</button>
                <button onclick="setReviewItem('marker', 'fix')" class="review-btn-marker-fix flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">수정 필요</button>
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-navy mb-2">예문 번역 품질</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('translation', 'good')" class="review-btn-translation-good flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">적합</button>
                <button onclick="setReviewItem('translation', 'fix')" class="review-btn-translation-fix flex-1 px-4 py-2 bg-warning text-white rounded-xl text-sm font-medium">수정 필요</button>
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-navy mb-2">난이도 적정성</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('difficulty', 'good')" class="review-btn-difficulty-good flex-1 px-4 py-2 bg-success text-white rounded-xl text-sm font-medium">적합</button>
                <button onclick="setReviewItem('difficulty', 'fix')" class="review-btn-difficulty-fix flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">조정 필요</button>
              </div>
            </div>
          </div>
          
          <!-- 수학 검수 항목 -->
          <div id="reviewItemsMath" class="space-y-4 mb-6 hidden">
            <div>
              <label class="block text-sm font-medium text-navy mb-2">문제 표현 정확성</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('problem', 'good')" class="review-btn-problem-good flex-1 px-4 py-2 bg-success text-white rounded-xl text-sm font-medium">적합</button>
                <button onclick="setReviewItem('problem', 'fix')" class="review-btn-problem-fix flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">수정 필요</button>
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-navy mb-2">단계별 풀이 논리</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('steps', 'good')" class="review-btn-steps-good flex-1 px-4 py-2 bg-success text-white rounded-xl text-sm font-medium">적합</button>
                <button onclick="setReviewItem('steps', 'fix')" class="review-btn-steps-fix flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">수정 필요</button>
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-navy mb-2">최종 답안 정확성</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('answer', 'good')" class="review-btn-answer-good flex-1 px-4 py-2 bg-success text-white rounded-xl text-sm font-medium">정확</button>
                <button onclick="setReviewItem('answer', 'fix')" class="review-btn-answer-fix flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">오류</button>
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-navy mb-2">힌트 적절성</label>
              <div class="flex gap-2">
                <button onclick="setReviewItem('hints', 'good')" class="review-btn-hints-good flex-1 px-4 py-2 border border-border-light rounded-xl text-sm hover:bg-gray-50">적합</button>
                <button onclick="setReviewItem('hints', 'fix')" class="review-btn-hints-fix flex-1 px-4 py-2 bg-warning text-white rounded-xl text-sm font-medium">수정 필요</button>
              </div>
            </div>
          </div>
          
          <!-- 검수 메모 -->
          <div class="mb-6">
            <label class="block text-sm font-medium text-navy mb-2">검수 메모</label>
            <textarea id="reviewMemo" class="w-full px-4 py-3 border border-border-light rounded-xl focus:outline-none focus:ring-2 focus:ring-super/20 resize-none h-24" 
                      placeholder="수정이 필요한 내용을 입력하세요..."></textarea>
          </div>
          
          <!-- 최종 판정 -->
          <div>
            <label class="block text-sm font-medium text-navy mb-2">최종 판정</label>
            <div class="grid grid-cols-3 gap-2">
              <button onclick="setFinalDecision('approve')" class="px-4 py-3 border-2 border-success bg-success-light text-success rounded-xl text-sm font-medium flex flex-col items-center gap-1 hover:bg-success hover:text-white transition-colors">
                <span class="material-icons-round">check_circle</span>
                승인
              </button>
              <button onclick="setFinalDecision('reprocess')" class="px-4 py-3 border-2 border-border-light rounded-xl text-sm text-text-secondary flex flex-col items-center gap-1 hover:border-warning hover:bg-warning-light hover:text-warning transition-colors">
                <span class="material-icons-round">replay</span>
                재처리
              </button>
              <button onclick="setFinalDecision('delete')" class="px-4 py-3 border-2 border-border-light rounded-xl text-sm text-text-secondary flex flex-col items-center gap-1 hover:border-error hover:bg-error-light hover:text-error transition-colors">
                <span class="material-icons-round">delete</span>
                삭제
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-between">
        <button onclick="navigateReview('prev')" class="px-4 py-2 text-text-secondary hover:text-navy flex items-center gap-2">
          <span class="material-icons-round text-sm">arrow_back</span>
          이전 콘텐츠
        </button>
        <div class="flex gap-3">
          <button onclick="closeReviewModal()" class="px-6 py-2 border border-border-light rounded-xl hover:bg-gray-50">
            취소
          </button>
          <button onclick="completeReview()" class="px-6 py-2 gradient-super text-white rounded-xl hover:opacity-90">
            검수 완료
          </button>
        </div>
        <button onclick="navigateReview('next')" class="px-4 py-2 text-text-secondary hover:text-navy flex items-center gap-2">
          다음 콘텐츠
          <span class="material-icons-round text-sm">arrow_forward</span>
        </button>
      </div>
    </div>
  </div>
  
  <!-- 콘텐츠 상세/미리보기 모달 -->
  <div id="contentDetailModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeContentDetailModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-border-light flex items-center justify-between sticky top-0 bg-white z-10">
        <div class="flex items-center gap-3">
          <div id="detailSubjectIcon" class="w-10 h-10 rounded-xl bg-korean-light flex items-center justify-center">
            <span class="material-icons-round text-korean">menu_book</span>
          </div>
          <div>
            <h2 class="text-lg font-bold text-navy" id="detailTitle">콘텐츠 상세</h2>
            <p class="text-sm text-text-secondary" id="detailId">KOR-245</p>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <span id="detailAiStatus" class="status-badge bg-success-light text-success">AI 완료</span>
          <span id="detailReviewStatus" class="status-badge bg-gray-200 text-text-secondary">검수 대기</span>
          <button onclick="closeContentDetailModal()" class="p-2 hover:bg-gray-100 rounded-lg ml-2">
            <span class="material-icons-round">close</span>
          </button>
        </div>
      </div>
      
      <div class="p-6">
        <!-- 탭 네비게이션 -->
        <div class="flex border-b border-border-light mb-6">
          <button onclick="switchDetailTab('original')" class="detail-tab-btn px-4 py-3 text-sm font-medium border-b-2 border-super text-super">원본</button>
          <button onclick="switchDetailTab('ai')" class="detail-tab-btn px-4 py-3 text-sm font-medium border-b-2 border-transparent text-text-secondary hover:text-navy">AI 생성</button>
          <button onclick="switchDetailTab('info')" class="detail-tab-btn px-4 py-3 text-sm font-medium border-b-2 border-transparent text-text-secondary hover:text-navy">정보</button>
        </div>
        
        <!-- 원본 콘텐츠 탭 -->
        <div id="detailTab-original" class="detail-tab-content">
          <div class="bg-gray-50 rounded-xl p-6">
            <h3 class="font-bold text-navy mb-4">지문 원본</h3>
            <div id="originalContent" class="prose max-w-none text-text-primary leading-relaxed">
              인공지능(AI) 기술의 발전은 우리 사회에 혁명적인 변화를 가져오고 있다. 자율주행 자동차, 의료 진단 시스템, 금융 알고리즘 등 다양한 분야에서 AI가 활용되면서 인간의 삶은 점점 더 편리해지고 있다.
              <br/><br/>
              그러나 이러한 발전에는 윤리적 문제가 뒤따른다. AI가 내린 결정이 편향되어 있을 경우, 특정 집단에게 불이익을 줄 수 있다. 또한 AI의 판단 과정이 '블랙박스'처럼 불투명하여 그 결정을 이해하거나 설명하기 어려운 문제도 있다.
              <br/><br/>
              전문가들은 AI 윤리 가이드라인의 필요성을 강조한다. EU는 이미 '신뢰할 수 있는 AI를 위한 윤리 지침'을 발표했으며, 한국 역시 관련 법안을 준비하고 있다. 기술의 발전과 함께 인간의 존엄성을 보호하는 것이 우리 시대의 과제다.
            </div>
          </div>
        </div>
        
        <!-- AI 생성 결과 탭 -->
        <div id="detailTab-ai" class="detail-tab-content hidden">
          <!-- 구조 분석 -->
          <div class="mb-6">
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-info">account_tree</span>
              구조 분석
            </h3>
            <div class="bg-info-light rounded-xl p-4">
              <div class="grid grid-cols-3 gap-4 text-sm">
                <div>
                  <p class="text-text-secondary mb-1">서론 (1문단)</p>
                  <p class="font-medium">AI 기술 발전과 사회 변화</p>
                </div>
                <div>
                  <p class="text-text-secondary mb-1">본론 (2문단)</p>
                  <p class="font-medium">AI의 윤리적 문제점</p>
                </div>
                <div>
                  <p class="text-text-secondary mb-1">결론 (3문단)</p>
                  <p class="font-medium">윤리 가이드라인의 필요성</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- O/X 퀴즈 -->
          <div class="mb-6">
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-warning">quiz</span>
              O/X 퀴즈 (5문항)
            </h3>
            <div class="space-y-3">
              <div class="bg-gray-50 rounded-xl p-4 flex items-center justify-between">
                <p class="text-sm">AI 기술은 자율주행 자동차 분야에만 활용되고 있다.</p>
                <span class="status-badge bg-error-light text-error">X</span>
              </div>
              <div class="bg-gray-50 rounded-xl p-4 flex items-center justify-between">
                <p class="text-sm">AI의 판단 과정은 항상 투명하게 공개된다.</p>
                <span class="status-badge bg-error-light text-error">X</span>
              </div>
              <div class="bg-gray-50 rounded-xl p-4 flex items-center justify-between">
                <p class="text-sm">EU는 AI 윤리 지침을 발표한 바 있다.</p>
                <span class="status-badge bg-success-light text-success">O</span>
              </div>
            </div>
          </div>
          
          <!-- 요약 카드 -->
          <div>
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-success">summarize</span>
              요약 카드
            </h3>
            <div class="bg-success-light rounded-xl p-4">
              <p class="text-sm text-success font-medium mb-2">핵심 요약</p>
              <p class="text-text-primary">AI 기술의 발전은 사회에 편리함을 주지만, 편향성과 불투명성 등 윤리적 문제가 발생하며, 이에 따라 EU와 한국 등에서 윤리 가이드라인을 마련하고 있다.</p>
            </div>
          </div>
        </div>
        
        <!-- 정보 탭 -->
        <div id="detailTab-info" class="detail-tab-content hidden">
          <div class="grid grid-cols-2 gap-4">
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">콘텐츠 ID</p>
              <p class="font-mono font-medium">KOR-244</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">유형</p>
              <p class="font-medium">비문학 (논설)</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">대상 학년</p>
              <p class="font-medium">중등 1-3</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">난이도</p>
              <p class="font-medium">중</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">등록일</p>
              <p class="font-medium">2025.01.07</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">AI 처리</p>
              <p class="font-medium text-success">완료 (2025.01.07 14:32)</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">글자 수</p>
              <p class="font-medium">423자</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">예상 학습 시간</p>
              <p class="font-medium">8분</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-between">
        <button onclick="editContent()" class="px-4 py-2 border border-border-light rounded-xl hover:bg-gray-50 flex items-center gap-2">
          <span class="material-icons-round text-sm">edit</span>
          수정
        </button>
        <div class="flex gap-3">
          <button onclick="reprocessAI()" class="px-4 py-2 border border-warning text-warning rounded-xl hover:bg-warning-light flex items-center gap-2">
            <span class="material-icons-round text-sm">replay</span>
            AI 재처리
          </button>
          <button onclick="openReviewFromDetail()" class="px-6 py-2 gradient-super text-white rounded-xl hover:opacity-90 flex items-center gap-2">
            <span class="material-icons-round text-sm">fact_check</span>
            검수하기
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- AI 재처리 확인 모달 -->
  <div id="reprocessModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeReprocessModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-md overflow-hidden" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-warning bg-warning-light flex items-center gap-3">
        <span class="material-icons-round text-warning text-2xl">replay</span>
        <h2 class="text-lg font-bold text-warning">AI 재처리</h2>
      </div>
      
      <div class="p-6">
        <p class="text-text-primary mb-4">선택한 콘텐츠의 AI 생성 결과를 다시 처리하시겠습니까?</p>
        
        <div class="bg-gray-50 rounded-xl p-4 mb-4">
          <p class="text-sm text-text-secondary mb-2">재처리 대상</p>
          <p class="font-medium" id="reprocessTarget">KOR-244 - 인공지능의 미래와 윤리</p>
        </div>
        
        <div class="space-y-2 mb-4">
          <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer">
            <input type="checkbox" checked class="accent-warning">
            <span class="text-sm">구조 분석</span>
          </label>
          <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer">
            <input type="checkbox" checked class="accent-warning">
            <span class="text-sm">O/X 퀴즈 생성</span>
          </label>
          <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer">
            <input type="checkbox" checked class="accent-warning">
            <span class="text-sm">요약 카드 생성</span>
          </label>
        </div>
        
        <div class="bg-info-light rounded-xl p-3 text-sm text-info flex items-start gap-2">
          <span class="material-icons-round text-lg">info</span>
          <span>재처리 시 기존 AI 생성 결과가 덮어쓰여집니다. 처리 시간은 약 30초~1분 소요됩니다.</span>
        </div>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-end gap-3">
        <button onclick="closeReprocessModal()" class="px-6 py-2.5 border border-border-light rounded-xl hover:bg-gray-50">
          취소
        </button>
        <button onclick="confirmReprocess()" class="px-6 py-2.5 bg-warning text-white rounded-xl hover:bg-warning/90 flex items-center gap-2">
          <span class="material-icons-round text-sm">replay</span>
          재처리 시작
        </button>
      </div>
    </div>
  </div>
  
  <!-- 삭제 확인 모달 -->
  <div id="deleteContentModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeDeleteContentModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-md overflow-hidden" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-error bg-error-light flex items-center gap-3">
        <span class="material-icons-round text-error text-2xl">delete_forever</span>
        <h2 class="text-lg font-bold text-error">콘텐츠 삭제</h2>
      </div>
      
      <div class="p-6">
        <p class="text-text-primary mb-4">선택한 콘텐츠를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.</p>
        
        <div class="bg-gray-50 rounded-xl p-4 mb-4">
          <p class="text-sm text-text-secondary mb-2">삭제 대상</p>
          <p class="font-medium" id="deleteTarget">KOR-244 - 인공지능의 미래와 윤리</p>
        </div>
        
        <label class="flex items-start gap-3 p-4 bg-error-light rounded-xl cursor-pointer">
          <input type="checkbox" id="deleteConfirmCheck" class="mt-0.5 accent-error" onchange="checkDeleteContentForm()">
          <span class="text-sm text-error">삭제에 동의하며, 이 작업은 되돌릴 수 없음을 이해합니다.</span>
        </label>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-end gap-3">
        <button onclick="closeDeleteContentModal()" class="px-6 py-2.5 border border-border-light rounded-xl hover:bg-gray-50">
          취소
        </button>
        <button id="confirmDeleteContentBtn" onclick="confirmDeleteContent()" class="px-6 py-2.5 bg-error text-white rounded-xl hover:bg-error/90 disabled:opacity-50 flex items-center gap-2" disabled>
          <span class="material-icons-round text-sm">delete</span>
          삭제
        </button>
      </div>
    </div>
  </div>
  
  <!-- 콘텐츠 편집 모달 -->
  <div id="editContentModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeEditContentModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-border-light flex items-center justify-between sticky top-0 bg-white z-10">
        <div class="flex items-center gap-3">
          <div id="editSubjectIcon" class="w-10 h-10 rounded-xl bg-korean-light flex items-center justify-center">
            <span class="material-icons-round text-korean">menu_book</span>
          </div>
          <div>
            <h2 class="text-lg font-bold text-navy">콘텐츠 편집</h2>
            <p class="text-sm text-text-secondary" id="editContentId">KOR-245</p>
          </div>
        </div>
        <button onclick="closeEditContentModal()" class="p-2 hover:bg-gray-100 rounded-lg">
          <span class="material-icons-round">close</span>
        </button>
      </div>
      
      <div class="p-6 space-y-5">
        <!-- 기본 정보 -->
        <div>
          <label class="block text-sm font-medium text-navy mb-2">제목 *</label>
          <input type="text" id="editTitle" class="w-full px-4 py-3 border border-border-light rounded-xl focus:outline-none focus:ring-2 focus:ring-super/20 focus:border-super" placeholder="콘텐츠 제목">
        </div>
        
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-navy mb-2">유형</label>
            <select id="editType" class="w-full px-4 py-3 border border-border-light rounded-xl focus:outline-none text-sm">
              <option value="literature">문학</option>
              <option value="non-literature">비문학</option>
              <option value="poem">시</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-navy mb-2">대상 학년</label>
            <select id="editGrade" class="w-full px-4 py-3 border border-border-light rounded-xl focus:outline-none text-sm">
              <option value="elem34">초등 3-4</option>
              <option value="elem56">초등 5-6</option>
              <option value="mid">중등 1-3</option>
              <option value="high">고등 1-3</option>
            </select>
          </div>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-navy mb-2">내용 *</label>
          <textarea id="editContent" class="w-full px-4 py-3 border border-border-light rounded-xl focus:outline-none focus:ring-2 focus:ring-super/20 resize-none h-40" placeholder="콘텐츠 본문"></textarea>
        </div>
        
        <!-- AI 재생성 옵션 -->
        <div class="bg-info-light rounded-xl p-4">
          <label class="flex items-center gap-3 cursor-pointer">
            <input type="checkbox" id="editRegenAI" class="w-5 h-5 rounded border-border-light text-info focus:ring-info/20">
            <div>
              <span class="font-medium text-sm text-navy">저장 후 AI 콘텐츠 재생성</span>
              <p class="text-xs text-text-secondary">O/X 퀴즈, 요약 카드, 구조 분석이 새로 생성됩니다</p>
            </div>
          </label>
        </div>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-between sticky bottom-0 bg-white">
        <button onclick="previewEditContent()" class="px-4 py-2 border border-border-light rounded-xl hover:bg-gray-50 flex items-center gap-2">
          <span class="material-icons-round text-sm">preview</span>
          미리보기
        </button>
        <div class="flex gap-3">
          <button onclick="closeEditContentModal()" class="px-6 py-2 border border-border-light rounded-xl hover:bg-gray-50">
            취소
          </button>
          <button onclick="saveEditContent()" class="px-6 py-2 gradient-super text-white rounded-xl hover:opacity-90 flex items-center gap-2">
            <span class="material-icons-round text-sm">save</span>
            저장
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- AI 처리 진행 모달 -->
  <div id="aiProgressModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeAiProgressModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-md overflow-hidden" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-info bg-info-light flex items-center justify-between">
        <h2 class="text-lg font-bold text-info flex items-center gap-2">
          <span class="material-icons-round spin">sync</span>
          AI 처리 현황
        </h2>
        <button onclick="closeAiProgressModal()" class="p-2 hover:bg-white/50 rounded-lg">
          <span class="material-icons-round text-info">close</span>
        </button>
      </div>
      
      <div class="p-6">
        <div class="text-center mb-6">
          <div class="w-16 h-16 rounded-full bg-info-light flex items-center justify-center mx-auto mb-3">
            <span class="material-icons-round text-info text-3xl spin">autorenew</span>
          </div>
          <p class="font-bold text-navy" id="aiProgressTitle">ENG-1201~1210</p>
          <p class="text-sm text-text-secondary" id="aiProgressDesc">영어 단어 마커 처리</p>
        </div>
        
        <!-- 진행 상태 -->
        <div class="space-y-4">
          <div>
            <div class="flex justify-between text-sm mb-2">
              <span class="text-text-secondary">전체 진행률</span>
              <span class="font-bold text-info" id="aiProgressPercent">60%</span>
            </div>
            <div class="w-full h-3 bg-gray-200 rounded-full">
              <div id="aiProgressBar" class="h-full bg-info rounded-full transition-all" style="width: 60%"></div>
            </div>
          </div>
          
          <div class="bg-gray-50 rounded-xl p-4 space-y-3">
            <div class="flex items-center gap-3">
              <span class="material-icons-round text-success text-lg">check_circle</span>
              <span class="text-sm">데이터 검증 완료</span>
            </div>
            <div class="flex items-center gap-3">
              <span class="material-icons-round text-success text-lg">check_circle</span>
              <span class="text-sm">예문 추출 완료</span>
            </div>
            <div class="flex items-center gap-3">
              <span class="material-icons-round text-info text-lg spin">sync</span>
              <span class="text-sm text-info font-medium">마커 처리 진행 중...</span>
            </div>
            <div class="flex items-center gap-3">
              <span class="material-icons-round text-text-tertiary text-lg">radio_button_unchecked</span>
              <span class="text-sm text-text-tertiary">최종 검증 대기</span>
            </div>
          </div>
          
          <div class="flex items-center gap-2 text-sm text-text-secondary">
            <span class="material-icons-round text-lg">schedule</span>
            <span>예상 남은 시간: <span class="font-medium">약 2분</span></span>
          </div>
        </div>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-between">
        <button onclick="cancelAiProcess()" class="px-4 py-2 border border-error text-error rounded-xl hover:bg-error-light flex items-center gap-2">
          <span class="material-icons-round text-sm">cancel</span>
          처리 취소
        </button>
        <button onclick="closeAiProgressModal()" class="px-6 py-2 border border-border-light rounded-xl hover:bg-gray-50">
          닫기
        </button>
      </div>
    </div>
  </div>
  
  <!-- AI 실패 상세 모달 -->
  <div id="aiFailureModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeAiFailureModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-md overflow-hidden" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-error bg-error-light flex items-center justify-between">
        <h2 class="text-lg font-bold text-error flex items-center gap-2">
          <span class="material-icons-round">error_outline</span>
          AI 처리 실패
        </h2>
        <button onclick="closeAiFailureModal()" class="p-2 hover:bg-white/50 rounded-lg">
          <span class="material-icons-round text-error">close</span>
        </button>
      </div>
      
      <div class="p-6">
        <div class="text-center mb-6">
          <div class="w-16 h-16 rounded-full bg-error-light flex items-center justify-center mx-auto mb-3">
            <span class="material-icons-round text-error text-3xl">warning</span>
          </div>
          <p class="font-bold text-navy" id="aiFailureId">MATH-878</p>
          <p class="text-sm text-text-secondary" id="aiFailureTitle">적분</p>
        </div>
        
        <!-- 오류 정보 -->
        <div class="bg-error-light rounded-xl p-4 mb-4">
          <p class="text-sm font-medium text-error mb-1">오류 메시지</p>
          <p class="text-sm text-text-primary" id="aiFailureReason">LaTeX 파싱 오류: 수식 구문이 올바르지 않습니다.</p>
        </div>
        
        <div class="bg-gray-50 rounded-xl p-4 mb-4">
          <p class="text-sm font-medium text-navy mb-2">상세 정보</p>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-text-secondary">시도 횟수</span>
              <span class="font-medium">3회</span>
            </div>
            <div class="flex justify-between">
              <span class="text-text-secondary">마지막 시도</span>
              <span class="font-medium">2025.01.08 14:32</span>
            </div>
            <div class="flex justify-between">
              <span class="text-text-secondary">실패 단계</span>
              <span class="font-medium text-error">수식 파싱</span>
            </div>
          </div>
        </div>
        
        <!-- 해결 방법 -->
        <div class="bg-info-light rounded-xl p-4">
          <p class="text-sm font-medium text-info mb-2 flex items-center gap-2">
            <span class="material-icons-round text-lg">lightbulb</span>
            권장 해결 방법
          </p>
          <ul class="text-sm text-text-secondary space-y-1">
            <li>• 수식의 LaTeX 구문을 확인하세요</li>
            <li>• 특수 기호 이스케이프 처리 확인</li>
            <li>• 원본 콘텐츠를 수정 후 재시도</li>
          </ul>
        </div>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-end gap-3">
        <button onclick="openEditFromFailure()" class="px-4 py-2 border border-border-light rounded-xl hover:bg-gray-50 flex items-center gap-2">
          <span class="material-icons-round text-sm">edit</span>
          콘텐츠 수정
        </button>
        <button onclick="retryFromFailureModal()" class="px-6 py-2 bg-error text-white rounded-xl hover:bg-error/90 flex items-center gap-2">
          <span class="material-icons-round text-sm">refresh</span>
          재시도
        </button>
      </div>
    </div>
  </div>
  
  <!-- 콘텐츠 내보내기 모달 -->
  <div id="exportModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeExportModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-lg overflow-hidden" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-super bg-super-light flex items-center justify-between">
        <h2 class="text-lg font-bold text-super flex items-center gap-2">
          <span class="material-icons-round">download</span>
          콘텐츠 내보내기
        </h2>
        <button onclick="closeExportModal()" class="p-2 hover:bg-white/50 rounded-lg">
          <span class="material-icons-round text-super">close</span>
        </button>
      </div>
      
      <div class="p-6 space-y-5">
        <!-- 과목 선택 -->
        <div>
          <label class="block text-sm font-medium text-navy mb-3">내보낼 과목</label>
          <div class="grid grid-cols-3 gap-3">
            <label class="flex items-center justify-center gap-2 p-3 border-2 border-korean bg-korean-light rounded-xl cursor-pointer">
              <input type="checkbox" name="exportSubject" value="korean" class="accent-korean" checked>
              <span class="text-sm font-medium text-korean">국어</span>
            </label>
            <label class="flex items-center justify-center gap-2 p-3 border-2 border-border-light rounded-xl cursor-pointer hover:border-english hover:bg-english-light">
              <input type="checkbox" name="exportSubject" value="english" class="accent-english">
              <span class="text-sm font-medium text-text-secondary">영어</span>
            </label>
            <label class="flex items-center justify-center gap-2 p-3 border-2 border-border-light rounded-xl cursor-pointer hover:border-math hover:bg-math-light">
              <input type="checkbox" name="exportSubject" value="math" class="accent-yellow-500">
              <span class="text-sm font-medium text-text-secondary">수학</span>
            </label>
          </div>
        </div>
        
        <!-- 상태 필터 -->
        <div>
          <label class="block text-sm font-medium text-navy mb-3">콘텐츠 상태</label>
          <div class="flex flex-wrap gap-2">
            <label class="flex items-center gap-2 px-3 py-2 border border-border-light rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" name="exportStatus" value="approved" class="accent-super" checked>
              <span class="text-sm">승인됨</span>
            </label>
            <label class="flex items-center gap-2 px-3 py-2 border border-border-light rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" name="exportStatus" value="pending" class="accent-super">
              <span class="text-sm">검수 대기</span>
            </label>
            <label class="flex items-center gap-2 px-3 py-2 border border-border-light rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" name="exportStatus" value="processing" class="accent-super">
              <span class="text-sm">처리 중</span>
            </label>
          </div>
        </div>
        
        <!-- 파일 형식 -->
        <div>
          <label class="block text-sm font-medium text-navy mb-3">파일 형식</label>
          <div class="grid grid-cols-3 gap-3">
            <label class="export-format-btn flex flex-col items-center gap-2 p-4 border-2 border-super bg-super-light rounded-xl cursor-pointer">
              <input type="radio" name="exportFormat" value="csv" class="hidden" checked>
              <span class="material-icons-round text-super text-2xl">description</span>
              <span class="text-sm font-medium text-super">CSV</span>
            </label>
            <label class="export-format-btn flex flex-col items-center gap-2 p-4 border-2 border-border-light rounded-xl cursor-pointer hover:border-super hover:bg-super-light">
              <input type="radio" name="exportFormat" value="excel" class="hidden">
              <span class="material-icons-round text-text-secondary text-2xl">table_chart</span>
              <span class="text-sm font-medium text-text-secondary">Excel</span>
            </label>
            <label class="export-format-btn flex flex-col items-center gap-2 p-4 border-2 border-border-light rounded-xl cursor-pointer hover:border-super hover:bg-super-light">
              <input type="radio" name="exportFormat" value="json" class="hidden">
              <span class="material-icons-round text-text-secondary text-2xl">data_object</span>
              <span class="text-sm font-medium text-text-secondary">JSON</span>
            </label>
          </div>
        </div>
        
        <!-- AI 데이터 포함 -->
        <label class="flex items-center gap-3 p-4 bg-gray-50 rounded-xl cursor-pointer">
          <input type="checkbox" id="exportIncludeAI" class="w-5 h-5 rounded border-border-light text-super focus:ring-super/20" checked>
          <div>
            <span class="font-medium text-sm text-navy">AI 생성 데이터 포함</span>
            <p class="text-xs text-text-secondary">O/X 퀴즈, 요약 카드, 마커 데이터 등</p>
          </div>
        </label>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-between items-center">
        <p class="text-sm text-text-secondary">예상 파일 크기: <span class="font-medium">약 2.4MB</span></p>
        <div class="flex gap-3">
          <button onclick="closeExportModal()" class="px-6 py-2 border border-border-light rounded-xl hover:bg-gray-50">
            취소
          </button>
          <button onclick="downloadExport()" class="px-6 py-2 gradient-super text-white rounded-xl hover:opacity-90 flex items-center gap-2">
            <span class="material-icons-round text-sm">download</span>
            내보내기
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 일괄 검수 모달 -->
  <div id="bulkReviewModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeBulkReviewModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-planner bg-planner-light flex items-center justify-between sticky top-0 z-10">
        <h2 class="text-lg font-bold text-planner flex items-center gap-2">
          <span class="material-icons-round">checklist</span>
          일괄 검수
        </h2>
        <div class="flex items-center gap-2">
          <span class="px-3 py-1 bg-planner text-white text-sm font-medium rounded-full">8건 대기</span>
          <button onclick="closeBulkReviewModal()" class="p-2 hover:bg-white/50 rounded-lg">
            <span class="material-icons-round text-planner">close</span>
          </button>
        </div>
      </div>
      
      <div class="p-6">
        <!-- 필터 -->
        <div class="flex flex-wrap gap-3 mb-4">
          <button onclick="filterBulkReview('all')" class="bulk-review-filter px-4 py-2 bg-planner text-white rounded-lg text-sm font-medium" data-filter="all">전체 (8)</button>
          <button onclick="filterBulkReview('korean')" class="bulk-review-filter px-4 py-2 border border-border-light rounded-lg text-sm hover:bg-gray-50" data-filter="korean">국어 (4)</button>
          <button onclick="filterBulkReview('english')" class="bulk-review-filter px-4 py-2 border border-border-light rounded-lg text-sm hover:bg-gray-50" data-filter="english">영어 (2)</button>
          <button onclick="filterBulkReview('math')" class="bulk-review-filter px-4 py-2 border border-border-light rounded-lg text-sm hover:bg-gray-50" data-filter="math">수학 (2)</button>
        </div>
        
        <!-- 콘텐츠 목록 -->
        <div class="space-y-3">
          <!-- 국어 검수 대기 -->
          <div class="flex items-center gap-3 p-4 border border-border-light rounded-xl hover:border-planner transition-colors" data-subject="korean">
            <input type="checkbox" class="w-5 h-5 rounded border-border-light text-planner focus:ring-planner/20" checked>
            <div class="w-10 h-10 rounded-lg bg-korean-light flex items-center justify-center">
              <span class="material-icons-round text-korean">menu_book</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-navy truncate">KOR-244 · 인공지능의 미래와 윤리</p>
              <p class="text-xs text-text-tertiary">O/X 퀴즈 검수 필요</p>
            </div>
            <button onclick="quickReviewApprove('KOR-244')" class="px-3 py-1.5 bg-success text-white text-xs rounded-lg hover:bg-success/90">승인</button>
            <button onclick="openReviewModal('KOR-244', '인공지능의 미래와 윤리')" class="px-3 py-1.5 border border-border-light text-xs rounded-lg hover:bg-gray-50">상세</button>
          </div>
          
          <div class="flex items-center gap-3 p-4 border border-border-light rounded-xl hover:border-planner transition-colors" data-subject="korean">
            <input type="checkbox" class="w-5 h-5 rounded border-border-light text-planner focus:ring-planner/20" checked>
            <div class="w-10 h-10 rounded-lg bg-korean-light flex items-center justify-center">
              <span class="material-icons-round text-korean">menu_book</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-navy truncate">KOR-241 · 환경 보호의 중요성</p>
              <p class="text-xs text-text-tertiary">요약 카드 검수 필요</p>
            </div>
            <button onclick="quickReviewApprove('KOR-241')" class="px-3 py-1.5 bg-success text-white text-xs rounded-lg hover:bg-success/90">승인</button>
            <button onclick="openReviewModal('KOR-241', '환경 보호의 중요성')" class="px-3 py-1.5 border border-border-light text-xs rounded-lg hover:bg-gray-50">상세</button>
          </div>
          
          <!-- 영어 검수 대기 -->
          <div class="flex items-center gap-3 p-4 border border-border-light rounded-xl hover:border-planner transition-colors" data-subject="english">
            <input type="checkbox" class="w-5 h-5 rounded border-border-light text-planner focus:ring-planner/20" checked>
            <div class="w-10 h-10 rounded-lg bg-english-light flex items-center justify-center">
              <span class="material-icons-round text-english">translate</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-navy truncate">ENG-1195 · perseverance (인내)</p>
              <p class="text-xs text-text-tertiary">마커 처리 및 예문 검수 필요</p>
            </div>
            <button onclick="quickReviewApprove('ENG-1195')" class="px-3 py-1.5 bg-success text-white text-xs rounded-lg hover:bg-success/90">승인</button>
            <button onclick="openReviewModal('ENG-1195', 'perseverance')" class="px-3 py-1.5 border border-border-light text-xs rounded-lg hover:bg-gray-50">상세</button>
          </div>
          
          <div class="flex items-center gap-3 p-4 border border-border-light rounded-xl hover:border-planner transition-colors" data-subject="english">
            <input type="checkbox" class="w-5 h-5 rounded border-border-light text-planner focus:ring-planner/20">
            <div class="w-10 h-10 rounded-lg bg-english-light flex items-center justify-center">
              <span class="material-icons-round text-english">translate</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-navy truncate">ENG-1192 · meticulous (꼼꼼한)</p>
              <p class="text-xs text-text-tertiary">난이도 재검토 필요</p>
            </div>
            <button onclick="quickReviewApprove('ENG-1192')" class="px-3 py-1.5 bg-success text-white text-xs rounded-lg hover:bg-success/90">승인</button>
            <button onclick="openReviewModal('ENG-1192', 'meticulous')" class="px-3 py-1.5 border border-border-light text-xs rounded-lg hover:bg-gray-50">상세</button>
          </div>
          
          <!-- 수학 검수 대기 -->
          <div class="flex items-center gap-3 p-4 border border-border-light rounded-xl hover:border-planner transition-colors" data-subject="math">
            <input type="checkbox" class="w-5 h-5 rounded border-border-light text-planner focus:ring-planner/20" checked>
            <div class="w-10 h-10 rounded-lg bg-math-light flex items-center justify-center">
              <span class="material-icons-round" style="color: #9A7B0A;">calculate</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-navy truncate">MATH-877 · 피타고라스 정리</p>
              <p class="text-xs text-text-tertiary">단계별 풀이 검수 필요</p>
            </div>
            <button onclick="quickReviewApprove('MATH-877')" class="px-3 py-1.5 bg-success text-white text-xs rounded-lg hover:bg-success/90">승인</button>
            <button onclick="openReviewModal('MATH-877', '피타고라스 정리')" class="px-3 py-1.5 border border-border-light text-xs rounded-lg hover:bg-gray-50">상세</button>
          </div>
          
          <div class="flex items-center gap-3 p-4 border border-border-light rounded-xl hover:border-planner transition-colors" data-subject="math">
            <input type="checkbox" class="w-5 h-5 rounded border-border-light text-planner focus:ring-planner/20">
            <div class="w-10 h-10 rounded-lg bg-math-light flex items-center justify-center">
              <span class="material-icons-round" style="color: #9A7B0A;">calculate</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-navy truncate">MATH-885 · 연립방정식</p>
              <p class="text-xs text-text-tertiary">힌트 적절성 검수 필요</p>
            </div>
            <button onclick="quickReviewApprove('MATH-885')" class="px-3 py-1.5 bg-success text-white text-xs rounded-lg hover:bg-success/90">승인</button>
            <button onclick="openReviewModal('MATH-885', '연립방정식')" class="px-3 py-1.5 border border-border-light text-xs rounded-lg hover:bg-gray-50">상세</button>
          </div>
          
          <!-- 추가 국어 검수 대기 -->
          <div class="flex items-center gap-3 p-4 border border-border-light rounded-xl hover:border-planner transition-colors" data-subject="korean">
            <input type="checkbox" class="w-5 h-5 rounded border-border-light text-planner focus:ring-planner/20">
            <div class="w-10 h-10 rounded-lg bg-korean-light flex items-center justify-center">
              <span class="material-icons-round text-korean">menu_book</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-navy truncate">KOR-238 · 현대 사회와 기술</p>
              <p class="text-xs text-text-tertiary">구조 분석 검수 필요</p>
            </div>
            <button onclick="quickReviewApprove('KOR-238')" class="px-3 py-1.5 bg-success text-white text-xs rounded-lg hover:bg-success/90">승인</button>
            <button onclick="openReviewModal('KOR-238', '현대 사회와 기술')" class="px-3 py-1.5 border border-border-light text-xs rounded-lg hover:bg-gray-50">상세</button>
          </div>
          
          <div class="flex items-center gap-3 p-4 border border-border-light rounded-xl hover:border-planner transition-colors" data-subject="korean">
            <input type="checkbox" class="w-5 h-5 rounded border-border-light text-planner focus:ring-planner/20">
            <div class="w-10 h-10 rounded-lg bg-korean-light flex items-center justify-center">
              <span class="material-icons-round text-korean">menu_book</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-navy truncate">KOR-235 · 고전 문학의 이해</p>
              <p class="text-xs text-text-tertiary">O/X 퀴즈 정답 확인 필요</p>
            </div>
            <button onclick="quickReviewApprove('KOR-235')" class="px-3 py-1.5 bg-success text-white text-xs rounded-lg hover:bg-success/90">승인</button>
            <button onclick="openReviewModal('KOR-235', '고전 문학의 이해')" class="px-3 py-1.5 border border-border-light text-xs rounded-lg hover:bg-gray-50">상세</button>
          </div>
        </div>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-between sticky bottom-0 bg-white">
        <div class="flex items-center gap-2">
          <input type="checkbox" id="bulkSelectAll" class="w-5 h-5 rounded border-border-light text-planner" onchange="toggleBulkSelectAll()">
          <label for="bulkSelectAll" class="text-sm cursor-pointer">전체 선택</label>
        </div>
        <div class="flex gap-3">
          <button onclick="bulkReviewReject()" class="px-4 py-2 border border-error text-error rounded-xl hover:bg-error-light flex items-center gap-2">
            <span class="material-icons-round text-sm">close</span>
            선택 반려
          </button>
          <button onclick="bulkReviewApprove()" class="px-6 py-2 bg-success text-white rounded-xl hover:bg-success/90 flex items-center gap-2">
            <span class="material-icons-round text-sm">check</span>
            선택 승인
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 일괄 AI 재처리 모달 -->
  <div id="bulkReprocessModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeBulkReprocessModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-lg overflow-hidden" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-warning bg-warning-light flex items-center justify-between">
        <h2 class="text-lg font-bold text-warning flex items-center gap-2">
          <span class="material-icons-round">replay</span>
          일괄 AI 재처리
        </h2>
        <button onclick="closeBulkReprocessModal()" class="p-2 hover:bg-white/50 rounded-lg">
          <span class="material-icons-round text-warning">close</span>
        </button>
      </div>
      
      <div class="p-6 space-y-5">
        <!-- 대상 선택 -->
        <div>
          <label class="block text-sm font-medium text-navy mb-3">재처리 대상</label>
          <div class="space-y-2">
            <label class="flex items-center gap-3 p-3 border border-error bg-error-light rounded-xl cursor-pointer">
              <input type="checkbox" name="bulkReprocessTarget" value="failed" class="accent-error" checked>
              <div class="flex-1">
                <span class="font-medium text-sm text-error">실패한 콘텐츠</span>
                <span class="ml-2 px-2 py-0.5 bg-error text-white text-xs rounded-full">2건</span>
              </div>
            </label>
            <label class="flex items-center gap-3 p-3 border border-border-light rounded-xl cursor-pointer hover:border-warning">
              <input type="checkbox" name="bulkReprocessTarget" value="pending" class="accent-warning">
              <div class="flex-1">
                <span class="font-medium text-sm">대기 중 콘텐츠</span>
                <span class="ml-2 px-2 py-0.5 bg-warning text-white text-xs rounded-full">12건</span>
              </div>
            </label>
            <label class="flex items-center gap-3 p-3 border border-border-light rounded-xl cursor-pointer hover:border-warning">
              <input type="checkbox" name="bulkReprocessTarget" value="completed" class="accent-warning">
              <div class="flex-1">
                <span class="font-medium text-sm">완료된 콘텐츠 (전체 재생성)</span>
                <span class="ml-2 px-2 py-0.5 bg-gray-200 text-text-secondary text-xs rounded-full">2,321건</span>
              </div>
            </label>
          </div>
        </div>
        
        <!-- 과목 필터 -->
        <div>
          <label class="block text-sm font-medium text-navy mb-3">과목 필터</label>
          <div class="flex gap-2">
            <label class="flex items-center gap-2 px-3 py-2 border border-border-light rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" name="bulkReprocessSubject" value="korean" class="accent-korean" checked>
              <span class="text-sm">국어</span>
            </label>
            <label class="flex items-center gap-2 px-3 py-2 border border-border-light rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" name="bulkReprocessSubject" value="english" class="accent-english" checked>
              <span class="text-sm">영어</span>
            </label>
            <label class="flex items-center gap-2 px-3 py-2 border border-border-light rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" name="bulkReprocessSubject" value="math" class="accent-yellow-500" checked>
              <span class="text-sm">수학</span>
            </label>
          </div>
        </div>
        
        <!-- 경고 -->
        <div class="bg-warning-light rounded-xl p-4 text-sm">
          <div class="flex items-start gap-2 text-warning">
            <span class="material-icons-round text-lg">warning</span>
            <div>
              <p class="font-medium mb-1">주의사항</p>
              <ul class="text-text-secondary space-y-1">
                <li>• 재처리 시 기존 AI 생성 결과가 덮어쓰여집니다</li>
                <li>• 대량 처리 시 API 비용이 발생할 수 있습니다</li>
                <li>• 예상 처리 시간: 약 5분</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-end gap-3">
        <button onclick="closeBulkReprocessModal()" class="px-6 py-2 border border-border-light rounded-xl hover:bg-gray-50">
          취소
        </button>
        <button onclick="startBulkReprocess()" class="px-6 py-2 bg-warning text-white rounded-xl hover:bg-warning/90 flex items-center gap-2">
          <span class="material-icons-round text-sm">replay</span>
          재처리 시작
        </button>
      </div>
    </div>
  </div>
  
  <!-- AI 대기열 상세 모달 -->
  <div id="aiQueueModal" class="modal-overlay fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeAiQueueModal()">
    <div class="modal-content bg-white rounded-2xl w-full max-w-md overflow-hidden" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-warning bg-warning-light flex items-center justify-between">
        <h2 class="text-lg font-bold text-warning flex items-center gap-2">
          <span class="material-icons-round">schedule</span>
          AI 처리 대기열
        </h2>
        <button onclick="closeAiQueueModal()" class="p-2 hover:bg-white/50 rounded-lg">
          <span class="material-icons-round text-warning">close</span>
        </button>
      </div>
      
      <div class="p-6">
        <div class="text-center mb-6">
          <div class="w-16 h-16 rounded-full bg-warning-light flex items-center justify-center mx-auto mb-3">
            <span class="material-icons-round text-warning text-3xl">pending</span>
          </div>
          <p class="font-bold text-navy" id="queueTitle">KOR-246~250</p>
          <p class="text-sm text-text-secondary">구조 분석 대기</p>
        </div>
        
        <div class="bg-gray-50 rounded-xl p-4 mb-4">
          <div class="space-y-3 text-sm">
            <div class="flex justify-between">
              <span class="text-text-secondary">대기 순서</span>
              <span class="font-medium">3번째</span>
            </div>
            <div class="flex justify-between">
              <span class="text-text-secondary">콘텐츠 수</span>
              <span class="font-medium">5개</span>
            </div>
            <div class="flex justify-between">
              <span class="text-text-secondary">예상 시작</span>
              <span class="font-medium">약 5분 후</span>
            </div>
            <div class="flex justify-between">
              <span class="text-text-secondary">예상 완료</span>
              <span class="font-medium">약 8분 후</span>
            </div>
          </div>
        </div>
        
        <div class="bg-info-light rounded-xl p-3 text-sm text-info flex items-center gap-2">
          <span class="material-icons-round">info</span>
          <span>현재 2개의 작업이 처리 중입니다</span>
        </div>
      </div>
      
      <div class="px-6 py-4 border-t border-border-light flex justify-between">
        <button onclick="cancelQueueItem()" class="px-4 py-2 border border-error text-error rounded-xl hover:bg-error-light flex items-center gap-2">
          <span class="material-icons-round text-sm">cancel</span>
          대기 취소
        </button>
        <button onclick="prioritizeQueueItem()" class="px-4 py-2 border border-warning text-warning rounded-xl hover:bg-warning-light flex items-center gap-2">
          <span class="material-icons-round text-sm">priority_high</span>
          우선 처리
        </button>
      </div>
    </div>
  </div>
  
  <!-- 콘텐츠 더보기 드롭다운 -->
  <div id="contentDropdown" class="fixed bg-white rounded-xl shadow-lg border border-border-light py-2 z-50 hidden min-w-[160px]">
    <button onclick="viewContentHistory()" class="w-full px-4 py-2.5 text-left text-sm hover:bg-gray-50 flex items-center gap-3">
      <span class="material-icons-round text-text-secondary text-lg">history</span>
      수정 이력
    </button>
    <button onclick="duplicateContent()" class="w-full px-4 py-2.5 text-left text-sm hover:bg-gray-50 flex items-center gap-3">
      <span class="material-icons-round text-text-secondary text-lg">content_copy</span>
      복제
    </button>
    <button onclick="moveContent()" class="w-full px-4 py-2.5 text-left text-sm hover:bg-gray-50 flex items-center gap-3">
      <span class="material-icons-round text-text-secondary text-lg">drive_file_move</span>
      이동
    </button>
    <hr class="my-2 border-border-light">
    <button onclick="archiveContent()" class="w-full px-4 py-2.5 text-left text-sm hover:bg-gray-50 flex items-center gap-3">
      <span class="material-icons-round text-text-secondary text-lg">archive</span>
      보관
    </button>
    <button onclick="deleteContentFromDropdown()" class="w-full px-4 py-2.5 text-left text-sm hover:bg-error-light text-error flex items-center gap-3">
      <span class="material-icons-round text-lg">delete</span>
      삭제
    </button>
  </div>
  
  <!-- 토스트 컨테이너 -->
  <div id="toastContainer" class="fixed bottom-6 right-6 z-50 space-y-3"></div>
  
  <script>
    // ========================================
    // 토스트 알림 시스템
    // ========================================
    // [MIGRATED TO MODULE] showToast - now using toast.js module
    
    // ========================================
    // 현재 콘텐츠 정보
    // ========================================
    let currentContent = {
      id: 'KOR-244',
      title: '인공지능의 미래와 윤리',
      subject: 'korean',
      type: '비문학',
      grade: '중등 1-3',
      aiStatus: 'completed',
      reviewStatus: 'pending'
    };
    
    // ========================================
    // Mobile Menu Functions
    // ========================================
    function openMobileMenu() {
      document.getElementById('mobileMenu').classList.add('open');
      document.getElementById('mobileMenuOverlay').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeMobileMenu() {
      document.getElementById('mobileMenu').classList.remove('open');
      document.getElementById('mobileMenuOverlay').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    // ========================================
    // Subject Tab Switching
    // ========================================
    function switchSubjectTab(subject) {
      document.querySelectorAll('.subject-content').forEach(tab => tab.classList.add('hidden'));
      document.querySelectorAll('.subject-tab').forEach(btn => {
        btn.classList.remove('active-korean', 'active-english', 'active-math');
        btn.classList.add('text-text-secondary');
      });
      
      document.getElementById('tab-' + subject).classList.remove('hidden');
      event.target.closest('.subject-tab').classList.add('active-' + subject);
      event.target.closest('.subject-tab').classList.remove('text-text-secondary');
      
      const counts = { korean: 245, english: 1200, math: 890 };
      document.getElementById('totalCount').textContent = counts[subject];
    }
    
    // ========================================
    // Upload Modal
    // ========================================
    function openUploadModal() {
      document.getElementById('uploadModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeUploadModal() {
      document.getElementById('uploadModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function startUpload() {
      const fileUploaded = !document.getElementById('uploadZone').classList.contains('hidden') === false;
      if (!fileUploaded) {
        showToast('CSV 파일을 먼저 업로드해주세요.', 'warning');
        return;
      }
      
      closeUploadModal();
      showToast('콘텐츠 업로드가 시작되었습니다. AI 처리 중...', 'info');
      
      // 시뮬레이션: 3초 후 완료
      setTimeout(() => {
        showToast('12개 콘텐츠가 등록되었습니다.', 'success');
      }, 3000);
    }
    
    // ========================================
    // Review Modal
    // ========================================
    let currentReviewDecisions = {};
    let currentReviewSubject = 'korean';
    
    // 과목별 샘플 데이터 (확장)
    const reviewSampleData = {
      korean: {
        'KOR-244': { 
          title: '인공지능의 미래와 윤리', 
          type: '비문학',
          passage: '인공지능 기술이 발전하면서 우리 사회의 많은 부분이 변화하고 있다. 자율주행 자동차, 의료 진단 시스템, 금융 서비스 등 다양한 분야에서 인공지능이 활용되고 있으며, 이는 우리 삶의 편의성을 크게 향상시키고 있다...',
          oxQuiz: [
            { question: '인공지능 기술은 자율주행 자동차에만 활용되고 있다.', answer: 'X' },
            { question: '인공지능은 우리 삶의 편의성을 향상시키고 있다.', answer: 'O' },
            { question: '인공지능의 발전으로 인해 윤리적 문제가 제기되고 있다.', answer: 'O' }
          ],
          summary: '인공지능 기술의 발전으로 다양한 분야에서 편의성이 향상되고 있으나, 동시에 윤리적 문제가 제기되고 있다.'
        },
        'KOR-241': { 
          title: '환경 보호의 중요성', 
          type: '비문학',
          passage: '지구 온난화가 가속화되면서 전 세계적으로 환경 문제에 대한 관심이 높아지고 있다. 극지방의 빙하가 녹고, 해수면이 상승하며, 이상기후 현상이 빈번해지고 있다...',
          oxQuiz: [
            { question: '지구 온난화로 인해 극지방의 빙하가 녹고 있다.', answer: 'O' },
            { question: '환경 보호는 개인의 노력만으로 가능하다.', answer: 'X' },
            { question: '탄소 배출 감소는 환경 보호와 관련이 없다.', answer: 'X' }
          ],
          summary: '지구 온난화로 인한 환경 문제가 심각해지고 있으며, 이를 해결하기 위해 개인과 국가 차원의 노력이 필요하다.'
        },
        'KOR-238': { 
          title: '현대 사회와 기술', 
          type: '비문학',
          passage: '21세기 현대 사회는 기술의 급격한 발전으로 큰 변화를 겪고 있다. 스마트폰의 보급으로 언제 어디서나 정보에 접근할 수 있게 되었고, 사물인터넷(IoT)은 우리의 일상을 더욱 편리하게 만들고 있다...',
          oxQuiz: [
            { question: '스마트폰 덕분에 언제 어디서나 정보에 접근할 수 있게 되었다.', answer: 'O' },
            { question: '사물인터넷(IoT)은 산업 분야에서만 활용된다.', answer: 'X' },
            { question: '현대 기술의 발전은 우리 일상에 영향을 미치지 않는다.', answer: 'X' }
          ],
          summary: '21세기 현대 사회는 스마트폰과 IoT 등 기술의 발전으로 정보 접근성과 일상의 편리함이 크게 향상되었다.'
        },
        'KOR-235': { 
          title: '고전 문학의 이해', 
          type: '문학',
          passage: '고전 문학은 우리 조상들의 삶과 사상을 담고 있는 소중한 문화유산이다. 시조, 가사, 판소리 등 다양한 장르를 통해 당시 사람들의 정서와 가치관을 이해할 수 있다...',
          oxQuiz: [
            { question: '고전 문학은 우리 조상들의 삶과 사상을 담고 있다.', answer: 'O' },
            { question: '시조는 고전 문학의 한 장르이다.', answer: 'O' },
            { question: '고전 문학은 현대인의 삶과 전혀 관련이 없다.', answer: 'X' }
          ],
          summary: '고전 문학은 시조, 가사, 판소리 등을 통해 조상들의 정서와 가치관을 보여주는 소중한 문화유산이다.'
        }
      },
      english: {
        'ENG-1200': { 
          word: 'serendipity', 
          pronunciation: '/ˌserənˈdɪpɪti/', 
          meaning: '우연한 발견, 뜻밖의 행운', 
          level: '고급',
          examples: [
            { en: 'Finding that rare book was pure **serendipity**.', ko: '그 희귀한 책을 찾은 것은 순전히 우연의 행운이었다.' },
            { en: 'The discovery of penicillin was a classic case of **serendipity**.', ko: '페니실린의 발견은 전형적인 우연한 발견의 사례였다.' },
            { en: 'By **serendipity**, I met my best friend on that trip.', ko: '우연히도, 나는 그 여행에서 가장 친한 친구를 만났다.' }
          ]
        },
        'ENG-1195': { 
          word: 'perseverance', 
          pronunciation: '/ˌpɜːsɪˈvɪərəns/', 
          meaning: '인내, 끈기', 
          level: '중급',
          examples: [
            { en: 'Success requires **perseverance** and dedication.', ko: '성공에는 인내와 헌신이 필요하다.' },
            { en: 'Her **perseverance** finally paid off when she got the job.', ko: '그녀의 끈기는 마침내 취직에 성공하면서 보상받았다.' },
            { en: 'The athlete\'s **perseverance** inspired everyone.', ko: '그 선수의 인내심은 모든 사람에게 영감을 주었다.' }
          ]
        },
        'ENG-1192': { 
          word: 'meticulous', 
          pronunciation: '/məˈtɪkjələs/', 
          meaning: '꼼꼼한, 세심한', 
          level: '고급',
          examples: [
            { en: 'She is **meticulous** about keeping her room clean.', ko: '그녀는 방을 깨끗하게 유지하는 것에 대해 꼼꼼하다.' },
            { en: 'The report requires **meticulous** attention to detail.', ko: '그 보고서는 세부 사항에 대한 세심한 주의가 필요하다.' },
            { en: 'His **meticulous** planning ensured the project\'s success.', ko: '그의 꼼꼼한 계획이 프로젝트의 성공을 보장했다.' }
          ]
        }
      },
      math: {
        'MATH-890': { 
          problem: '이차방정식 x² - 5x + 6 = 0의 해를 구하시오.', 
          unit: '이차방정식', 
          grade: '중3',
          type: '계산',
          steps: [
            { title: '인수분해 가능 여부 확인', desc: '두 수를 곱해서 6, 더해서 -5가 되는 조합을 찾습니다.', formula: '-2 × -3 = 6, -2 + (-3) = -5 ✓' },
            { title: '인수분해 실행', desc: '이차방정식을 인수분해 형태로 변환합니다.', formula: 'x² - 5x + 6 = (x - 2)(x - 3) = 0' },
            { title: '해 구하기', desc: '각 인수를 0으로 놓고 x의 값을 구합니다.', formula: 'x - 2 = 0 → x = 2<br>x - 3 = 0 → x = 3' }
          ],
          answer: 'x = 2 또는 x = 3',
          hints: ['상수항 6을 두 수의 곱으로 나타내보세요.', '그 두 수의 합이 -5가 되어야 합니다.']
        },
        'MATH-877': { 
          problem: '직각삼각형에서 두 변의 길이가 3과 4일 때, 빗변의 길이를 구하시오.', 
          unit: '피타고라스', 
          grade: '중2',
          type: '응용',
          steps: [
            { title: '피타고라스 정리 적용', desc: '직각삼각형에서 a² + b² = c² (c는 빗변)', formula: '3² + 4² = c²' },
            { title: '제곱 계산', desc: '각 변의 제곱을 계산합니다.', formula: '9 + 16 = c²<br>25 = c²' },
            { title: '제곱근 구하기', desc: '양변에 제곱근을 취합니다.', formula: 'c = √25 = 5' }
          ],
          answer: 'c = 5',
          hints: ['피타고라스 정리를 떠올려보세요.', '두 변의 제곱의 합이 빗변의 제곱과 같습니다.']
        },
        'MATH-885': { 
          problem: '연립방정식 2x + y = 7, x - y = 2를 풀어라.', 
          unit: '연립방정식', 
          grade: '중2',
          type: '계산',
          steps: [
            { title: '두 식 더하기', desc: '두 방정식을 더해 한 변수를 소거합니다.', formula: '(2x + y) + (x - y) = 7 + 2<br>3x = 9' },
            { title: 'x 값 구하기', desc: '양변을 3으로 나눕니다.', formula: 'x = 3' },
            { title: 'y 값 구하기', desc: 'x = 3을 첫 번째 식에 대입합니다.', formula: '2(3) + y = 7<br>y = 1' }
          ],
          answer: 'x = 3, y = 1',
          hints: ['두 식을 더하거나 빼서 한 변수를 소거해보세요.', '하나의 변수 값을 구한 후 대입합니다.']
        }
      }
    };
    
    function openReviewModal(contentId, contentTitle) {
      // 과목 판별
      let subject = 'korean';
      if (contentId && contentId.startsWith('ENG')) {
        subject = 'english';
      } else if (contentId && contentId.startsWith('MATH')) {
        subject = 'math';
      }
      
      currentReviewSubject = subject;
      currentContent.id = contentId || 'KOR-244';
      currentContent.title = contentTitle || getContentTitle(contentId);
      currentContent.subject = subject;
      
      // 초기화
      currentReviewDecisions = {};
      document.getElementById('reviewMemo').value = '';
      
      // 과목별 아이콘 설정
      const iconContainer = document.getElementById('reviewSubjectIcon');
      const icons = {
        korean: { bg: 'bg-korean-light', icon: 'menu_book', color: 'text-korean' },
        english: { bg: 'bg-english-light', icon: 'translate', color: 'text-english' },
        math: { bg: 'bg-math-light', icon: 'calculate', color: 'text-yellow-600' }
      };
      
      const subjectInfo = icons[subject];
      iconContainer.className = `w-10 h-10 rounded-xl ${subjectInfo.bg} flex items-center justify-center`;
      iconContainer.innerHTML = `<span class="material-icons-round ${subjectInfo.color}">${subjectInfo.icon}</span>`;
      
      // 콘텐츠 정보 설정
      document.getElementById('reviewContentInfo').textContent = `${currentContent.id} · ${currentContent.title}`;
      
      // 콘텐츠 영역 전환
      document.getElementById('reviewKorean').classList.add('hidden');
      document.getElementById('reviewEnglish').classList.add('hidden');
      document.getElementById('reviewMath').classList.add('hidden');
      
      document.getElementById('reviewItemsKorean').classList.add('hidden');
      document.getElementById('reviewItemsEnglish').classList.add('hidden');
      document.getElementById('reviewItemsMath').classList.add('hidden');
      
      if (subject === 'korean') {
        document.getElementById('reviewKorean').classList.remove('hidden');
        document.getElementById('reviewItemsKorean').classList.remove('hidden');
        
        // 국어 데이터 동적 업데이트
        const korData = reviewSampleData.korean[contentId] || reviewSampleData.korean['KOR-244'];
        updateKoreanReviewContent(korData);
        
      } else if (subject === 'english') {
        document.getElementById('reviewEnglish').classList.remove('hidden');
        document.getElementById('reviewItemsEnglish').classList.remove('hidden');
        
        // 영어 데이터 동적 업데이트
        const engData = reviewSampleData.english[contentId] || reviewSampleData.english['ENG-1200'];
        updateEnglishReviewContent(engData);
        
      } else if (subject === 'math') {
        document.getElementById('reviewMath').classList.remove('hidden');
        document.getElementById('reviewItemsMath').classList.remove('hidden');
        
        // 수학 데이터 동적 업데이트
        const mathData = reviewSampleData.math[contentId] || reviewSampleData.math['MATH-890'];
        updateMathReviewContent(mathData);
      }
      
      // 검수 항목 버튼 상태 초기화
      resetReviewButtons();
      
      document.getElementById('reviewModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    // 국어 콘텐츠 동적 업데이트
    function updateKoreanReviewContent(data) {
      const container = document.getElementById('reviewKorean');
      
      // O/X 퀴즈 생성
      let quizHtml = '';
      if (data.oxQuiz) {
        data.oxQuiz.forEach((quiz, idx) => {
          const answerBg = quiz.answer === 'O' ? 'bg-success-light text-success' : 'bg-error-light text-error';
          quizHtml += `
            <div class="bg-white border border-border-light rounded-xl p-4">
              <div class="flex items-start gap-3">
                <span class="w-6 h-6 rounded-full bg-korean-light flex items-center justify-center text-korean text-sm font-bold">${idx + 1}</span>
                <div class="flex-1">
                  <p class="text-sm mb-2">${quiz.question}</p>
                  <div class="flex gap-2">
                    <span class="px-3 py-1 ${answerBg} text-xs rounded-lg font-medium">정답: ${quiz.answer}</span>
                  </div>
                </div>
              </div>
            </div>
          `;
        });
      }
      
      container.innerHTML = `
        <h3 class="font-bold text-navy mb-3">원본 지문</h3>
        <div class="bg-gray-50 rounded-xl p-4 text-sm leading-relaxed mb-6">${data.passage || '지문 내용이 없습니다.'}</div>
        
        <h3 class="font-bold text-navy mb-3">AI 생성 O/X 퀴즈</h3>
        <div class="space-y-3">${quizHtml}</div>
        
        <h3 class="font-bold text-navy mb-3 mt-6">AI 생성 요약 카드</h3>
        <div class="bg-success-light rounded-xl p-4">
          <p class="text-sm font-medium text-success mb-2">핵심 요약</p>
          <p class="text-sm text-text-primary">${data.summary || '요약 내용이 없습니다.'}</p>
        </div>
      `;
    }
    
    // 영어 콘텐츠 동적 업데이트
    function updateEnglishReviewContent(data) {
      const container = document.getElementById('reviewEnglish');
      
      // 난이도 색상
      const levelColors = {
        '초급': 'bg-success-light text-success',
        '중급': 'bg-warning-light text-warning',
        '고급': 'bg-error-light text-error'
      };
      const levelColor = levelColors[data.level] || 'bg-info-light text-info';
      
      // 예문 생성
      let examplesHtml = '';
      if (data.examples) {
        data.examples.forEach((ex, idx) => {
          // 마커 처리 (**word** → styled span)
          const markedEn = ex.en.replace(/\*\*([^*]+)\*\*/g, '<span class="px-1.5 py-0.5 bg-english text-white rounded font-medium">**$1**</span>');
          examplesHtml += `
            <div class="bg-white border border-border-light rounded-xl p-4">
              <div class="flex items-start gap-3">
                <span class="w-6 h-6 rounded-full bg-english-light flex items-center justify-center text-english text-sm font-bold">${idx + 1}</span>
                <div class="flex-1">
                  <p class="text-sm mb-2">${markedEn}</p>
                  <p class="text-xs text-text-tertiary">${ex.ko}</p>
                </div>
              </div>
            </div>
          `;
        });
      }
      
      container.innerHTML = `
        <h3 class="font-bold text-navy mb-3">단어 정보</h3>
        <div class="bg-english-light rounded-xl p-5 mb-6">
          <div class="flex items-center gap-4 mb-3">
            <p class="text-2xl font-bold text-english">${data.word}</p>
            <span class="px-3 py-1 ${levelColor} text-xs rounded-lg font-medium">${data.level}</span>
          </div>
          <p class="text-lg text-text-secondary mb-2">${data.pronunciation}</p>
          <p class="text-text-primary font-medium">${data.meaning}</p>
        </div>
        
        <h3 class="font-bold text-navy mb-3">AI 생성 예문 (마커 처리)</h3>
        <div class="space-y-3">${examplesHtml}</div>
        
        <h3 class="font-bold text-navy mb-3 mt-6">7초 발화 테스트 미리보기</h3>
        <div class="bg-gray-50 rounded-xl p-4 flex items-center justify-between">
          <div class="flex items-center gap-3">
            <button onclick="playPronunciation('${data.word}')" class="w-12 h-12 rounded-full bg-english flex items-center justify-center hover:bg-english/90">
              <span class="material-icons-round text-white text-2xl">play_arrow</span>
            </button>
            <div>
              <p class="font-medium text-navy">발음 듣기</p>
              <p class="text-xs text-text-tertiary">TTS 생성 음성</p>
            </div>
          </div>
          <div class="text-right">
            <p class="text-sm text-text-secondary">예상 난이도</p>
            <p class="font-bold ${data.level === '고급' ? 'text-error' : data.level === '중급' ? 'text-warning' : 'text-success'}">${data.level === '고급' ? '어려움' : data.level === '중급' ? '보통' : '쉬움'}</p>
          </div>
        </div>
      `;
    }
    
    // 수학 콘텐츠 동적 업데이트
    function updateMathReviewContent(data) {
      const container = document.getElementById('reviewMath');
      
      // 유형 색상
      const typeColors = {
        '계산': 'bg-info-light text-info',
        '개념': 'bg-success-light text-success',
        '응용': 'bg-warning-light text-warning',
        '심화': 'bg-primary-light text-primary'
      };
      const typeColor = typeColors[data.type] || 'bg-gray-200 text-text-secondary';
      
      // 단계별 풀이 생성
      let stepsHtml = '';
      if (data.steps) {
        data.steps.forEach((step, idx) => {
          stepsHtml += `
            <div class="bg-white border border-border-light rounded-xl p-4">
              <div class="flex items-start gap-3">
                <span class="w-8 h-8 rounded-lg flex items-center justify-center text-white text-sm font-bold" style="background: #FBBC05;">${idx + 1}</span>
                <div class="flex-1">
                  <p class="text-sm font-medium text-navy mb-1">${step.title}</p>
                  <p class="text-sm text-text-secondary">${step.desc}</p>
                  <div class="mt-2 p-2 bg-gray-50 rounded-lg font-mono text-sm">${step.formula}</div>
                </div>
              </div>
            </div>
          `;
        });
      }
      
      // 힌트 생성
      let hintsHtml = '';
      if (data.hints) {
        data.hints.forEach((hint, idx) => {
          hintsHtml += `
            <div class="bg-info-light rounded-lg p-3 flex items-start gap-2">
              <span class="material-icons-round text-info text-lg">lightbulb</span>
              <p class="text-sm text-info">힌트 ${idx + 1}: ${hint}</p>
            </div>
          `;
        });
      }
      
      container.innerHTML = `
        <h3 class="font-bold text-navy mb-3">문제 원본</h3>
        <div class="bg-math-light rounded-xl p-5 mb-6">
          <p class="text-lg font-medium text-navy mb-2">${data.problem}</p>
          <div class="flex gap-2 mt-3">
            <span class="px-3 py-1 bg-white text-text-secondary text-xs rounded-lg">${data.grade}</span>
            <span class="px-3 py-1 ${typeColor} text-xs rounded-lg font-medium">${data.type}</span>
            <span class="px-3 py-1 bg-white text-text-secondary text-xs rounded-lg">${data.unit}</span>
          </div>
        </div>
        
        <h3 class="font-bold text-navy mb-3">AI 생성 단계별 풀이</h3>
        <div class="space-y-3">${stepsHtml}</div>
        
        <h3 class="font-bold text-navy mb-3 mt-6">최종 답안</h3>
        <div class="bg-success-light rounded-xl p-4 flex items-center gap-3">
          <span class="material-icons-round text-success text-2xl">check_circle</span>
          <div>
            <p class="text-sm text-text-secondary">정답</p>
            <p class="text-lg font-bold text-success">${data.answer}</p>
          </div>
        </div>
        
        <h3 class="font-bold text-navy mb-3 mt-6">AI 생성 힌트</h3>
        <div class="space-y-2">${hintsHtml}</div>
      `;
    }
    
    // 검수 버튼 상태 초기화
    function resetReviewButtons() {
      const allBtns = document.querySelectorAll('[class*="review-btn-"]');
      allBtns.forEach(btn => {
        btn.classList.remove('bg-success', 'bg-warning', 'text-white');
        btn.classList.add('border', 'border-border-light', 'hover:bg-gray-50');
      });
    }
    
    // TTS 발음 재생
    function playPronunciation(word) {
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(word);
        utterance.lang = 'en-US';
        utterance.rate = 0.8;
        speechSynthesis.speak(utterance);
      } else {
        showToast('브라우저가 TTS를 지원하지 않습니다.', 'warning');
      }
    }
    
    function closeReviewModal() {
      document.getElementById('reviewModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function setReviewItem(category, decision) {
      currentReviewDecisions[category] = decision;
      
      // 버튼 상태 업데이트
      const goodBtn = document.querySelector(`.review-btn-${category}-good`);
      const fixBtn = document.querySelector(`.review-btn-${category}-fix`);
      
      if (goodBtn && fixBtn) {
        if (decision === 'good') {
          goodBtn.classList.remove('border', 'border-border-light', 'hover:bg-gray-50');
          goodBtn.classList.add('bg-success', 'text-white');
          fixBtn.classList.remove('bg-warning', 'text-white');
          fixBtn.classList.add('border', 'border-border-light', 'hover:bg-gray-50');
        } else {
          fixBtn.classList.remove('border', 'border-border-light', 'hover:bg-gray-50');
          fixBtn.classList.add('bg-warning', 'text-white');
          goodBtn.classList.remove('bg-success', 'text-white');
          goodBtn.classList.add('border', 'border-border-light', 'hover:bg-gray-50');
        }
      }
    }
    
    function setFinalDecision(decision) {
      if (decision === 'approve') {
        closeReviewModal();
        showToast(`${currentContent.id} 콘텐츠가 승인되었습니다.`, 'success');
      } else if (decision === 'reprocess') {
        closeReviewModal();
        openReprocessModal();
      } else if (decision === 'delete') {
        closeReviewModal();
        openDeleteContentModal();
      }
    }
    
    function completeReview() {
      const memo = document.getElementById('reviewMemo').value;
      closeReviewModal();
      showToast(`${currentContent.id} 검수가 완료되었습니다.`, 'success');
    }
    
    function navigateReview(direction) {
      showToast(`${direction === 'prev' ? '이전' : '다음'} 콘텐츠로 이동합니다.`, 'info');
    }
    
    function playPronunciation() {
      showToast('발음을 재생합니다.', 'info');
    }
    
    // ========================================
    // Content Detail Modal
    // ========================================
    function openContentDetail(subject, id) {
      currentContent.id = id;
      currentContent.subject = subject;
      currentContent.title = getContentTitle(id);
      
      // 과목별 아이콘 색상 설정
      const iconContainer = document.getElementById('detailSubjectIcon');
      const icons = {
        korean: { bg: 'bg-korean-light', icon: 'menu_book', color: 'text-korean' },
        english: { bg: 'bg-english-light', icon: 'translate', color: 'text-english' },
        math: { bg: 'bg-math-light', icon: 'calculate', color: 'text-yellow-600' }
      };
      
      const subjectInfo = icons[subject] || icons.korean;
      iconContainer.className = `w-10 h-10 rounded-xl ${subjectInfo.bg} flex items-center justify-center`;
      iconContainer.innerHTML = `<span class="material-icons-round ${subjectInfo.color}">${subjectInfo.icon}</span>`;
      
      document.getElementById('detailId').textContent = id;
      document.getElementById('detailTitle').textContent = currentContent.title;
      
      // 과목별 콘텐츠 업데이트
      updateDetailContent(subject, id);
      
      // 기본 탭으로 리셋
      resetDetailTabs();
      
      document.getElementById('contentDetailModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    // 상세 모달 탭 초기화
    function resetDetailTabs() {
      document.querySelectorAll('.detail-tab-content').forEach(tab => tab.classList.add('hidden'));
      document.querySelectorAll('.detail-tab-btn').forEach(btn => {
        btn.classList.remove('border-super', 'text-super');
        btn.classList.add('border-transparent', 'text-text-secondary');
      });
      document.getElementById('detailTab-original').classList.remove('hidden');
      document.querySelector('.detail-tab-btn').classList.add('border-super', 'text-super');
      document.querySelector('.detail-tab-btn').classList.remove('border-transparent', 'text-text-secondary');
    }
    
    // 과목별 상세 콘텐츠 업데이트
    function updateDetailContent(subject, id) {
      const originalTab = document.getElementById('detailTab-original');
      const aiTab = document.getElementById('detailTab-ai');
      const infoTab = document.getElementById('detailTab-info');
      
      if (subject === 'korean') {
        const data = reviewSampleData.korean[id] || reviewSampleData.korean['KOR-244'];
        
        // 원본 탭
        originalTab.innerHTML = `
          <div class="bg-gray-50 rounded-xl p-6">
            <h3 class="font-bold text-navy mb-4">지문 원본</h3>
            <div class="prose max-w-none text-text-primary leading-relaxed">${data.passage || '지문 내용이 없습니다.'}</div>
          </div>
        `;
        
        // AI 생성 탭
        let quizHtml = '';
        if (data.oxQuiz) {
          data.oxQuiz.forEach(q => {
            const answerClass = q.answer === 'O' ? 'bg-success-light text-success' : 'bg-error-light text-error';
            quizHtml += `
              <div class="bg-gray-50 rounded-xl p-4 flex items-center justify-between">
                <p class="text-sm">${q.question}</p>
                <span class="status-badge ${answerClass}">${q.answer}</span>
              </div>
            `;
          });
        }
        
        aiTab.innerHTML = `
          <div class="mb-6">
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-info">account_tree</span>
              구조 분석
            </h3>
            <div class="bg-info-light rounded-xl p-4">
              <div class="grid grid-cols-3 gap-4 text-sm">
                <div>
                  <p class="text-text-secondary mb-1">서론 (1문단)</p>
                  <p class="font-medium">도입부</p>
                </div>
                <div>
                  <p class="text-text-secondary mb-1">본론 (2문단)</p>
                  <p class="font-medium">핵심 내용</p>
                </div>
                <div>
                  <p class="text-text-secondary mb-1">결론 (3문단)</p>
                  <p class="font-medium">마무리</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mb-6">
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-warning">quiz</span>
              O/X 퀴즈 (${data.oxQuiz ? data.oxQuiz.length : 0}문항)
            </h3>
            <div class="space-y-3">${quizHtml}</div>
          </div>
          
          <div>
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-success">summarize</span>
              요약 카드
            </h3>
            <div class="bg-success-light rounded-xl p-4">
              <p class="text-sm text-success font-medium mb-2">핵심 요약</p>
              <p class="text-text-primary">${data.summary || '요약 내용이 없습니다.'}</p>
            </div>
          </div>
        `;
        
        // 정보 탭
        infoTab.innerHTML = `
          <div class="grid grid-cols-2 gap-4">
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">콘텐츠 ID</p>
              <p class="font-mono font-medium">${id}</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">유형</p>
              <p class="font-medium">${data.type || '비문학'}</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">대상 학년</p>
              <p class="font-medium">중등 1-3</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">난이도</p>
              <p class="font-medium">중</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">등록일</p>
              <p class="font-medium">2025.01.07</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">AI 처리</p>
              <p class="font-medium text-success">완료</p>
            </div>
          </div>
        `;
        
      } else if (subject === 'english') {
        const data = reviewSampleData.english[id] || reviewSampleData.english['ENG-1200'];
        
        // 난이도 색상
        const levelColors = {
          '초급': 'bg-success-light text-success',
          '중급': 'bg-warning-light text-warning',
          '고급': 'bg-error-light text-error'
        };
        const levelColor = levelColors[data.level] || 'bg-info-light text-info';
        
        // 원본 탭
        originalTab.innerHTML = `
          <div class="bg-english-light rounded-xl p-6">
            <div class="flex items-center gap-4 mb-4">
              <h3 class="text-3xl font-bold text-english">${data.word}</h3>
              <span class="px-3 py-1 ${levelColor} text-sm rounded-lg font-medium">${data.level}</span>
            </div>
            <p class="text-xl text-text-secondary mb-3">${data.pronunciation}</p>
            <p class="text-lg font-medium text-text-primary">${data.meaning}</p>
          </div>
        `;
        
        // AI 생성 탭 - 예문
        let examplesHtml = '';
        if (data.examples) {
          data.examples.forEach((ex, idx) => {
            const markedEn = ex.en.replace(/\*\*([^*]+)\*\*/g, '<span class="px-1.5 py-0.5 bg-english text-white rounded font-medium">$1</span>');
            examplesHtml += `
              <div class="bg-gray-50 rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-6 h-6 rounded-full bg-english-light flex items-center justify-center text-english text-sm font-bold">${idx + 1}</span>
                  <div class="flex-1">
                    <p class="text-sm mb-2">${markedEn}</p>
                    <p class="text-xs text-text-tertiary">${ex.ko}</p>
                  </div>
                </div>
              </div>
            `;
          });
        }
        
        aiTab.innerHTML = `
          <div class="mb-6">
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-english">format_quote</span>
              AI 생성 예문 (마커 처리)
            </h3>
            <div class="space-y-3">${examplesHtml}</div>
          </div>
          
          <div class="mb-6">
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-info">record_voice_over</span>
              7초 발화 테스트 설정
            </h3>
            <div class="bg-gray-50 rounded-xl p-4 flex items-center justify-between">
              <div class="flex items-center gap-3">
                <button onclick="playPronunciation('${data.word}')" class="w-12 h-12 rounded-full bg-english flex items-center justify-center hover:bg-english/90">
                  <span class="material-icons-round text-white text-2xl">play_arrow</span>
                </button>
                <div>
                  <p class="font-medium text-navy">발음 듣기</p>
                  <p class="text-xs text-text-tertiary">TTS 생성 음성</p>
                </div>
              </div>
              <div class="text-right">
                <p class="text-sm text-text-secondary">예상 난이도</p>
                <p class="font-bold ${data.level === '고급' ? 'text-error' : data.level === '중급' ? 'text-warning' : 'text-success'}">${data.level === '고급' ? '어려움' : data.level === '중급' ? '보통' : '쉬움'}</p>
              </div>
            </div>
          </div>
          
          <div>
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-success">check_circle</span>
              학습 상태
            </h3>
            <div class="bg-success-light rounded-xl p-4">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-success font-medium">학습 준비 완료</p>
                  <p class="text-xs text-text-secondary mt-1">마커 처리 및 TTS 생성 완료</p>
                </div>
                <span class="material-icons-round text-success text-3xl">verified</span>
              </div>
            </div>
          </div>
        `;
        
        // 정보 탭
        infoTab.innerHTML = `
          <div class="grid grid-cols-2 gap-4">
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">단어 ID</p>
              <p class="font-mono font-medium">${id}</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">단어</p>
              <p class="font-medium">${data.word}</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">발음</p>
              <p class="font-medium">${data.pronunciation}</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">난이도</p>
              <p class="font-medium">${data.level}</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">예문 수</p>
              <p class="font-medium">${data.examples ? data.examples.length : 0}개</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">AI 처리</p>
              <p class="font-medium text-success">완료</p>
            </div>
          </div>
        `;
        
      } else if (subject === 'math') {
        const data = reviewSampleData.math[id] || reviewSampleData.math['MATH-890'];
        
        // 유형 색상
        const typeColors = {
          '계산': 'bg-info-light text-info',
          '개념': 'bg-success-light text-success',
          '응용': 'bg-warning-light text-warning',
          '심화': 'bg-primary-light text-primary'
        };
        const typeColor = typeColors[data.type] || 'bg-gray-200 text-text-secondary';
        
        // 원본 탭
        originalTab.innerHTML = `
          <div class="bg-math-light rounded-xl p-6">
            <div class="flex items-center gap-3 mb-4">
              <span class="px-3 py-1 bg-white text-text-secondary text-sm rounded-lg">${data.grade}</span>
              <span class="px-3 py-1 ${typeColor} text-sm rounded-lg font-medium">${data.type}</span>
              <span class="px-3 py-1 bg-white text-text-secondary text-sm rounded-lg">${data.unit}</span>
            </div>
            <h3 class="text-xl font-bold text-navy">${data.problem}</h3>
          </div>
        `;
        
        // AI 생성 탭 - 단계별 풀이
        let stepsHtml = '';
        if (data.steps) {
          data.steps.forEach((step, idx) => {
            stepsHtml += `
              <div class="bg-gray-50 rounded-xl p-4">
                <div class="flex items-start gap-3">
                  <span class="w-8 h-8 rounded-lg flex items-center justify-center text-white text-sm font-bold" style="background: #FBBC05;">${idx + 1}</span>
                  <div class="flex-1">
                    <p class="text-sm font-medium text-navy mb-1">${step.title}</p>
                    <p class="text-sm text-text-secondary">${step.desc}</p>
                    <div class="mt-2 p-2 bg-white rounded-lg font-mono text-sm">${step.formula}</div>
                  </div>
                </div>
              </div>
            `;
          });
        }
        
        // 힌트 생성
        let hintsHtml = '';
        if (data.hints) {
          data.hints.forEach((hint, idx) => {
            hintsHtml += `
              <div class="bg-info-light rounded-lg p-3 flex items-start gap-2">
                <span class="material-icons-round text-info text-lg">lightbulb</span>
                <p class="text-sm text-info">힌트 ${idx + 1}: ${hint}</p>
              </div>
            `;
          });
        }
        
        aiTab.innerHTML = `
          <div class="mb-6">
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round" style="color: #FBBC05;">functions</span>
              단계별 풀이
            </h3>
            <div class="space-y-3">${stepsHtml}</div>
          </div>
          
          <div class="mb-6">
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-success">check_circle</span>
              최종 답안
            </h3>
            <div class="bg-success-light rounded-xl p-4 flex items-center gap-3">
              <span class="material-icons-round text-success text-2xl">check_circle</span>
              <div>
                <p class="text-sm text-text-secondary">정답</p>
                <p class="text-lg font-bold text-success">${data.answer}</p>
              </div>
            </div>
          </div>
          
          <div>
            <h3 class="font-bold text-navy mb-3 flex items-center gap-2">
              <span class="material-icons-round text-info">lightbulb</span>
              AI 생성 힌트
            </h3>
            <div class="space-y-2">${hintsHtml}</div>
          </div>
        `;
        
        // 정보 탭
        infoTab.innerHTML = `
          <div class="grid grid-cols-2 gap-4">
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">문제 ID</p>
              <p class="font-mono font-medium">${id}</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">단원</p>
              <p class="font-medium">${data.unit}</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">학년</p>
              <p class="font-medium">${data.grade}</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">유형</p>
              <p class="font-medium">${data.type}</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">풀이 단계</p>
              <p class="font-medium">${data.steps ? data.steps.length : 0}단계</p>
            </div>
            <div class="bg-gray-50 rounded-xl p-4">
              <p class="text-xs text-text-tertiary mb-1">AI 처리</p>
              <p class="font-medium text-success">완료</p>
            </div>
          </div>
        `;
      }
    }
    
    function closeContentDetailModal() {
      document.getElementById('contentDetailModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function getContentTitle(id) {
      const titles = {
        'KOR-245': '윤동주 - 서시',
        'KOR-244': '인공지능의 미래와 윤리',
        'KOR-243': '홍길동전 발췌',
        'KOR-241': '환경 보호의 중요성',
        'KOR-238': '현대 사회와 기술',
        'KOR-235': '고전 문학의 이해',
        'ENG-1200': 'serendipity - 우연한 발견',
        'ENG-1199': 'eloquent - 웅변의',
        'ENG-1198': 'abundant - 풍부한',
        'ENG-1195': 'perseverance - 인내',
        'ENG-1192': 'meticulous - 꼼꼼한',
        'MATH-890': '이차방정식의 해',
        'MATH-885': '연립방정식',
        'MATH-878': '적분 계산',
        'MATH-877': '피타고라스 정리'
      };
      return titles[id] || '콘텐츠 제목';
    }
    
    function switchDetailTab(tabId) {
      document.querySelectorAll('.detail-tab-content').forEach(tab => tab.classList.add('hidden'));
      document.querySelectorAll('.detail-tab-btn').forEach(btn => {
        btn.classList.remove('border-super', 'text-super');
        btn.classList.add('border-transparent', 'text-text-secondary');
      });
      
      document.getElementById('detailTab-' + tabId).classList.remove('hidden');
      event.target.classList.add('border-super', 'text-super');
      event.target.classList.remove('border-transparent', 'text-text-secondary');
    }
    
    function editContent() {
      closeContentDetailModal();
      showToast('편집 모드로 전환합니다.', 'info');
    }
    
    function openReviewFromDetail() {
      closeContentDetailModal();
      openReviewModal(currentContent.id, currentContent.title);
    }
    
    // ========================================
    // Reprocess Modal
    // ========================================
    function reprocessAI() {
      document.getElementById('reprocessTarget').textContent = `${currentContent.id} - ${getContentTitle(currentContent.id)}`;
      document.getElementById('reprocessModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function openReprocessModal() {
      document.getElementById('reprocessTarget').textContent = `${currentContent.id} - ${getContentTitle(currentContent.id)}`;
      document.getElementById('reprocessModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeReprocessModal() {
      document.getElementById('reprocessModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function confirmReprocess() {
      closeReprocessModal();
      closeContentDetailModal();
      showToast(`${currentContent.id} AI 재처리가 시작되었습니다.`, 'info');
      
      setTimeout(() => {
        showToast(`${currentContent.id} AI 처리가 완료되었습니다.`, 'success');
      }, 3000);
    }
    
    // ========================================
    // Delete Content Modal
    // ========================================
    function openDeleteContentModal() {
      document.getElementById('deleteTarget').textContent = `${currentContent.id} - ${getContentTitle(currentContent.id)}`;
      document.getElementById('deleteConfirmCheck').checked = false;
      document.getElementById('confirmDeleteContentBtn').disabled = true;
      document.getElementById('deleteContentModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeDeleteContentModal() {
      document.getElementById('deleteContentModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function checkDeleteContentForm() {
      const checked = document.getElementById('deleteConfirmCheck').checked;
      document.getElementById('confirmDeleteContentBtn').disabled = !checked;
    }
    
    function confirmDeleteContent() {
      closeDeleteContentModal();
      showToast(`${currentContent.id} 콘텐츠가 삭제되었습니다.`, 'success');
    }
    
    // ========================================
    // File Upload Handling
    // ========================================
    function handleDragOver(e) {
      e.preventDefault();
      e.currentTarget.classList.add('dragover');
    }
    
    function handleDragLeave(e) {
      e.currentTarget.classList.remove('dragover');
    }
    
    function handleDrop(e) {
      e.preventDefault();
      e.currentTarget.classList.remove('dragover');
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        processFile(files[0]);
      }
    }
    
    function handleFileSelect(e) {
      const files = e.target.files;
      if (files.length > 0) {
        processFile(files[0]);
      }
    }
    
    function processFile(file) {
      if (file.name.endsWith('.csv')) {
        document.getElementById('uploadedFile').classList.remove('hidden');
        document.getElementById('fileName').textContent = file.name;
        document.getElementById('fileInfo').textContent = `${Math.round(file.size / 1024)} KB`;
        document.getElementById('uploadZone').classList.add('hidden');
      } else {
        showToast('CSV 파일만 업로드 가능합니다.', 'error');
      }
    }
    
    function removeFile() {
      document.getElementById('uploadedFile').classList.add('hidden');
      document.getElementById('uploadZone').classList.remove('hidden');
      document.getElementById('fileInput').value = '';
    }
    
    // ========================================
    // Upload Subject Selection
    // ========================================
    document.querySelectorAll('.upload-subject-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.upload-subject-btn').forEach(b => {
          b.classList.remove('border-korean', 'bg-korean-light', 'text-korean');
          b.classList.remove('border-english', 'bg-english-light', 'text-english');
          b.classList.remove('border-math', 'bg-math-light');
          b.classList.add('border-border-light', 'text-text-secondary');
        });
        
        const subject = this.dataset.subject;
        if (subject === 'korean') {
          this.classList.add('border-korean', 'bg-korean-light', 'text-korean');
        } else if (subject === 'english') {
          this.classList.add('border-english', 'bg-english-light', 'text-english');
        } else if (subject === 'math') {
          this.classList.add('border-math', 'bg-math-light');
          this.style.color = '#9A7B0A';
        }
        this.classList.remove('border-border-light', 'text-text-secondary');
      });
    });
    
    // ========================================
    // Keyboard Shortcuts
    // ========================================
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeUploadModal();
        closeReviewModal();
        closeContentDetailModal();
        closeReprocessModal();
        closeDeleteContentModal();
        closeEditContentModal();
        closeAiProgressModal();
        closeAiFailureModal();
        closeExportModal();
        closeBulkReviewModal();
        closeBulkReprocessModal();
        closeAiQueueModal();
        closeContentDropdown();
      }
    });
    
    // ========================================
    // 콘텐츠 편집 모달
    // ========================================
    let editingContent = {};
    
    function openEditContentModal(subject, contentId, title) {
      editingContent = { subject, contentId, title };
      
      // 과목별 아이콘 설정
      const iconContainer = document.getElementById('editSubjectIcon');
      const icons = {
        korean: { bg: 'bg-korean-light', icon: 'menu_book', color: 'text-korean' },
        english: { bg: 'bg-english-light', icon: 'translate', color: 'text-english' },
        math: { bg: 'bg-math-light', icon: 'calculate', color: 'text-math' }
      };
      
      const subjectInfo = icons[subject] || icons.korean;
      iconContainer.className = `w-10 h-10 rounded-xl ${subjectInfo.bg} flex items-center justify-center`;
      iconContainer.innerHTML = `<span class="material-icons-round ${subjectInfo.color}">${subjectInfo.icon}</span>`;
      
      document.getElementById('editContentId').textContent = contentId;
      document.getElementById('editTitle').value = title || '';
      
      document.getElementById('editContentModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeEditContentModal() {
      document.getElementById('editContentModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function previewEditContent() {
      showToast('미리보기를 준비 중입니다...', 'info');
    }
    
    function saveEditContent() {
      const regenAI = document.getElementById('editRegenAI').checked;
      closeEditContentModal();
      
      if (regenAI) {
        showToast(`${editingContent.contentId} 저장 완료. AI 재생성 중...`, 'info');
        setTimeout(() => {
          showToast(`${editingContent.contentId} AI 재생성 완료!`, 'success');
        }, 3000);
      } else {
        showToast(`${editingContent.contentId} 저장 완료!`, 'success');
      }
    }
    
    // ========================================
    // AI 처리 진행 모달
    // ========================================
    function openAiProgressModal(contentId, description) {
      document.getElementById('aiProgressTitle').textContent = contentId;
      document.getElementById('aiProgressDesc').textContent = description || 'AI 처리 진행 중';
      
      document.getElementById('aiProgressModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeAiProgressModal() {
      document.getElementById('aiProgressModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function cancelAiProcess() {
      closeAiProgressModal();
      showToast('AI 처리가 취소되었습니다.', 'warning');
    }
    
    // ========================================
    // AI 실패 모달
    // ========================================
    let failedContent = {};
    
    function openAiFailureModal(contentId, title, reason) {
      failedContent = { contentId, title, reason };
      
      document.getElementById('aiFailureId').textContent = contentId;
      document.getElementById('aiFailureTitle').textContent = title;
      document.getElementById('aiFailureReason').textContent = reason + ': 수식 구문이 올바르지 않습니다.';
      
      document.getElementById('aiFailureModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeAiFailureModal() {
      document.getElementById('aiFailureModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function openEditFromFailure() {
      closeAiFailureModal();
      openEditContentModal('math', failedContent.contentId, failedContent.title);
    }
    
    function retryFromFailureModal() {
      closeAiFailureModal();
      retryAiProcess(failedContent.contentId);
    }
    
    function retryAiProcess(contentId) {
      showToast(`${contentId} AI 재처리가 시작되었습니다.`, 'info');
      setTimeout(() => {
        showToast(`${contentId} AI 처리가 완료되었습니다.`, 'success');
      }, 3000);
    }
    
    // ========================================
    // 콘텐츠 내보내기 모달
    // ========================================
    function openExportModal() {
      document.getElementById('exportModal').classList.add('open');
      document.body.style.overflow = 'hidden';
      
      // 파일 형식 버튼 이벤트
      setupExportFormatButtons();
    }
    
    function closeExportModal() {
      document.getElementById('exportModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function setupExportFormatButtons() {
      document.querySelectorAll('.export-format-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.export-format-btn').forEach(b => {
            b.classList.remove('border-super', 'bg-super-light');
            b.classList.add('border-border-light');
            b.querySelector('.material-icons-round').classList.remove('text-super');
            b.querySelector('.material-icons-round').classList.add('text-text-secondary');
            b.querySelector('span:last-child').classList.remove('text-super');
            b.querySelector('span:last-child').classList.add('text-text-secondary');
          });
          
          this.classList.remove('border-border-light');
          this.classList.add('border-super', 'bg-super-light');
          this.querySelector('.material-icons-round').classList.remove('text-text-secondary');
          this.querySelector('.material-icons-round').classList.add('text-super');
          this.querySelector('span:last-child').classList.remove('text-text-secondary');
          this.querySelector('span:last-child').classList.add('text-super');
        });
      });
    }
    
    function downloadExport() {
      closeExportModal();
      showToast('콘텐츠 내보내기가 시작되었습니다.', 'info');
      setTimeout(() => {
        showToast('contents_export_20250108.csv 다운로드 완료!', 'success');
      }, 2000);
    }
    
    // ========================================
    // 일괄 검수 모달
    // ========================================
    function openBulkReviewModal() {
      document.getElementById('bulkReviewModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeBulkReviewModal() {
      document.getElementById('bulkReviewModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function filterBulkReview(subject) {
      // 필터 버튼 상태 업데이트
      document.querySelectorAll('.bulk-review-filter').forEach(btn => {
        if (btn.dataset.filter === subject) {
          btn.classList.remove('border', 'border-border-light', 'hover:bg-gray-50');
          btn.classList.add('bg-planner', 'text-white');
        } else {
          btn.classList.add('border', 'border-border-light', 'hover:bg-gray-50');
          btn.classList.remove('bg-planner', 'text-white');
        }
      });
      
      // 콘텐츠 목록 필터링
      document.querySelectorAll('#bulkReviewModal [data-subject]').forEach(item => {
        if (subject === 'all' || item.dataset.subject === subject) {
          item.classList.remove('hidden');
        } else {
          item.classList.add('hidden');
        }
      });
    }
    
    function quickReviewApprove(contentId) {
      // 해당 항목을 목록에서 시각적으로 완료 처리
      event.stopPropagation();
      const btn = event.target;
      btn.textContent = '승인됨';
      btn.classList.remove('bg-success', 'hover:bg-success/90');
      btn.classList.add('bg-gray-400', 'cursor-not-allowed');
      btn.disabled = true;
      
      showToast(`${contentId} 승인 완료!`, 'success');
    }
    
    function toggleBulkSelectAll() {
      const selectAll = document.getElementById('bulkSelectAll').checked;
      document.querySelectorAll('#bulkReviewModal input[type="checkbox"]:not(#bulkSelectAll)').forEach(cb => {
        cb.checked = selectAll;
      });
    }
    
    function bulkReviewApprove() {
      closeBulkReviewModal();
      showToast('선택한 콘텐츠가 모두 승인되었습니다.', 'success');
    }
    
    function bulkReviewReject() {
      closeBulkReviewModal();
      showToast('선택한 콘텐츠가 반려되었습니다.', 'warning');
    }
    
    // ========================================
    // 일괄 AI 재처리 모달
    // ========================================
    function openBulkReprocessModal() {
      document.getElementById('bulkReprocessModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeBulkReprocessModal() {
      document.getElementById('bulkReprocessModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function startBulkReprocess() {
      closeBulkReprocessModal();
      showToast('일괄 AI 재처리가 시작되었습니다. (2건)', 'info');
      setTimeout(() => {
        showToast('일괄 AI 재처리가 완료되었습니다!', 'success');
      }, 5000);
    }
    
    // ========================================
    // AI 대기열 모달
    // ========================================
    function openAiQueueModal(status, contentId) {
      document.getElementById('queueTitle').textContent = contentId;
      document.getElementById('aiQueueModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeAiQueueModal() {
      document.getElementById('aiQueueModal').classList.remove('open');
      document.body.style.overflow = '';
    }
    
    function cancelQueueItem() {
      closeAiQueueModal();
      showToast('대기열에서 제거되었습니다.', 'warning');
    }
    
    function prioritizeQueueItem() {
      closeAiQueueModal();
      showToast('우선 처리로 변경되었습니다.', 'success');
    }
    
    // ========================================
    // 콘텐츠 더보기 드롭다운
    // ========================================
    let currentDropdownContent = null;
    
    function toggleContentDropdown(event, contentId) {
      event.stopPropagation();
      const dropdown = document.getElementById('contentDropdown');
      
      if (dropdown.classList.contains('hidden') || currentDropdownContent !== contentId) {
        currentDropdownContent = contentId;
        currentContent.id = contentId;
        
        // 버튼 위치 계산
        const button = event.currentTarget;
        const rect = button.getBoundingClientRect();
        
        dropdown.style.top = (rect.bottom + 5) + 'px';
        dropdown.style.left = (rect.left - 100) + 'px';
        dropdown.classList.remove('hidden');
      } else {
        closeContentDropdown();
      }
    }
    
    function closeContentDropdown() {
      document.getElementById('contentDropdown').classList.add('hidden');
      currentDropdownContent = null;
    }
    
    // 외부 클릭 시 드롭다운 닫기
    document.addEventListener('click', function(e) {
      if (!e.target.closest('#contentDropdown') && !e.target.closest('[onclick*="toggleContentDropdown"]')) {
        closeContentDropdown();
      }
    });
    
    function viewContentHistory() {
      closeContentDropdown();
      showToast(`${currentContent.id} 수정 이력을 조회합니다.`, 'info');
    }
    
    function duplicateContent() {
      closeContentDropdown();
      showToast(`${currentContent.id} 복제 완료! 새 ID: ${currentContent.id.split('-')[0]}-NEW`, 'success');
    }
    
    function moveContent() {
      closeContentDropdown();
      showToast('콘텐츠 이동 기능은 준비 중입니다.', 'info');
    }
    
    function archiveContent() {
      closeContentDropdown();
      showToast(`${currentContent.id} 보관함으로 이동되었습니다.`, 'success');
    }
    
    function deleteContentFromDropdown() {
      closeContentDropdown();
      openDeleteContentModal();
    }
    
    // ========================================
    // 템플릿 다운로드
    // ========================================
    function downloadTemplate(subject) {
      const templates = {
        korean: 'korean_template.csv',
        english: 'english_template.csv',
        math: 'math_template.csv'
      };
      showToast(`${templates[subject]} 다운로드가 시작되었습니다.`, 'info');
    }
  </script>
  <!-- MAMA-ASST Common Modules -->
  <script src="../assets/js/common.js"></script>
  <script src="../assets/js/modal.js"></script>
  <script src="../assets/js/toast.js"></script>
  <script src="../assets/js/table.js"></script>
  <script src="../assets/js/chart-config.js"></script>

</body>
</html>
