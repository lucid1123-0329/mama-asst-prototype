<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í”Œë˜ë„ˆ | MAMA-ASST</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FF6D4D',
            'primary-light': '#FFF0ED',
            navy: '#1A2E4D',
            'navy-light': '#2C4872',
            planner: '#9C27B0',
            'planner-light': '#F3E5F5',
            'planner-dark': '#7B1FA2',
            korean: '#4285F4',
            'korean-light': '#E8F0FE',
            english: '#34A853',
            'english-light': '#E6F4EA',
            math: '#FBBC05',
            'math-light': '#FEF7E0',
            'math-dark': '#E5A800',
            background: '#F9FAFB',
            surface: '#FFFFFF',
            'border-light': '#E5E7EB',
            'text-primary': '#1F2937',
            'text-secondary': '#6B7280',
            'text-tertiary': '#9CA3AF',
            success: '#22C55E',
            'success-light': '#F0FDF4',
            error: '#EF4444',
            'error-light': '#FEF2F2',
            warning: '#F59E0B',
            'warning-light': '#FFFBEB',
          },
          fontFamily: { sans: ['Pretendard', 'Apple SD Gothic Neo', 'Malgun Gothic', 'sans-serif'] },
          boxShadow: {
            'card': '0 1px 3px rgba(0,0,0,0.08), 0 4px 12px rgba(0,0,0,0.04)',
          },
        },
      },
    }
  </script>
  
  <style>
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #D1D5DB; border-radius: 3px; }
    
    .nav-active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 70%;
      background: #FF6D4D;
      border-radius: 0 4px 4px 0;
    }
    
    @keyframes pulse-dot {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .pulse-dot { animation: pulse-dot 2s ease-in-out infinite; }
    
    @keyframes check-pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(1); }
    }
    .check-pop { animation: check-pop 0.3s ease-out; }
    
    @keyframes slide-up {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .slide-up { animation: slide-up 0.3s ease-out; }
    
    @keyframes confetti {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-100px) rotate(720deg); opacity: 0; }
    }
    
    .task-item { transition: all 0.2s ease; }
    .task-item:hover { background: #F9FAFB; }
    .task-item.completed .task-title { 
      text-decoration: line-through; 
      color: #9CA3AF;
    }
    
    .day-cell { 
      transition: all 0.15s ease;
      cursor: pointer;
    }
    .day-cell:hover:not(.selected) { background: #F3E5F5; }
    .day-cell.selected { 
      background: linear-gradient(135deg, #9C27B0 0%, #AB47BC 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
    }
    .day-cell.today:not(.selected) { 
      border: 2px solid #9C27B0;
      font-weight: 700;
    }
    .day-cell .task-dots {
      display: flex;
      gap: 2px;
      justify-content: center;
      margin-top: 4px;
    }
    
    .subject-korean { --subject-color: #4285F4; --subject-bg: #E8F0FE; }
    .subject-english { --subject-color: #34A853; --subject-bg: #E6F4EA; }
    .subject-math { --subject-color: #FBBC05; --subject-bg: #FEF7E0; }
    .subject-etc { --subject-color: #6B7280; --subject-bg: #F3F4F6; }
    
    .progress-ring {
      transform: rotate(-90deg);
    }
    .progress-ring-circle {
      transition: stroke-dashoffset 0.5s ease;
    }
  </style>
</head>
<body class="bg-background font-sans text-text-primary antialiased">
  
  <!-- Desktop Layout -->
  <div class="hidden lg:flex h-screen overflow-hidden">
    
    <!-- Sidebar -->
    <aside class="w-64 bg-navy flex flex-col flex-shrink-0">
      <div class="p-5 border-b border-white/10">
        <a href="student-dashboard.html" class="flex items-center gap-3">
          <div class="w-10 h-10 bg-primary rounded-xl flex items-center justify-center shadow-lg">
            <span class="text-white font-bold text-lg">M</span>
          </div>
          <div>
            <span class="text-white font-bold text-lg tracking-tight">MAMA-ASST</span>
            <span class="block text-white/50 text-[10px] tracking-wider">MATCHING & MANAGEMENT</span>
          </div>
        </a>
      </div>
      
      <a href="mypage.html" class="p-5 border-b border-white/10 flex items-center gap-3 hover:bg-white/5 transition-colors">
        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-primary to-orange-300 p-0.5">
          <div class="w-full h-full rounded-full bg-navy overflow-hidden">
            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=jimin&backgroundColor=ffdfbf" alt="í”„ë¡œí•„" class="w-full h-full object-cover">
          </div>
        </div>
        <div class="flex-1 min-w-0">
          <p class="text-white font-semibold truncate">ê¹€ì§€ë¯¼</p>
          <p class="text-white/50 text-xs">ì¤‘í•™êµ 2í•™ë…„</p>
        </div>
      </a>
      
      <nav class="flex-1 p-4 space-y-1 overflow-y-auto">
        <a href="student-dashboard.html" class="flex items-center gap-3 px-4 py-3 text-white/60 hover:bg-white/5 hover:text-white rounded-xl transition-colors">
          <span class="material-icons-round">home</span>
          <span>í™ˆ</span>
        </a>
        <a href="subjects.html" class="flex items-center gap-3 px-4 py-3 text-white/60 hover:bg-white/5 hover:text-white rounded-xl transition-colors">
          <span class="material-icons-round">auto_stories</span>
          <span>ê³¼ëª©</span>
        </a>
        <a href="report.html" class="flex items-center gap-3 px-4 py-3 text-white/60 hover:bg-white/5 hover:text-white rounded-xl transition-colors">
          <span class="material-icons-round">insights</span>
          <span>ë¦¬í¬íŠ¸</span>
        </a>
        <a href="planner.html" class="nav-active relative flex items-center gap-3 px-4 py-3 bg-white/10 text-white rounded-xl font-medium">
          <span class="material-icons-round text-planner">event_note</span>
          <span>í”Œë˜ë„ˆ</span>
        </a>
      </nav>
      
      <div class="p-4 border-t border-white/10">
        <a href="settings.html" class="flex items-center gap-3 px-4 py-3 text-white/60 hover:bg-white/5 hover:text-white rounded-xl transition-colors">
          <span class="material-icons-round">settings</span>
          <span>ì„¤ì •</span>
        </a>
      </div>
    </aside>
    
    <!-- Main Content -->
    <main class="flex-1 flex flex-col min-w-0 overflow-hidden">
      <!-- Top Bar -->
      <header class="h-16 bg-surface border-b border-border-light flex items-center justify-between px-6 flex-shrink-0">
        <div class="flex items-center gap-2 text-sm">
          <a href="student-dashboard.html" class="text-text-tertiary hover:text-primary transition-colors">í™ˆ</a>
          <span class="material-icons-round text-text-tertiary text-sm">chevron_right</span>
          <span class="text-planner font-medium">í”Œë˜ë„ˆ</span>
        </div>
        
        <div class="flex items-center gap-3">
          <button id="addTaskBtn" onclick="openAddTaskModal()" class="hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2">
            <span class="material-icons-round text-lg">add</span>
            í• ì¼ ì¶”ê°€
          </button>
          <a href="notifications.html" class="relative p-2 text-text-secondary hover:text-text-primary hover:bg-background rounded-lg transition-colors">
            <span class="material-icons-round">notifications</span>
            <span class="absolute top-1.5 right-1.5 w-2 h-2 bg-error rounded-full pulse-dot"></span>
          </a>
        </div>
      </header>
      
      <!-- Content Area -->
      <div class="flex-1 overflow-y-auto p-6">
        <div class="max-w-6xl mx-auto">
          
          <!-- Mode Toggle -->
          <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-2 bg-surface rounded-xl p-1 shadow-card border border-border-light">
              <button onclick="switchMode('habit')" id="habitModeBtn" class="mode-btn px-5 py-2.5 rounded-lg font-medium text-sm transition-all bg-planner text-white shadow-md">
                <span class="flex items-center gap-2">
                  <span class="material-icons-round text-lg">emoji_events</span>
                  ìŠµê´€ í˜•ì„± ëª¨ë“œ
                </span>
              </button>
              <button onclick="switchMode('normal')" id="normalModeBtn" class="mode-btn px-5 py-2.5 rounded-lg font-medium text-sm transition-all text-text-secondary hover:bg-gray-100">
                <span class="flex items-center gap-2">
                  <span class="material-icons-round text-lg">edit_calendar</span>
                  ì¼ë°˜ ëª¨ë“œ
                </span>
              </button>
            </div>
            <div id="modeDescription" class="text-sm text-text-secondary flex items-center gap-2">
              <span class="material-icons-round text-planner text-lg">info</span>
              <span>ê°•ì‚¬ê°€ ì„¤ì •í•œ ìŠµê´€ì„ ë§¤ì¼ ì‹¤ì²œí•˜ê³  í‰ê°€ë¥¼ ê¸°ë¡í•´ìš”</span>
            </div>
          </div>
          
          <!-- Stats Header (Habit Mode) -->
          <section id="habitStatsHeader" class="bg-gradient-to-r from-planner to-purple-400 rounded-2xl p-6 text-white mb-6 relative overflow-hidden">
            <div class="absolute -right-8 -top-8 w-32 h-32 bg-white/10 rounded-full"></div>
            <div class="absolute -right-4 -bottom-4 w-20 h-20 bg-white/10 rounded-full"></div>
            <div class="relative z-10">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                  <div class="w-14 h-14 rounded-xl bg-white/20 backdrop-blur flex items-center justify-center">
                    <span class="material-icons-round text-3xl">emoji_events</span>
                  </div>
                  <div>
                    <h1 class="text-xl font-bold">ìŠµê´€ í˜•ì„± í”Œë˜ë„ˆ</h1>
                    <p class="text-sm text-white/80">ê¾¸ì¤€í•¨ì´ ì‹¤ë ¥ì´ ë©ë‹ˆë‹¤!</p>
                  </div>
                </div>
                <div class="flex items-center gap-8">
                  <div class="text-center">
                    <div class="text-3xl font-bold flex items-center gap-1">
                      12 <span class="material-icons-round text-orange-300 text-2xl">local_fire_department</span>
                    </div>
                    <div class="text-xs text-white/70">ì—°ì† ë‹¬ì„±ì¼</div>
                  </div>
                  <div class="text-center">
                    <div class="text-3xl font-bold">5/6</div>
                    <div class="text-xs text-white/70">ì˜¤ëŠ˜ ìŠµê´€</div>
                  </div>
                  <div class="text-center">
                    <div class="relative w-16 h-16">
                      <svg class="progress-ring w-full h-full" viewBox="0 0 36 36">
                        <path class="text-white/20" stroke="currentColor" stroke-width="3" fill="none"
                              d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <path class="progress-ring-circle text-white" stroke="currentColor" stroke-width="3" fill="none"
                              stroke-dasharray="83, 100"
                              d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                      </svg>
                      <div class="absolute inset-0 flex items-center justify-center">
                        <span class="text-sm font-bold">83%</span>
                      </div>
                    </div>
                    <div class="text-xs text-white/70 mt-1">ì´ë²ˆ ì£¼</div>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- Stats Header (Normal Mode) - Hidden by default -->
          <section id="normalStatsHeader" class="hidden bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl p-6 text-white mb-6 relative overflow-hidden">
            <div class="absolute -right-8 -top-8 w-32 h-32 bg-white/10 rounded-full"></div>
            <div class="absolute -right-4 -bottom-4 w-20 h-20 bg-white/10 rounded-full"></div>
            <div class="relative z-10">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                  <div class="w-14 h-14 rounded-xl bg-white/20 backdrop-blur flex items-center justify-center">
                    <span class="material-icons-round text-3xl">event_available</span>
                  </div>
                  <div>
                    <h1 class="text-xl font-bold">ë‚˜ì˜ í”Œë˜ë„ˆ</h1>
                    <p class="text-sm text-white/80">2025ë…„ 1ì›” ì²«ì§¸ ì£¼</p>
                  </div>
                </div>
                <div class="flex items-center gap-8">
                  <div class="text-center">
                    <div class="text-3xl font-bold">14</div>
                    <div class="text-xs text-white/70">ì™„ë£Œ</div>
                  </div>
                  <div class="text-center">
                    <div class="text-3xl font-bold">5</div>
                    <div class="text-xs text-white/70">ë‚¨ì€ í• ì¼</div>
                  </div>
                  <div class="text-center">
                    <div class="relative w-16 h-16">
                      <svg class="progress-ring w-full h-full" viewBox="0 0 36 36">
                        <path class="text-white/20" stroke="currentColor" stroke-width="3" fill="none"
                              d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <path class="progress-ring-circle text-white" stroke="currentColor" stroke-width="3" fill="none"
                              stroke-dasharray="74, 100"
                              d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                      </svg>
                      <div class="absolute inset-0 flex items-center justify-center">
                        <span class="text-sm font-bold">74%</span>
                      </div>
                    </div>
                    <div class="text-xs text-white/70 mt-1">ë‹¬ì„±ë¥ </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- Instructor Comment (Habit Mode) -->
          <section id="habitInstructorComment" class="bg-surface rounded-2xl shadow-card border-l-4 border-planner p-5 mb-6">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-full bg-gradient-to-br from-planner to-purple-300 p-0.5 flex-shrink-0">
                <div class="w-full h-full rounded-full bg-surface overflow-hidden">
                  <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=teacher1&backgroundColor=ffd5dc" alt="ê°•ì‚¬" class="w-full h-full object-cover">
                </div>
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2 mb-1">
                  <span class="font-bold text-text-primary">ê¹€ë‹´ì„ ì„ ìƒë‹˜</span>
                  <span class="text-xs text-text-tertiary">Â· ì–´ì œ í”¼ë“œë°±</span>
                </div>
                <p class="text-sm text-text-secondary leading-relaxed">
                  ì§€ë¯¼ì•„, 12ì¼ ì—°ì† ìŠµê´€ì„ ë‹¬ì„±í•˜ê³  ìˆì–´ìš”! ğŸ”¥ ì •ë§ ëŒ€ë‹¨í•´ìš”!
                  <strong class="text-planner">ì•„ì¹¨ ì˜ì–´ ë‹¨ì–´ ì•”ê¸°</strong>ê°€ íŠ¹íˆ ì˜ ë˜ê³  ìˆë„¤ìš”.
                  ìˆ˜í•™ ë³µìŠµ ì‹œê°„ì„ ì¡°ê¸ˆë§Œ ë” ëŠ˜ë¦¬ë©´ ì™„ë²½í•  ê²ƒ ê°™ì•„ìš”!
                </p>
                <div class="flex items-center gap-3 mt-3">
                  <span class="inline-flex items-center gap-1 px-2 py-1 bg-success-light text-success text-xs font-medium rounded-lg">
                    <span class="material-icons-round text-sm">trending_up</span>
                    ë‹¬ì„±ë¥  ìƒìŠ¹ ì¤‘
                  </span>
                  <span class="inline-flex items-center gap-1 px-2 py-1 bg-planner-light text-planner text-xs font-medium rounded-lg">
                    <span class="material-icons-round text-sm">local_fire_department</span>
                    12ì¼ ì—°ì†!
                  </span>
                </div>
              </div>
            </div>
          </section>
          
          <!-- Instructor Comment (Normal Mode) - Hidden by default -->
          <section id="normalInstructorComment" class="hidden bg-surface rounded-2xl shadow-card border-l-4 border-blue-500 p-5 mb-6">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-indigo-300 p-0.5 flex-shrink-0">
                <div class="w-full h-full rounded-full bg-surface overflow-hidden">
                  <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=teacher1&backgroundColor=ffd5dc" alt="ê°•ì‚¬" class="w-full h-full object-cover">
                </div>
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2 mb-1">
                  <span class="font-bold text-text-primary">ê¹€ë‹´ì„ ì„ ìƒë‹˜</span>
                  <span class="text-xs text-text-tertiary">Â· ì˜¤ëŠ˜</span>
                </div>
                <p class="text-sm text-text-secondary leading-relaxed">
                  ì§€ë¯¼ì•„, ì´ë²ˆ ì£¼ í•™ìŠµ ëª©í‘œë¥¼ ì˜ ë‹¬ì„±í•˜ê³  ìˆì–´ìš”! ğŸ‘ 
                  <strong class="text-blue-600">ìˆ˜í•™ ê°•í™”í•™ìŠµ</strong>ì„ ì™„ë£Œí•˜ë©´ ë‹¤ìŒ ë‹¨ì›ìœ¼ë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆì–´ìš”.
                  êµ­ì–´ ìˆ™ì œ ë§ˆê°ì´ ë‚´ì¼ì´ë‹ˆê¹Œ ìŠì§€ ë§ê³  ì œì¶œí•´ì£¼ì„¸ìš”!
                </p>
                <div class="flex items-center gap-3 mt-3">
                  <span class="inline-flex items-center gap-1 px-2 py-1 bg-error-light text-error text-xs font-medium rounded-lg">
                    <span class="material-icons-round text-sm">assignment_late</span>
                    ìˆ™ì œ 3ê°œ
                  </span>
                  <span class="inline-flex items-center gap-1 px-2 py-1 bg-warning-light text-warning text-xs font-medium rounded-lg">
                    <span class="material-icons-round text-sm">schedule</span>
                    ë§ˆê° D-1
                  </span>
                </div>
              </div>
            </div>
          </section>
          
          <!-- ========== HABIT MODE CONTENT ========== -->
          <div id="habitModeContent">
            
            <div class="grid grid-cols-3 gap-6">
              
              <!-- Left: Today's Habits & Weekly Calendar -->
              <div class="col-span-2 space-y-6">
                
                <!-- Today's Habits -->
                <section class="bg-surface rounded-2xl shadow-card border border-border-light overflow-hidden">
                  <div class="p-5 border-b border-border-light bg-gradient-to-r from-planner-light to-purple-50">
                    <div class="flex items-center justify-between">
                      <h2 class="font-bold text-text-primary flex items-center gap-2">
                        <span class="material-icons-round text-planner">task_alt</span>
                        ì˜¤ëŠ˜ì˜ ìŠµê´€
                        <span class="text-sm font-normal text-text-secondary">Â· 1ì›” 2ì¼ ëª©ìš”ì¼</span>
                      </h2>
                      <div class="flex items-center gap-2">
                        <span class="text-success font-bold">5</span>
                        <span class="text-text-tertiary">/</span>
                        <span class="text-text-primary font-bold">6</span>
                        <span class="text-text-secondary text-sm">ì™„ë£Œ</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="divide-y divide-border-light" id="habitList">
                    <!-- Daily Habits -->
                    <div class="habit-item p-4 flex items-center gap-4 hover:bg-gray-50 transition-colors" data-habit="1">
                      <button onclick="toggleHabit(1)" class="habit-check w-7 h-7 rounded-full bg-success flex items-center justify-center flex-shrink-0 shadow-md">
                        <span class="material-icons-round text-white text-lg">check</span>
                      </button>
                      <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                          <span class="px-2 py-0.5 bg-english-light text-english text-[10px] font-bold rounded">ì˜ì–´</span>
                          <span class="px-2 py-0.5 bg-planner-light text-planner text-[10px] font-bold rounded">ë§¤ì¼</span>
                          <span class="text-[10px] text-text-tertiary">08:00</span>
                        </div>
                        <p class="font-medium text-text-primary line-through opacity-60">ì•„ì¹¨ ì˜ì–´ ë‹¨ì–´ 10ê°œ ì•”ê¸°</p>
                      </div>
                      <div class="text-right">
                        <div class="text-xs text-success font-medium">ì™„ë£Œ!</div>
                        <div class="text-[10px] text-text-tertiary">08:23</div>
                      </div>
                    </div>
                    
                    <div class="habit-item p-4 flex items-center gap-4 hover:bg-gray-50 transition-colors" data-habit="2">
                      <button onclick="toggleHabit(2)" class="habit-check w-7 h-7 rounded-full bg-success flex items-center justify-center flex-shrink-0 shadow-md">
                        <span class="material-icons-round text-white text-lg">check</span>
                      </button>
                      <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                          <span class="px-2 py-0.5 bg-korean-light text-korean text-[10px] font-bold rounded">êµ­ì–´</span>
                          <span class="px-2 py-0.5 bg-planner-light text-planner text-[10px] font-bold rounded">ë§¤ì¼</span>
                          <span class="text-[10px] text-text-tertiary">14:00</span>
                        </div>
                        <p class="font-medium text-text-primary line-through opacity-60">êµ­ì–´ ì§€ë¬¸ 1ê°œ ë…í•´</p>
                      </div>
                      <div class="text-right">
                        <div class="text-xs text-success font-medium">ì™„ë£Œ!</div>
                        <div class="text-[10px] text-text-tertiary">14:15</div>
                      </div>
                    </div>
                    
                    <div class="habit-item p-4 flex items-center gap-4 hover:bg-gray-50 transition-colors" data-habit="3">
                      <button onclick="toggleHabit(3)" class="habit-check w-7 h-7 rounded-full bg-success flex items-center justify-center flex-shrink-0 shadow-md">
                        <span class="material-icons-round text-white text-lg">check</span>
                      </button>
                      <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                          <span class="px-2 py-0.5 bg-math-light text-math-dark text-[10px] font-bold rounded">ìˆ˜í•™</span>
                          <span class="px-2 py-0.5 bg-planner-light text-planner text-[10px] font-bold rounded">ë§¤ì¼</span>
                          <span class="text-[10px] text-text-tertiary">15:00</span>
                        </div>
                        <p class="font-medium text-text-primary line-through opacity-60">ìˆ˜í•™ ë¬¸ì œ 5ê°œ í’€ê¸°</p>
                      </div>
                      <div class="text-right">
                        <div class="text-xs text-success font-medium">ì™„ë£Œ!</div>
                        <div class="text-[10px] text-text-tertiary">15:42</div>
                      </div>
                    </div>
                    
                    <div class="habit-item p-4 flex items-center gap-4 hover:bg-gray-50 transition-colors" data-habit="4">
                      <button onclick="toggleHabit(4)" class="habit-check w-7 h-7 rounded-full bg-success flex items-center justify-center flex-shrink-0 shadow-md">
                        <span class="material-icons-round text-white text-lg">check</span>
                      </button>
                      <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                          <span class="px-2 py-0.5 bg-gray-100 text-gray-600 text-[10px] font-bold rounded">ê¸°íƒ€</span>
                          <span class="px-2 py-0.5 bg-planner-light text-planner text-[10px] font-bold rounded">ë§¤ì¼</span>
                          <span class="text-[10px] text-text-tertiary">16:00</span>
                        </div>
                        <p class="font-medium text-text-primary line-through opacity-60">ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© ì •ë¦¬</p>
                      </div>
                      <div class="text-right">
                        <div class="text-xs text-success font-medium">ì™„ë£Œ!</div>
                        <div class="text-[10px] text-text-tertiary">16:20</div>
                      </div>
                    </div>
                    
                    <div class="habit-item p-4 flex items-center gap-4 hover:bg-gray-50 transition-colors" data-habit="5">
                      <button onclick="toggleHabit(5)" class="habit-check w-7 h-7 rounded-full bg-success flex items-center justify-center flex-shrink-0 shadow-md">
                        <span class="material-icons-round text-white text-lg">check</span>
                      </button>
                      <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                          <span class="px-2 py-0.5 bg-english-light text-english text-[10px] font-bold rounded">ì˜ì–´</span>
                          <span class="px-2 py-0.5 bg-blue-100 text-blue-600 text-[10px] font-bold rounded">ë§¤ì£¼ ëª©</span>
                          <span class="text-[10px] text-text-tertiary">17:00</span>
                        </div>
                        <p class="font-medium text-text-primary line-through opacity-60">ì˜ì–´ 7ì´ˆ ë°œí™” í…ŒìŠ¤íŠ¸ 20ë¬¸ì œ</p>
                      </div>
                      <div class="text-right">
                        <div class="text-xs text-success font-medium">ì™„ë£Œ!</div>
                        <div class="text-[10px] text-text-tertiary">17:35</div>
                      </div>
                    </div>
                    
                    <div class="habit-item p-4 flex items-center gap-4 bg-planner-light/30 border-l-4 border-planner" data-habit="6">
                      <button onclick="toggleHabit(6)" class="habit-check w-7 h-7 rounded-full border-2 border-planner bg-white flex items-center justify-center flex-shrink-0 hover:bg-planner-light transition-colors">
                      </button>
                      <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                          <span class="px-2 py-0.5 bg-math-light text-math-dark text-[10px] font-bold rounded">ìˆ˜í•™</span>
                          <span class="px-2 py-0.5 bg-planner-light text-planner text-[10px] font-bold rounded">ë§¤ì¼</span>
                          <span class="text-[10px] text-text-tertiary">20:00</span>
                        </div>
                        <p class="font-medium text-text-primary">ì˜¤ëŠ˜ í‹€ë¦° ë¬¸ì œ ë³µìŠµ</p>
                      </div>
                      <div class="text-right">
                        <div class="text-xs text-planner font-medium">ì§„í–‰ ì „</div>
                        <div class="text-[10px] text-text-tertiary">ì˜ˆì •</div>
                      </div>
                    </div>
                  </div>
                </section>
                
                <!-- Weekly Habit Calendar -->
                <section class="bg-surface rounded-2xl shadow-card border border-border-light p-5">
                  <h3 class="font-bold text-text-primary mb-4 flex items-center gap-2">
                    <span class="material-icons-round text-planner">date_range</span>
                    ì´ë²ˆ ì£¼ ë‹¬ì„± í˜„í™©
                  </h3>
                  
                  <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                      <thead>
                        <tr class="text-text-tertiary">
                          <th class="text-left py-2 font-medium">ìŠµê´€</th>
                          <th class="text-center py-2 w-10 font-medium">ì›”</th>
                          <th class="text-center py-2 w-10 font-medium">í™”</th>
                          <th class="text-center py-2 w-10 font-medium">ìˆ˜</th>
                          <th class="text-center py-2 w-10 font-medium bg-planner-light rounded-t-lg text-planner">ëª©</th>
                          <th class="text-center py-2 w-10 font-medium text-text-tertiary/50">ê¸ˆ</th>
                          <th class="text-center py-2 w-10 font-medium text-text-tertiary/50">í† </th>
                          <th class="text-center py-2 w-10 font-medium text-text-tertiary/50">ì¼</th>
                          <th class="text-center py-2 w-16 font-medium">ë‹¬ì„±ë¥ </th>
                        </tr>
                      </thead>
                      <tbody class="divide-y divide-border-light">
                        <tr>
                          <td class="py-3">
                            <div class="flex items-center gap-2">
                              <span class="w-2 h-2 rounded-full bg-english"></span>
                              <span class="font-medium">ì•„ì¹¨ ì˜ë‹¨ì–´</span>
                            </div>
                          </td>
                          <td class="text-center"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center bg-planner-light"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center font-bold text-success">100%</td>
                        </tr>
                        <tr>
                          <td class="py-3">
                            <div class="flex items-center gap-2">
                              <span class="w-2 h-2 rounded-full bg-korean"></span>
                              <span class="font-medium">êµ­ì–´ ë…í•´</span>
                            </div>
                          </td>
                          <td class="text-center"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center"><span class="material-icons-round text-error text-lg">cancel</span></td>
                          <td class="text-center bg-planner-light"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center font-bold text-warning">75%</td>
                        </tr>
                        <tr>
                          <td class="py-3">
                            <div class="flex items-center gap-2">
                              <span class="w-2 h-2 rounded-full bg-math"></span>
                              <span class="font-medium">ìˆ˜í•™ ë¬¸ì œ</span>
                            </div>
                          </td>
                          <td class="text-center"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center bg-planner-light"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center font-bold text-success">100%</td>
                        </tr>
                        <tr>
                          <td class="py-3">
                            <div class="flex items-center gap-2">
                              <span class="w-2 h-2 rounded-full bg-math"></span>
                              <span class="font-medium">ì˜¤ë‹µ ë³µìŠµ</span>
                            </div>
                          </td>
                          <td class="text-center"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center"><span class="material-icons-round text-error text-lg">cancel</span></td>
                          <td class="text-center"><span class="material-icons-round text-success text-lg">check_circle</span></td>
                          <td class="text-center bg-planner-light"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center"><span class="material-icons-round text-gray-300 text-lg">radio_button_unchecked</span></td>
                          <td class="text-center font-bold text-warning">67%</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </section>
                
              </div>
              
              <!-- Right Sidebar (Habit Mode) -->
              <div class="space-y-6">
                
                <!-- Daily Self Evaluation -->
                <section class="bg-surface rounded-2xl shadow-card border border-border-light overflow-hidden">
                  <div class="p-4 border-b border-border-light bg-gradient-to-r from-yellow-50 to-orange-50">
                    <h3 class="font-bold text-text-primary flex items-center gap-2">
                      <span class="material-icons-round text-warning">rate_review</span>
                      ì˜¤ëŠ˜ì˜ ìê¸°í‰ê°€
                    </h3>
                  </div>
                  
                  <div class="p-4 space-y-4">
                    <div>
                      <label class="block text-sm font-medium text-text-primary mb-2">ì˜¤ëŠ˜ í•™ìŠµì€ ì–´ë• ë‚˜ìš”?</label>
                      <div class="flex gap-2">
                        <button onclick="selectMood('great')" class="mood-btn flex-1 p-3 border-2 border-border-light rounded-xl hover:border-success hover:bg-success-light transition-all text-center" data-mood="great">
                          <div class="text-2xl mb-1">ğŸ˜„</div>
                          <div class="text-xs text-text-secondary">ì•„ì£¼ ì¢‹ìŒ</div>
                        </button>
                        <button onclick="selectMood('good')" class="mood-btn flex-1 p-3 border-2 border-border-light rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center" data-mood="good">
                          <div class="text-2xl mb-1">ğŸ™‚</div>
                          <div class="text-xs text-text-secondary">ì¢‹ìŒ</div>
                        </button>
                        <button onclick="selectMood('soso')" class="mood-btn flex-1 p-3 border-2 border-border-light rounded-xl hover:border-warning hover:bg-warning-light transition-all text-center" data-mood="soso">
                          <div class="text-2xl mb-1">ğŸ˜</div>
                          <div class="text-xs text-text-secondary">ë³´í†µ</div>
                        </button>
                        <button onclick="selectMood('bad')" class="mood-btn flex-1 p-3 border-2 border-border-light rounded-xl hover:border-error hover:bg-error-light transition-all text-center" data-mood="bad">
                          <div class="text-2xl mb-1">ğŸ˜”</div>
                          <div class="text-xs text-text-secondary">ì–´ë ¤ì›€</div>
                        </button>
                      </div>
                    </div>
                    
                    <div>
                      <label class="block text-sm font-medium text-text-primary mb-2">ì˜¤ëŠ˜ í˜ë“¤ì—ˆë˜ ì  (ì„ íƒ)</label>
                      <textarea id="dailyReflection" rows="3" placeholder="ì˜¤ëŠ˜ ì–´ë ¤ì› ë˜ ë¶€ë¶„ì´ë‚˜ ì„ ìƒë‹˜ê»˜ í•˜ê³  ì‹¶ì€ ë§ì„ ì ì–´ì£¼ì„¸ìš”" 
                                class="w-full px-3 py-2 border border-border-light rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-planner/30 focus:border-planner resize-none"></textarea>
                    </div>
                    
                    <button onclick="submitDailyEvaluation()" class="w-full py-2.5 bg-planner hover:bg-planner-dark text-white font-medium rounded-xl transition-colors">
                      í‰ê°€ ì œì¶œí•˜ê¸°
                    </button>
                  </div>
                </section>
                
                <!-- Instructor Recent Feedback -->
                <section class="bg-surface rounded-2xl shadow-card border border-border-light overflow-hidden">
                  <div class="p-4 border-b border-border-light">
                    <h3 class="font-bold text-text-primary flex items-center gap-2">
                      <span class="material-icons-round text-planner text-lg">forum</span>
                      ìµœê·¼ í”¼ë“œë°±
                    </h3>
                  </div>
                  
                  <div class="divide-y divide-border-light max-h-64 overflow-y-auto">
                    <div class="p-4 bg-planner-light/30">
                      <div class="flex items-center gap-2 mb-2">
                        <span class="text-xs text-text-tertiary">ì–´ì œ</span>
                        <span class="px-2 py-0.5 bg-success text-white text-[10px] font-bold rounded">ì¹­ì°¬</span>
                      </div>
                      <p class="text-sm text-text-secondary">12ì¼ ì—°ì† ë‹¬ì„± ì¤‘! ì •ë§ ëŒ€ë‹¨í•´ìš”. ì´ í˜ì´ìŠ¤ ìœ ì§€í•˜ë©´ ëª©í‘œ ë‹¬ì„± í™•ì‹¤í•´ìš”! ğŸ’ª</p>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center gap-2 mb-2">
                        <span class="text-xs text-text-tertiary">3ì¼ ì „</span>
                        <span class="px-2 py-0.5 bg-warning text-white text-[10px] font-bold rounded">ì¡°ì–¸</span>
                      </div>
                      <p class="text-sm text-text-secondary">êµ­ì–´ ë…í•´ ì‹œê°„ì„ ì¡°ê¸ˆ ë” ëŠ˜ë ¤ë³´ì„¸ìš”. 15ë¶„ â†’ 20ë¶„ ì •ë„ë©´ ì¢‹ì„ ê²ƒ ê°™ì•„ìš”.</p>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center gap-2 mb-2">
                        <span class="text-xs text-text-tertiary">1ì£¼ ì „</span>
                        <span class="px-2 py-0.5 bg-blue-500 text-white text-[10px] font-bold rounded">ì•ˆë‚´</span>
                      </div>
                      <p class="text-sm text-text-secondary">ë‹¤ìŒ ì£¼ë¶€í„° ì˜ì–´ ë°œí™” í…ŒìŠ¤íŠ¸ê°€ ì£¼ 2íšŒë¡œ ëŠ˜ì–´ë‚©ë‹ˆë‹¤. í™”ëª© ê³ ì •ì´ì—ìš”!</p>
                    </div>
                  </div>
                </section>
                
                <!-- Habit Stats -->
                <section class="bg-gradient-to-br from-planner-light to-purple-100 rounded-2xl p-5 border border-planner/20">
                  <h3 class="font-bold text-planner mb-4 flex items-center gap-2">
                    <span class="material-icons-round">insights</span>
                    ë‚˜ì˜ ìŠµê´€ í†µê³„
                  </h3>
                  
                  <div class="space-y-3">
                    <div class="flex justify-between items-center">
                      <span class="text-sm text-text-secondary">ì´ë²ˆ ë‹¬ ë‹¬ì„±ë¥ </span>
                      <span class="font-bold text-planner">87%</span>
                    </div>
                    <div class="flex justify-between items-center">
                      <span class="text-sm text-text-secondary">ìµœì¥ ì—°ì† ê¸°ë¡</span>
                      <span class="font-bold text-planner">18ì¼</span>
                    </div>
                    <div class="flex justify-between items-center">
                      <span class="text-sm text-text-secondary">ì™„ë²½í•œ ë‚ </span>
                      <span class="font-bold text-planner">22ì¼</span>
                    </div>
                  </div>
                  
                  <div class="mt-4 pt-4 border-t border-planner/20">
                    <div class="text-center">
                      <div class="text-3xl mb-1">ğŸ†</div>
                      <div class="text-sm font-medium text-planner">ìŠµê´€ ë§ˆìŠ¤í„° ë ˆë²¨ 3</div>
                      <div class="text-xs text-text-tertiary">ë‹¤ìŒ ë ˆë²¨ê¹Œì§€ 8ì¼</div>
                    </div>
                  </div>
                </section>
                
              </div>
              
            </div>
            
          </div>
          <!-- ========== END HABIT MODE CONTENT ========== -->
          
          <!-- ========== NORMAL MODE CONTENT ========== -->
          <div id="normalModeContent" class="hidden">
          
          <div class="grid grid-cols-3 gap-6">
                
                <div id="taskList" class="divide-y divide-border-light"></div>
                
                <!-- Empty State -->
                <div id="emptyState" class="hidden p-12 text-center">
                  <div class="w-20 h-20 mx-auto mb-4 bg-planner-light rounded-full flex items-center justify-center">
                    <span class="material-icons-round text-planner text-4xl">event_available</span>
                  </div>
                  <h3 class="font-bold text-text-primary mb-2">í• ì¼ì´ ì—†ì–´ìš”!</h3>
                  <p class="text-text-secondary text-sm mb-4">ìƒˆë¡œìš´ í• ì¼ì„ ì¶”ê°€í•´ë³´ì„¸ìš”</p>
                  <button onclick="openAddTaskModal()" class="px-6 py-2 bg-planner text-white font-medium rounded-lg hover:bg-planner-dark transition-colors">
                    + í• ì¼ ì¶”ê°€
                  </button>
                </div>
              </section>
              
            </div>
            
            <!-- Right: Sidebar -->
            <div class="space-y-6">
              
              <!-- ğŸ¯ Direct Content Assignments (ê°•ì‚¬ ì§ì ‘ ì§€ì • ì½˜í…ì¸ ) -->
              <section class="bg-surface rounded-2xl shadow-card border-2 border-primary overflow-hidden">
                <div class="p-4 border-b border-primary/20 bg-primary-light">
                  <h3 class="font-bold text-primary flex items-center gap-2">
                    <span class="material-icons-round">assignment_ind</span>
                    ê°•ì‚¬ ì§€ì • ì½˜í…ì¸ 
                    <span class="px-2 py-0.5 bg-primary text-white text-xs font-bold rounded-full">í•„ìˆ˜</span>
                    <span class="px-2 py-0.5 bg-primary text-white text-xs font-bold rounded-full ml-auto">5</span>
                  </h3>
                </div>
                
                <div class="p-4 space-y-3">
                  <!-- Korean Direct Content -->
                  <div class="p-3 bg-primary-light/30 rounded-xl border border-primary/20">
                    <div class="flex items-center justify-between mb-2">
                      <div class="flex items-center gap-2">
                        <span class="px-2 py-0.5 bg-korean text-white text-[10px] font-bold rounded">êµ­ì–´</span>
                        <span class="text-xs text-text-tertiary">ë°•êµ­ì–´ ì„ ìƒë‹˜</span>
                      </div>
                      <span class="px-2 py-0.5 bg-error text-white text-[10px] font-bold rounded">D-1</span>
                    </div>
                    <div class="space-y-2">
                      <a href="subject-korean.html" class="flex items-center gap-2 p-2 bg-white rounded-lg hover:bg-gray-50 transition-colors">
                        <span class="w-6 h-6 rounded bg-success flex items-center justify-center">
                          <span class="material-icons-round text-white text-sm">check</span>
                        </span>
                        <div class="flex-1">
                          <p class="text-sm font-medium text-text-primary">ë””ì§€í„¸ ì‹œëŒ€ì˜ ë…ì„œ</p>
                          <p class="text-xs text-text-tertiary">ë¹„ë¬¸í•™ Â· ì‚¬íšŒ/ë¬¸í™”</p>
                        </div>
                        <span class="text-xs text-success font-medium">ì™„ë£Œ</span>
                      </a>
                      <a href="subject-korean.html" class="flex items-center gap-2 p-2 bg-white rounded-lg hover:bg-gray-50 transition-colors border border-primary/30">
                        <span class="w-6 h-6 rounded bg-primary flex items-center justify-center">
                          <span class="material-icons-round text-white text-sm">play_arrow</span>
                        </span>
                        <div class="flex-1">
                          <p class="text-sm font-medium text-text-primary">í•œê¸€ì˜ ê³¼í•™ì  ìš°ìˆ˜ì„±</p>
                          <p class="text-xs text-text-tertiary">ë¹„ë¬¸í•™ Â· ì–¸ì–´</p>
                        </div>
                        <span class="text-xs text-primary font-medium">ì‹œì‘í•˜ê¸° â†’</span>
                      </a>
                    </div>
                  </div>
                  
                  <!-- Math Direct Content -->
                  <div class="p-3 bg-math-light/30 rounded-xl border border-math/20">
                    <div class="flex items-center justify-between mb-2">
                      <div class="flex items-center gap-2">
                        <span class="px-2 py-0.5 bg-math text-gray-900 text-[10px] font-bold rounded">ìˆ˜í•™</span>
                        <span class="text-xs text-text-tertiary">ê¹€ìˆ˜í•™ ì„ ìƒë‹˜</span>
                      </div>
                      <span class="px-2 py-0.5 bg-warning text-white text-[10px] font-bold rounded">D-3</span>
                    </div>
                    <div class="space-y-2">
                      <a href="subject-math.html" class="flex items-center gap-2 p-2 bg-white rounded-lg hover:bg-gray-50 transition-colors">
                        <span class="w-6 h-6 rounded bg-success flex items-center justify-center">
                          <span class="material-icons-round text-white text-sm">check</span>
                        </span>
                        <div class="flex-1">
                          <p class="text-sm font-medium text-text-primary">ì¼ì°¨ë°©ì •ì‹ - ê´„í˜¸ì •ë¦¬ #3</p>
                          <p class="text-xs text-text-tertiary">ë°©ì •ì‹ Â· ì¤‘</p>
                        </div>
                        <span class="text-xs text-success font-medium">ì™„ë£Œ</span>
                      </a>
                      <a href="subject-math.html" class="flex items-center gap-2 p-2 bg-white rounded-lg hover:bg-gray-50 transition-colors border border-math/30">
                        <span class="w-6 h-6 rounded bg-math flex items-center justify-center">
                          <span class="material-icons-round text-gray-900 text-sm">play_arrow</span>
                        </span>
                        <div class="flex-1">
                          <p class="text-sm font-medium text-text-primary">ì¼ì°¨ë°©ì •ì‹ - ê³„ìˆ˜ë¶„ìˆ˜ #5</p>
                          <p class="text-xs text-text-tertiary">ë°©ì •ì‹ Â· ìƒ</p>
                        </div>
                        <span class="text-xs text-math-dark font-medium">ì§„í–‰ì¤‘</span>
                      </a>
                      <div class="flex items-center gap-2 p-2 bg-gray-50 rounded-lg opacity-70">
                        <span class="w-6 h-6 rounded bg-gray-300 flex items-center justify-center">
                          <span class="text-gray-500 text-xs font-bold">3</span>
                        </span>
                        <div class="flex-1">
                          <p class="text-sm font-medium text-text-tertiary">ì¼ì°¨ë°©ì •ì‹ - ë³µí•©ë¬¸ì œ #7</p>
                          <p class="text-xs text-text-tertiary">ë°©ì •ì‹ Â· ìƒ</p>
                        </div>
                        <span class="text-xs text-text-tertiary">ëŒ€ê¸°</span>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
              
              <!-- ğŸ“‹ General Homework Section (ì¼ë°˜ ìˆ™ì œ) -->
              <section class="bg-surface rounded-2xl shadow-card border border-border-light overflow-hidden">
                <div class="p-4 border-b border-border-light bg-gray-50">
                  <h3 class="font-bold text-text-primary flex items-center gap-2">
                    <span class="material-icons-round text-text-secondary">assignment</span>
                    ì¼ë°˜ ìˆ™ì œ
                    <span class="px-2 py-0.5 bg-gray-400 text-white text-xs font-bold rounded-full ml-auto">2</span>
                  </h3>
                </div>
                
                <div class="p-4 space-y-3" id="homeworkList">
                  <div class="p-3 bg-gray-50 rounded-xl border-l-4 border-korean hover:shadow-md transition-shadow cursor-pointer">
                    <div class="flex items-center justify-between mb-1">
                      <span class="px-2 py-0.5 bg-korean-light text-korean text-[10px] font-bold rounded">êµ­ì–´</span>
                      <span class="px-2 py-0.5 bg-warning text-white text-[10px] font-bold rounded">D-3</span>
                    </div>
                    <p class="text-sm font-medium text-text-primary mb-1">ë¬¸í•™ ì‘í’ˆ ê°ìƒë¬¸ ì œì¶œ</p>
                    <p class="text-xs text-text-tertiary">ë°•êµ­ì–´ ì„ ìƒë‹˜ Â· ê¸ˆìš”ì¼ê¹Œì§€</p>
                  </div>
                  
                  <div class="p-3 bg-gray-50 rounded-xl border-l-4 border-english hover:shadow-md transition-shadow cursor-pointer">
                    <div class="flex items-center justify-between mb-1">
                      <span class="px-2 py-0.5 bg-english-light text-english text-[10px] font-bold rounded">ì˜ì–´</span>
                      <span class="px-2 py-0.5 bg-gray-400 text-white text-[10px] font-bold rounded">D-5</span>
                    </div>
                    <p class="text-sm font-medium text-text-primary mb-1">ë‹¨ì–´ì¥ Set 5 ì•”ê¸°</p>
                    <p class="text-xs text-text-tertiary">ì´ì˜ì–´ ì„ ìƒë‹˜ Â· ì¼ìš”ì¼ê¹Œì§€</p>
                  </div>
                </div>
              </section>
              
              <!-- Weekly Progress -->
              <section class="bg-surface rounded-2xl shadow-card border border-border-light p-5">
                <h3 class="font-bold text-text-primary mb-4 flex items-center gap-2">
                  <span class="material-icons-round text-planner text-lg">analytics</span>
                  ì´ë²ˆ ì£¼ í•™ìŠµ í˜„í™©
                </h3>
                
                <div class="space-y-4">
                  <div>
                    <div class="flex justify-between text-sm mb-1">
                      <span class="flex items-center gap-2">
                        <span class="w-3 h-3 rounded bg-korean"></span>
                        êµ­ì–´
                      </span>
                      <span class="font-medium">4/5</span>
                    </div>
                    <div class="w-full h-2 bg-korean-light rounded-full overflow-hidden">
                      <div class="h-full bg-korean rounded-full transition-all" style="width: 80%"></div>
                    </div>
                  </div>
                  
                  <div>
                    <div class="flex justify-between text-sm mb-1">
                      <span class="flex items-center gap-2">
                        <span class="w-3 h-3 rounded bg-english"></span>
                        ì˜ì–´
                      </span>
                      <span class="font-medium">3/4</span>
                    </div>
                    <div class="w-full h-2 bg-english-light rounded-full overflow-hidden">
                      <div class="h-full bg-english rounded-full transition-all" style="width: 75%"></div>
                    </div>
                  </div>
                  
                  <div>
                    <div class="flex justify-between text-sm mb-1">
                      <span class="flex items-center gap-2">
                        <span class="w-3 h-3 rounded bg-math"></span>
                        ìˆ˜í•™
                      </span>
                      <span class="font-medium">5/7</span>
                    </div>
                    <div class="w-full h-2 bg-math-light rounded-full overflow-hidden">
                      <div class="h-full bg-math rounded-full transition-all" style="width: 71%"></div>
                    </div>
                  </div>
                  
                  <div>
                    <div class="flex justify-between text-sm mb-1">
                      <span class="flex items-center gap-2">
                        <span class="w-3 h-3 rounded bg-gray-400"></span>
                        ê¸°íƒ€
                      </span>
                      <span class="font-medium">2/3</span>
                    </div>
                    <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                      <div class="h-full bg-gray-400 rounded-full transition-all" style="width: 66%"></div>
                    </div>
                  </div>
                </div>
                
                <div class="mt-4 pt-4 border-t border-border-light">
                  <div class="flex items-center justify-between text-sm">
                    <span class="text-text-secondary">ì—°ì† í•™ìŠµì¼</span>
                    <span class="font-bold text-planner flex items-center gap-1">
                      <span class="material-icons-round text-lg">local_fire_department</span>
                      7ì¼
                    </span>
                  </div>
                </div>
              </section>
              
              <!-- AI Recommendation -->
              <section class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-5 border border-blue-200">
                <div class="flex items-center gap-2 mb-3">
                  <span class="material-icons-round text-blue-600">psychology</span>
                  <h3 class="font-bold text-blue-600">AI ì¶”ì²œ</h3>
                </div>
                <p class="text-sm text-text-secondary mb-4">
                  ğŸ“Š ì˜¤ëŠ˜ <strong>ìˆ˜í•™ ê°•í™”í•™ìŠµ</strong>ì„ ë¨¼ì € í•˜ê³ , 
                  ì €ë…ì— êµ­ì–´ ìˆ™ì œë¥¼ ì™„ë£Œí•˜ë©´ ë‚´ì¼ ì—¬ìœ ìˆê²Œ ì˜ì–´ì— ì§‘ì¤‘í•  ìˆ˜ ìˆì–´ìš”!
                </p>
                <button class="w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-xl transition-colors flex items-center justify-center gap-2">
                  <span class="material-icons-round text-lg">auto_awesome</span>
                  ì¶”ì²œ ì¼ì • ì ìš©
                </button>
              </section>
              
            </div>
          </div>
          
          </div>
          <!-- ========== END NORMAL MODE CONTENT ========== -->
          
        </div>
      </div>
    </main>
  </div>
  
  <!-- Mobile Layout -->
  <div class="lg:hidden flex flex-col min-h-screen">
    <header id="mobileHeader" class="h-14 bg-planner flex items-center justify-between px-4 flex-shrink-0 sticky top-0 z-40">
      <a href="student-dashboard.html" class="p-2 -ml-2 text-white/80 hover:text-white rounded-lg">
        <span class="material-icons-round">arrow_back</span>
      </a>
      <span class="font-bold text-white" id="mobileHeaderTitle">ìŠµê´€ í”Œë˜ë„ˆ</span>
      <button id="mobileAddBtn" onclick="openAddTaskModal()" class="hidden p-2 -mr-2 text-white/80 hover:text-white rounded-lg">
        <span class="material-icons-round">add</span>
      </button>
      <button id="mobileInfoBtn" class="p-2 -mr-2 text-white/80 hover:text-white rounded-lg">
        <span class="material-icons-round">info_outline</span>
      </button>
    </header>
    
    <div class="flex-1 overflow-y-auto pb-20">
      
      <!-- Mobile Mode Toggle -->
      <div id="mobileStats" class="bg-planner px-4 pb-4">
        <div class="flex items-center justify-center gap-2 mb-4">
          <button onclick="switchMode('habit')" id="mobileHabitBtn" class="mobile-mode-btn px-4 py-1.5 rounded-full text-xs font-medium bg-white text-planner">
            ìŠµê´€ ëª¨ë“œ
          </button>
          <button onclick="switchMode('normal')" id="mobileNormalBtn" class="mobile-mode-btn px-4 py-1.5 rounded-full text-xs font-medium bg-white/20 text-white">
            ì¼ë°˜ ëª¨ë“œ
          </button>
        </div>
        
        <!-- Habit Mode Stats -->
        <div id="mobileHabitStats" class="flex items-center justify-around text-white text-center">
          <div>
            <div class="text-2xl font-bold flex items-center gap-1">
              12 <span class="material-icons-round text-orange-300 text-lg">local_fire_department</span>
            </div>
            <div class="text-xs text-white/70">ì—°ì†ì¼</div>
          </div>
          <div class="w-px h-10 bg-white/20"></div>
          <div>
            <div class="text-2xl font-bold">5/6</div>
            <div class="text-xs text-white/70">ì˜¤ëŠ˜ ìŠµê´€</div>
          </div>
          <div class="w-px h-10 bg-white/20"></div>
          <div>
            <div class="text-2xl font-bold">83%</div>
            <div class="text-xs text-white/70">ì´ë²ˆ ì£¼</div>
          </div>
        </div>
        
        <!-- Normal Mode Stats (hidden by default) -->
        <div id="mobileNormalStats" class="hidden flex items-center justify-around text-white text-center">
          <div>
            <div class="text-2xl font-bold">74%</div>
            <div class="text-xs text-white/70">ë‹¬ì„±ë¥ </div>
          </div>
          <div class="w-px h-10 bg-white/20"></div>
          <div>
            <div class="text-2xl font-bold">14</div>
            <div class="text-xs text-white/70">ì™„ë£Œ</div>
          </div>
          <div class="w-px h-10 bg-white/20"></div>
          <div>
            <div class="text-2xl font-bold">5</div>
            <div class="text-xs text-white/70">ë‚¨ì€ì¼</div>
          </div>
        </div>
      </div>
      
      <!-- ========== MOBILE HABIT MODE ========== -->
      <div id="mobileHabitContent" class="p-4 space-y-4">
        
        <!-- Today's Habits -->
        <section class="bg-surface rounded-xl shadow-card border border-border-light overflow-hidden">
          <div class="p-3 border-b border-border-light bg-gradient-to-r from-planner-light to-purple-50">
            <div class="flex items-center justify-between">
              <h3 class="font-bold text-text-primary text-sm flex items-center gap-2">
                <span class="material-icons-round text-planner text-lg">task_alt</span>
                ì˜¤ëŠ˜ì˜ ìŠµê´€
              </h3>
              <span class="text-xs"><span class="text-success font-bold">5</span>/<span class="font-bold">6</span></span>
            </div>
          </div>
          
          <div class="divide-y divide-border-light">
            <div class="p-3 flex items-center gap-3">
              <span class="w-6 h-6 rounded-full bg-success flex items-center justify-center flex-shrink-0">
                <span class="material-icons-round text-white text-sm">check</span>
              </span>
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-1 mb-0.5">
                  <span class="px-1.5 py-0.5 bg-english-light text-english text-[9px] font-bold rounded">ì˜ì–´</span>
                  <span class="px-1.5 py-0.5 bg-planner-light text-planner text-[9px] font-bold rounded">ë§¤ì¼</span>
                </div>
                <p class="text-sm font-medium text-text-primary line-through opacity-60 truncate">ì•„ì¹¨ ì˜ì–´ ë‹¨ì–´ 10ê°œ</p>
              </div>
              <span class="text-[10px] text-success">âœ“ 08:23</span>
            </div>
            
            <div class="p-3 flex items-center gap-3">
              <span class="w-6 h-6 rounded-full bg-success flex items-center justify-center flex-shrink-0">
                <span class="material-icons-round text-white text-sm">check</span>
              </span>
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-1 mb-0.5">
                  <span class="px-1.5 py-0.5 bg-korean-light text-korean text-[9px] font-bold rounded">êµ­ì–´</span>
                  <span class="px-1.5 py-0.5 bg-planner-light text-planner text-[9px] font-bold rounded">ë§¤ì¼</span>
                </div>
                <p class="text-sm font-medium text-text-primary line-through opacity-60 truncate">êµ­ì–´ ì§€ë¬¸ 1ê°œ ë…í•´</p>
              </div>
              <span class="text-[10px] text-success">âœ“ 14:15</span>
            </div>
            
            <div class="p-3 flex items-center gap-3">
              <span class="w-6 h-6 rounded-full bg-success flex items-center justify-center flex-shrink-0">
                <span class="material-icons-round text-white text-sm">check</span>
              </span>
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-1 mb-0.5">
                  <span class="px-1.5 py-0.5 bg-math-light text-math-dark text-[9px] font-bold rounded">ìˆ˜í•™</span>
                  <span class="px-1.5 py-0.5 bg-planner-light text-planner text-[9px] font-bold rounded">ë§¤ì¼</span>
                </div>
                <p class="text-sm font-medium text-text-primary line-through opacity-60 truncate">ìˆ˜í•™ ë¬¸ì œ 5ê°œ í’€ê¸°</p>
              </div>
              <span class="text-[10px] text-success">âœ“ 15:42</span>
            </div>
            
            <div class="p-3 flex items-center gap-3">
              <span class="w-6 h-6 rounded-full bg-success flex items-center justify-center flex-shrink-0">
                <span class="material-icons-round text-white text-sm">check</span>
              </span>
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-1 mb-0.5">
                  <span class="px-1.5 py-0.5 bg-gray-100 text-gray-600 text-[9px] font-bold rounded">ê¸°íƒ€</span>
                  <span class="px-1.5 py-0.5 bg-planner-light text-planner text-[9px] font-bold rounded">ë§¤ì¼</span>
                </div>
                <p class="text-sm font-medium text-text-primary line-through opacity-60 truncate">ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© ì •ë¦¬</p>
              </div>
              <span class="text-[10px] text-success">âœ“ 16:20</span>
            </div>
            
            <div class="p-3 flex items-center gap-3">
              <span class="w-6 h-6 rounded-full bg-success flex items-center justify-center flex-shrink-0">
                <span class="material-icons-round text-white text-sm">check</span>
              </span>
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-1 mb-0.5">
                  <span class="px-1.5 py-0.5 bg-english-light text-english text-[9px] font-bold rounded">ì˜ì–´</span>
                  <span class="px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded">ë§¤ì£¼ ëª©</span>
                </div>
                <p class="text-sm font-medium text-text-primary line-through opacity-60 truncate">ì˜ì–´ 7ì´ˆ ë°œí™” í…ŒìŠ¤íŠ¸ 20ë¬¸ì œ</p>
              </div>
              <span class="text-[10px] text-success">âœ“ 17:35</span>
            </div>
            
            <div class="p-3 flex items-center gap-3 bg-planner-light/30 border-l-4 border-planner">
              <span class="w-6 h-6 rounded-full border-2 border-planner bg-white flex-shrink-0"></span>
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-1 mb-0.5">
                  <span class="px-1.5 py-0.5 bg-math-light text-math-dark text-[9px] font-bold rounded">ìˆ˜í•™</span>
                  <span class="px-1.5 py-0.5 bg-planner-light text-planner text-[9px] font-bold rounded">ë§¤ì¼</span>
                </div>
                <p class="text-sm font-medium text-text-primary truncate">ì˜¤ëŠ˜ í‹€ë¦° ë¬¸ì œ ë³µìŠµ</p>
              </div>
              <span class="text-[10px] text-planner">20:00</span>
            </div>
          </div>
        </section>
        
        <!-- Daily Self Evaluation (Mobile) -->
        <section class="bg-surface rounded-xl shadow-card border border-border-light overflow-hidden">
          <div class="p-3 border-b border-border-light bg-gradient-to-r from-yellow-50 to-orange-50">
            <h3 class="font-bold text-text-primary text-sm flex items-center gap-2">
              <span class="material-icons-round text-warning text-lg">rate_review</span>
              ì˜¤ëŠ˜ì˜ ìê¸°í‰ê°€
            </h3>
          </div>
          
          <div class="p-3 space-y-3">
            <div>
              <label class="block text-xs font-medium text-text-primary mb-2">ì˜¤ëŠ˜ í•™ìŠµì€ ì–´ë• ë‚˜ìš”?</label>
              <div class="flex gap-2">
                <button onclick="selectMood('great')" class="mood-btn flex-1 p-2 border-2 border-border-light rounded-lg text-center">
                  <div class="text-xl">ğŸ˜„</div>
                  <div class="text-[10px] text-text-tertiary">ì¢‹ìŒ</div>
                </button>
                <button onclick="selectMood('good')" class="mood-btn flex-1 p-2 border-2 border-border-light rounded-lg text-center">
                  <div class="text-xl">ğŸ™‚</div>
                  <div class="text-[10px] text-text-tertiary">ê´œì°®ìŒ</div>
                </button>
                <button onclick="selectMood('soso')" class="mood-btn flex-1 p-2 border-2 border-border-light rounded-lg text-center">
                  <div class="text-xl">ğŸ˜</div>
                  <div class="text-[10px] text-text-tertiary">ë³´í†µ</div>
                </button>
                <button onclick="selectMood('bad')" class="mood-btn flex-1 p-2 border-2 border-border-light rounded-lg text-center">
                  <div class="text-xl">ğŸ˜”</div>
                  <div class="text-[10px] text-text-tertiary">í˜ë“¦</div>
                </button>
              </div>
            </div>
            
            <div>
              <textarea rows="2" placeholder="ì„ ìƒë‹˜ê»˜ í•˜ê³  ì‹¶ì€ ë§ (ì„ íƒ)" 
                        class="w-full px-3 py-2 border border-border-light rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-planner/30 resize-none"></textarea>
            </div>
            
            <button onclick="submitDailyEvaluation()" class="w-full py-2.5 bg-planner text-white font-medium rounded-lg text-sm">
              í‰ê°€ ì œì¶œ
            </button>
          </div>
        </section>
        
        <!-- Instructor Feedback -->
        <section class="bg-surface rounded-xl p-3 shadow-card border-l-4 border-planner">
          <div class="flex items-start gap-3">
            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-planner to-purple-300 p-0.5 flex-shrink-0">
              <div class="w-full h-full rounded-full bg-surface overflow-hidden">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=teacher1&backgroundColor=ffd5dc" alt="ê°•ì‚¬" class="w-full h-full object-cover">
              </div>
            </div>
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-1">
                <span class="font-bold text-text-primary text-sm">ê¹€ë‹´ì„ ì„ ìƒë‹˜</span>
                <span class="px-1.5 py-0.5 bg-success text-white text-[9px] font-bold rounded">ì¹­ì°¬</span>
              </div>
              <p class="text-xs text-text-secondary leading-relaxed">
                12ì¼ ì—°ì† ë‹¬ì„± ì¤‘! ğŸ”¥ ì •ë§ ëŒ€ë‹¨í•´ìš”! ì•„ì¹¨ ì˜ë‹¨ì–´ê°€ íŠ¹íˆ ì˜ ë˜ê³  ìˆë„¤ìš”.
              </p>
            </div>
          </div>
        </section>
        
      </div>
      <!-- ========== END MOBILE HABIT MODE ========== -->
      
      <!-- ========== MOBILE NORMAL MODE ========== -->
      <div id="mobileNormalContent" class="hidden p-4 space-y-4">
        
        <!-- Mobile Week View -->
        <section class="bg-surface rounded-xl p-4 shadow-card border border-border-light">
          <div class="flex items-center justify-between mb-3">
            <button onclick="prevWeek()" class="p-1">
              <span class="material-icons-round text-text-secondary text-lg">chevron_left</span>
            </button>
            <span class="font-bold text-text-primary text-sm" id="mobileWeekTitle">12.30 - 1.5</span>
            <button onclick="nextWeek()" class="p-1">
              <span class="material-icons-round text-text-secondary text-lg">chevron_right</span>
            </button>
          </div>
          
          <div class="grid grid-cols-7 gap-1" id="mobileWeekGrid"></div>
        </section>
        
        <!-- Mobile Homework Alert -->
        <a href="#" class="block bg-error-light rounded-xl p-3 border border-error/30">
          <div class="flex items-center gap-3">
            <span class="w-10 h-10 rounded-full bg-error/20 flex items-center justify-center flex-shrink-0">
              <span class="material-icons-round text-error">assignment_late</span>
            </span>
            <div class="flex-1 min-w-0">
              <p class="font-bold text-error text-sm">ìˆ™ì œ 3ê°œ</p>
              <p class="text-xs text-text-secondary truncate">ë¹„ë¬¸í•™ ì§€ë¬¸ 2ê°œ Â· D-1</p>
            </div>
            <span class="material-icons-round text-text-tertiary">chevron_right</span>
          </div>
        </a>
        
        <!-- Mobile Today's Tasks -->
        <section class="bg-surface rounded-xl shadow-card border border-border-light overflow-hidden">
          <div class="p-4 border-b border-border-light flex items-center justify-between">
            <h3 class="font-bold text-text-primary text-sm" id="mobileSelectedDate">ì˜¤ëŠ˜ í• ì¼</h3>
            <span class="text-xs text-text-secondary"><span id="mobileCompletedCount">3</span>/<span id="mobileTotalCount">5</span></span>
          </div>
          
          <div id="mobileTaskList" class="divide-y divide-border-light"></div>
        </section>
        
        <!-- Mobile Instructor Comment (Normal) -->
        <section class="bg-surface rounded-xl p-3 shadow-card border-l-4 border-blue-500">
          <div class="flex items-start gap-3">
            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-300 p-0.5 flex-shrink-0">
              <div class="w-full h-full rounded-full bg-surface overflow-hidden">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=teacher1&backgroundColor=ffd5dc" alt="ê°•ì‚¬" class="w-full h-full object-cover">
              </div>
            </div>
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-1">
                <span class="font-bold text-text-primary text-sm">ê¹€ë‹´ì„ ì„ ìƒë‹˜</span>
                <span class="text-[10px] text-text-tertiary">Â· ì˜¤ëŠ˜</span>
              </div>
              <p class="text-xs text-text-secondary leading-relaxed line-clamp-2">
                ìˆ˜í•™ ê°•í™”í•™ìŠµì„ ì™„ë£Œí•˜ë©´ ë‹¤ìŒ ë‹¨ì›ìœ¼ë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆì–´ìš”. êµ­ì–´ ìˆ™ì œ ë§ˆê° ë‚´ì¼!
              </p>
              <div class="flex items-center gap-2 mt-2">
                <span class="px-2 py-0.5 bg-error-light text-error text-[10px] font-medium rounded">ìˆ™ì œ 3ê°œ</span>
                <span class="px-2 py-0.5 bg-warning-light text-warning text-[10px] font-medium rounded">D-1</span>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Mobile AI Tip -->
        <section class="bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl p-4 text-white">
          <div class="flex items-center gap-2 mb-2">
            <span class="material-icons-round text-sm">psychology</span>
            <span class="text-xs font-bold">AI ì¶”ì²œ</span>
          </div>
          <p class="text-sm mb-3">ì˜¤ëŠ˜ ìˆ˜í•™ ê°•í™”í•™ìŠµ ë¨¼ì €, ì €ë…ì— êµ­ì–´ ìˆ™ì œ ì™„ë£Œí•˜ì„¸ìš”!</p>
          <button class="w-full py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-colors">
            ì¶”ì²œ ì¼ì • ì ìš©
          </button>
        </section>
        
      </div>
      <!-- ========== END MOBILE NORMAL MODE ========== -->
      
    </div>
    
    <!-- Mobile Bottom Nav -->
    <nav class="fixed bottom-0 left-0 right-0 h-16 bg-surface border-t border-border-light flex items-center justify-around px-2 z-50">
      <a href="student-dashboard.html" class="flex flex-col items-center gap-1 px-3 py-2 text-text-tertiary">
        <span class="material-icons-round">home</span>
        <span class="text-[10px] font-medium">í™ˆ</span>
      </a>
      <a href="subjects.html" class="flex flex-col items-center gap-1 px-3 py-2 text-text-tertiary">
        <span class="material-icons-round">auto_stories</span>
        <span class="text-[10px] font-medium">ê³¼ëª©</span>
      </a>
      <a href="ai-tutor.html" class="flex flex-col items-center gap-1 px-3 py-2">
        <div class="w-12 h-12 -mt-6 bg-primary rounded-full flex items-center justify-center shadow-lg">
          <span class="material-icons-round text-white">smart_toy</span>
        </div>
        <span class="text-[10px] font-medium text-primary -mt-1">AIíŠœí„°</span>
      </a>
      <a href="report.html" class="flex flex-col items-center gap-1 px-3 py-2 text-text-tertiary">
        <span class="material-icons-round">insights</span>
        <span class="text-[10px] font-medium">ë¦¬í¬íŠ¸</span>
      </a>
      <a href="planner.html" class="flex flex-col items-center gap-1 px-3 py-2 text-planner">
        <span class="material-icons-round">event_note</span>
        <span class="text-[10px] font-medium">í”Œë˜ë„ˆ</span>
      </a>
    </nav>
  </div>
  
  <!-- Add Task Modal -->
  <div id="addTaskModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden p-4">
    <div class="bg-surface rounded-2xl max-w-md w-full overflow-hidden slide-up max-h-[90vh] overflow-y-auto">
      <div class="bg-planner p-5 flex items-center justify-between sticky top-0">
        <h2 class="text-lg font-bold text-white flex items-center gap-2">
          <span class="material-icons-round">add_task</span>
          í• ì¼ ì¶”ê°€
        </h2>
        <button onclick="closeAddTaskModal()" class="p-1 hover:bg-white/20 rounded-lg transition-colors">
          <span class="material-icons-round text-white/80">close</span>
        </button>
      </div>
      
      <div class="p-5 space-y-4">
        <div>
          <label class="block text-sm font-medium text-text-primary mb-2">í• ì¼ ë‚´ìš© *</label>
          <input type="text" id="taskTitle" placeholder="ì˜ˆ: êµ­ì–´ ì§€ë¬¸ 1ê°œ í’€ê¸°" 
                 class="w-full px-4 py-3 border border-border-light rounded-xl focus:outline-none focus:ring-2 focus:ring-planner/30 focus:border-planner transition-colors">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-text-primary mb-2">ê³¼ëª© *</label>
          <div class="grid grid-cols-4 gap-2">
            <button type="button" onclick="selectSubject('korean')" class="subject-btn flex flex-col items-center gap-1 p-3 border-2 border-border-light rounded-xl hover:border-korean hover:bg-korean-light transition-all" data-subject="korean">
              <span class="w-8 h-8 rounded-lg bg-korean-light flex items-center justify-center">
                <span class="material-icons-round text-korean">menu_book</span>
              </span>
              <span class="text-xs font-medium">êµ­ì–´</span>
            </button>
            <button type="button" onclick="selectSubject('english')" class="subject-btn flex flex-col items-center gap-1 p-3 border-2 border-border-light rounded-xl hover:border-english hover:bg-english-light transition-all" data-subject="english">
              <span class="w-8 h-8 rounded-lg bg-english-light flex items-center justify-center">
                <span class="material-icons-round text-english">translate</span>
              </span>
              <span class="text-xs font-medium">ì˜ì–´</span>
            </button>
            <button type="button" onclick="selectSubject('math')" class="subject-btn flex flex-col items-center gap-1 p-3 border-2 border-border-light rounded-xl hover:border-math hover:bg-math-light transition-all" data-subject="math">
              <span class="w-8 h-8 rounded-lg bg-math-light flex items-center justify-center">
                <span class="material-icons-round text-math-dark">calculate</span>
              </span>
              <span class="text-xs font-medium">ìˆ˜í•™</span>
            </button>
            <button type="button" onclick="selectSubject('etc')" class="subject-btn flex flex-col items-center gap-1 p-3 border-2 border-border-light rounded-xl hover:border-gray-400 hover:bg-gray-100 transition-all" data-subject="etc">
              <span class="w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center">
                <span class="material-icons-round text-gray-500">more_horiz</span>
              </span>
              <span class="text-xs font-medium">ê¸°íƒ€</span>
            </button>
          </div>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-text-primary mb-2">ë‚ ì§œ *</label>
          <input type="date" id="taskDate" 
                 class="w-full px-4 py-3 border border-border-light rounded-xl focus:outline-none focus:ring-2 focus:ring-planner/30 focus:border-planner transition-colors">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-text-primary mb-2">ì‹œê°„ (ì„ íƒ)</label>
          <input type="time" id="taskTime" 
                 class="w-full px-4 py-3 border border-border-light rounded-xl focus:outline-none focus:ring-2 focus:ring-planner/30 focus:border-planner transition-colors">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-text-primary mb-2">ë©”ëª¨ (ì„ íƒ)</label>
          <textarea id="taskMemo" rows="2" placeholder="ì¶”ê°€ ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                    class="w-full px-4 py-3 border border-border-light rounded-xl focus:outline-none focus:ring-2 focus:ring-planner/30 focus:border-planner transition-colors resize-none"></textarea>
        </div>
        
        <button onclick="addTask()" class="w-full py-3.5 bg-planner hover:bg-planner-dark text-white font-bold rounded-xl transition-colors flex items-center justify-center gap-2">
          <span class="material-icons-round">add</span>
          ì¶”ê°€í•˜ê¸°
        </button>
      </div>
    </div>
  </div>
  
  <!-- Toast -->
  <div id="toast" class="fixed top-4 left-1/2 -translate-x-1/2 z-50 hidden">
    <div class="flex items-center gap-3 px-5 py-3 bg-success text-white rounded-xl shadow-lg">
      <span class="material-icons-round">check_circle</span>
      <span class="font-medium" id="toastMessage">í• ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤</span>
    </div>
  </div>
  
  <script>
    // State
    let currentMode = 'habit'; // 'habit' or 'normal'
    let currentWeekStart = getWeekStart(new Date());
    let selectedDate = new Date();
    let selectedSubject = null;
    let currentFilter = 'all';
    let selectedMood = null;
    
    // Mode switching function
    function switchMode(mode) {
      currentMode = mode;
      
      // Desktop elements
      const habitModeBtn = document.getElementById('habitModeBtn');
      const normalModeBtn = document.getElementById('normalModeBtn');
      const habitStatsHeader = document.getElementById('habitStatsHeader');
      const normalStatsHeader = document.getElementById('normalStatsHeader');
      const habitInstructorComment = document.getElementById('habitInstructorComment');
      const normalInstructorComment = document.getElementById('normalInstructorComment');
      const habitModeContent = document.getElementById('habitModeContent');
      const normalModeContent = document.getElementById('normalModeContent');
      const addTaskBtn = document.getElementById('addTaskBtn');
      const modeDescription = document.getElementById('modeDescription');
      
      // Mobile elements
      const mobileHeader = document.getElementById('mobileHeader');
      const mobileHeaderTitle = document.getElementById('mobileHeaderTitle');
      const mobileAddBtn = document.getElementById('mobileAddBtn');
      const mobileInfoBtn = document.getElementById('mobileInfoBtn');
      const mobileHabitBtn = document.getElementById('mobileHabitBtn');
      const mobileNormalBtn = document.getElementById('mobileNormalBtn');
      const mobileHabitStats = document.getElementById('mobileHabitStats');
      const mobileNormalStats = document.getElementById('mobileNormalStats');
      const mobileHabitContent = document.getElementById('mobileHabitContent');
      const mobileNormalContent = document.getElementById('mobileNormalContent');
      
      if (mode === 'habit') {
        // Desktop
        habitModeBtn.classList.add('bg-planner', 'text-white', 'shadow-md');
        habitModeBtn.classList.remove('text-text-secondary', 'hover:bg-gray-100');
        normalModeBtn.classList.remove('bg-blue-600', 'text-white', 'shadow-md');
        normalModeBtn.classList.add('text-text-secondary', 'hover:bg-gray-100');
        
        habitStatsHeader.classList.remove('hidden');
        normalStatsHeader.classList.add('hidden');
        habitInstructorComment.classList.remove('hidden');
        normalInstructorComment.classList.add('hidden');
        habitModeContent.classList.remove('hidden');
        normalModeContent.classList.add('hidden');
        addTaskBtn.classList.add('hidden');
        modeDescription.innerHTML = '<span class="material-icons-round text-planner text-lg">info</span><span>ê°•ì‚¬ê°€ ì„¤ì •í•œ ìŠµê´€ì„ ë§¤ì¼ ì‹¤ì²œí•˜ê³  í‰ê°€ë¥¼ ê¸°ë¡í•´ìš”</span>';
        
        // Mobile
        mobileHeader.classList.remove('bg-blue-600');
        mobileHeader.classList.add('bg-planner');
        mobileHeaderTitle.textContent = 'ìŠµê´€ í”Œë˜ë„ˆ';
        mobileAddBtn.classList.add('hidden');
        mobileInfoBtn.classList.remove('hidden');
        mobileHabitBtn.classList.add('bg-white', 'text-planner');
        mobileHabitBtn.classList.remove('bg-white/20', 'text-white');
        mobileNormalBtn.classList.remove('bg-white', 'text-blue-600');
        mobileNormalBtn.classList.add('bg-white/20', 'text-white');
        mobileHabitStats.classList.remove('hidden');
        mobileNormalStats.classList.add('hidden');
        mobileHabitContent.classList.remove('hidden');
        mobileNormalContent.classList.add('hidden');
        
      } else {
        // Desktop
        normalModeBtn.classList.add('bg-blue-600', 'text-white', 'shadow-md');
        normalModeBtn.classList.remove('text-text-secondary', 'hover:bg-gray-100');
        habitModeBtn.classList.remove('bg-planner', 'text-white', 'shadow-md');
        habitModeBtn.classList.add('text-text-secondary', 'hover:bg-gray-100');
        
        habitStatsHeader.classList.add('hidden');
        normalStatsHeader.classList.remove('hidden');
        habitInstructorComment.classList.add('hidden');
        normalInstructorComment.classList.remove('hidden');
        habitModeContent.classList.add('hidden');
        normalModeContent.classList.remove('hidden');
        addTaskBtn.classList.remove('hidden');
        modeDescription.innerHTML = '<span class="material-icons-round text-blue-600 text-lg">info</span><span>ììœ ë¡­ê²Œ ì¼ì •ì„ ì¶”ê°€í•˜ê³  ê´€ë¦¬í•´ìš”</span>';
        
        // Mobile
        mobileHeader.classList.add('bg-blue-600');
        mobileHeader.classList.remove('bg-planner');
        mobileHeaderTitle.textContent = 'ë‚˜ì˜ í”Œë˜ë„ˆ';
        mobileAddBtn.classList.remove('hidden');
        mobileInfoBtn.classList.add('hidden');
        mobileNormalBtn.classList.add('bg-white', 'text-blue-600');
        mobileNormalBtn.classList.remove('bg-white/20', 'text-white');
        mobileHabitBtn.classList.remove('bg-white', 'text-planner');
        mobileHabitBtn.classList.add('bg-white/20', 'text-white');
        mobileHabitStats.classList.add('hidden');
        mobileNormalStats.classList.remove('hidden');
        mobileHabitContent.classList.add('hidden');
        mobileNormalContent.classList.remove('hidden');
        
        // Render tasks for normal mode
        renderWeek();
        renderTasks();
      }
    }
    
    // Habit mode functions
    function toggleHabit(habitId) {
      console.log('Toggle habit:', habitId);
      // In real app, this would update the habit status
      showToast('ìŠµê´€ ì™„ë£Œ! ì˜í–ˆì–´ìš”! ğŸ‰');
    }
    
    function selectMood(mood) {
      selectedMood = mood;
      document.querySelectorAll('.mood-btn').forEach(btn => {
        const btnMood = btn.getAttribute('onclick')?.match(/'(\w+)'/)?.[1];
        if (btnMood === mood) {
          btn.classList.add('border-planner', 'bg-planner-light');
          btn.classList.remove('border-border-light');
        } else {
          btn.classList.remove('border-planner', 'bg-planner-light');
          btn.classList.add('border-border-light');
        }
      });
    }
    
    function submitDailyEvaluation() {
      if (!selectedMood) {
        alert('ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      showToast('í‰ê°€ê°€ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤! ì„ ìƒë‹˜ì´ í™•ì¸í• ê²Œìš” ğŸ“');
      selectedMood = null;
      document.querySelectorAll('.mood-btn').forEach(btn => {
        btn.classList.remove('border-planner', 'bg-planner-light');
        btn.classList.add('border-border-light');
      });
    }
    
    // Sample tasks data
    const tasks = {
      '2025-01-01': [
        { id: 1, title: 'êµ­ì–´ ì§€ë¬¸ ë¶„ì„ 1ê°œ', subject: 'korean', completed: true, time: '14:00', type: 'study' },
        { id: 2, title: 'ì˜ì–´ ë‹¨ì–´ í…ŒìŠ¤íŠ¸', subject: 'english', completed: true, time: '15:30', type: 'study' },
      ],
      '2025-01-02': [
        { id: 3, title: 'êµ­ì–´ ë¹„ë¬¸í•™ ì§€ë¬¸ 2ê°œ', subject: 'korean', completed: true, time: '14:00', type: 'study' },
        { id: 4, title: 'ì˜ì–´ 7ì´ˆ ë°œí™” í…ŒìŠ¤íŠ¸', subject: 'english', completed: true, time: '15:00', type: 'study' },
        { id: 5, title: 'ìˆ˜í•™ ì¼ì°¨ë°©ì •ì‹ 3ë¬¸ì œ', subject: 'math', completed: false, time: '16:00', type: 'study' },
        { id: 6, title: 'ìˆ˜í•™ ê°•í™”í•™ìŠµ', subject: 'math', completed: false, time: '17:00', type: 'reinforcement' },
        { id: 7, title: 'í•™ì› ë“±ì›', subject: 'etc', completed: true, time: '13:30', type: 'etc' },
      ],
      '2025-01-03': [
        { id: 8, title: 'ë¹„ë¬¸í•™ ì§€ë¬¸ 2ê°œ í’€ê¸°', subject: 'korean', completed: false, time: '23:59', type: 'homework' },
        { id: 9, title: 'ì˜ì–´ ë°œí™” í…ŒìŠ¤íŠ¸', subject: 'english', completed: false, time: '15:00', type: 'study' },
        { id: 10, title: 'ìˆ˜í•™ ë¬¸ì œ 5ê°œ', subject: 'math', completed: false, time: '16:00', type: 'study' },
      ],
      '2025-01-04': [
        { id: 11, title: 'ì¼ì°¨ë°©ì •ì‹ ì—°ìŠµë¬¸ì œ 10ê°œ', subject: 'math', completed: false, time: '23:59', type: 'homework' },
        { id: 12, title: 'ì˜ì–´ ë‹¨ì–´ ë³µìŠµ', subject: 'english', completed: false, time: '14:00', type: 'study' },
      ],
      '2025-01-05': [
        { id: 13, title: 'ë‹¨ì–´ì¥ Set 5 ì•”ê¸°', subject: 'english', completed: false, time: '23:59', type: 'homework' },
        { id: 14, title: 'ì£¼ë§ í´ë¦¬ë‹‰', subject: 'english', completed: false, time: '10:00', type: 'clinic' },
      ],
    };
    
    const subjectConfig = {
      korean: { name: 'êµ­ì–´', color: '#4285F4', bg: '#E8F0FE', icon: 'menu_book' },
      english: { name: 'ì˜ì–´', color: '#34A853', bg: '#E6F4EA', icon: 'translate' },
      math: { name: 'ìˆ˜í•™', color: '#FBBC05', bg: '#FEF7E0', icon: 'calculate' },
      etc: { name: 'ê¸°íƒ€', color: '#6B7280', bg: '#F3F4F6', icon: 'more_horiz' },
    };
    
    const typeConfig = {
      study: { name: '', badge: '' },
      homework: { name: 'ìˆ™ì œ', badge: 'bg-error text-white' },
      reinforcement: { name: 'ê°•í™”', badge: 'bg-warning text-white' },
      clinic: { name: 'í´ë¦¬ë‹‰', badge: 'bg-primary text-white' },
    };
    
    function getWeekStart(date) {
      const d = new Date(date);
      const day = d.getDay();
      const diff = d.getDate() - day + (day === 0 ? -6 : 1);
      return new Date(d.setDate(diff));
    }
    
    function formatDate(date) {
      return date.toISOString().split('T')[0];
    }
    
    function formatDateKR(date) {
      return `${date.getMonth() + 1}ì›” ${date.getDate()}ì¼`;
    }
    
    function isSameDay(d1, d2) {
      return formatDate(d1) === formatDate(d2);
    }
    
    function isToday(date) {
      return isSameDay(date, new Date());
    }
    
    function renderWeek() {
      const weekGrid = document.getElementById('weekGrid');
      const mobileWeekGrid = document.getElementById('mobileWeekGrid');
      const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
      
      let desktopHTML = '';
      let mobileHTML = '';
      
      for (let i = 0; i < 7; i++) {
        const date = new Date(currentWeekStart);
        date.setDate(date.getDate() + i);
        const dateStr = formatDate(date);
        const dayTasks = tasks[dateStr] || [];
        const isSelected = isSameDay(date, selectedDate);
        const isTodayDate = isToday(date);
        
        const completedCount = dayTasks.filter(t => t.completed).length;
        const totalCount = dayTasks.length;
        const hasTasks = totalCount > 0;
        
        // Get unique subjects for dots
        const subjects = [...new Set(dayTasks.map(t => t.subject))];
        
        // Desktop
        desktopHTML += `
          <div class="day-cell relative p-3 rounded-xl text-center ${isSelected ? 'selected' : ''} ${isTodayDate && !isSelected ? 'today' : ''}"
               onclick="selectDate('${dateStr}')">
            <div class="text-xs ${isSelected ? 'text-white/80' : 'text-text-tertiary'} mb-1">${days[i]}</div>
            <div class="text-xl font-bold ${isSelected ? 'text-white' : ''}">${date.getDate()}</div>
            ${hasTasks ? `
              <div class="text-[10px] ${isSelected ? 'text-white/80' : 'text-text-tertiary'} mt-1">${completedCount}/${totalCount}</div>
              <div class="task-dots mt-1">
                ${subjects.slice(0, 3).map(s => `<span class="w-1.5 h-1.5 rounded-full" style="background: ${isSelected ? 'white' : subjectConfig[s].color}"></span>`).join('')}
              </div>
            ` : ''}
          </div>
        `;
        
        // Mobile
        mobileHTML += `
          <div class="day-cell relative p-2 rounded-lg text-center ${isSelected ? 'selected' : ''} ${isTodayDate && !isSelected ? 'today' : ''}"
               onclick="selectDate('${dateStr}')">
            <div class="text-[10px] ${isSelected ? 'text-white/80' : 'text-text-tertiary'}">${days[i]}</div>
            <div class="text-sm font-bold ${isSelected ? 'text-white' : ''}">${date.getDate()}</div>
            ${hasTasks ? `
              <div class="task-dots mt-0.5">
                ${subjects.slice(0, 2).map(s => `<span class="w-1 h-1 rounded-full" style="background: ${isSelected ? 'white' : subjectConfig[s].color}"></span>`).join('')}
              </div>
            ` : ''}
          </div>
        `;
      }
      
      weekGrid.innerHTML = desktopHTML;
      mobileWeekGrid.innerHTML = mobileHTML;
      
      // Update week title
      const weekEnd = new Date(currentWeekStart);
      weekEnd.setDate(weekEnd.getDate() + 6);
      document.getElementById('weekTitle').textContent = `${formatDateKR(currentWeekStart)} - ${formatDateKR(weekEnd)}`;
      document.getElementById('mobileWeekTitle').textContent = `${currentWeekStart.getMonth() + 1}.${currentWeekStart.getDate()} - ${weekEnd.getMonth() + 1}.${weekEnd.getDate()}`;
    }
    
    function renderTasks() {
      const dateStr = formatDate(selectedDate);
      let dayTasks = tasks[dateStr] || [];
      
      // Apply filter
      if (currentFilter === 'pending') {
        dayTasks = dayTasks.filter(t => !t.completed);
      } else if (currentFilter === 'completed') {
        dayTasks = dayTasks.filter(t => t.completed);
      }
      
      const allTasks = tasks[dateStr] || [];
      const completedCount = allTasks.filter(t => t.completed).length;
      const totalCount = allTasks.length;
      
      document.getElementById('completedCount').textContent = completedCount;
      document.getElementById('totalCount').textContent = totalCount;
      document.getElementById('mobileCompletedCount').textContent = completedCount;
      document.getElementById('mobileTotalCount').textContent = totalCount;
      
      const dateTitle = isToday(selectedDate) ? 'ì˜¤ëŠ˜ì˜ í• ì¼' : `${formatDateKR(selectedDate)} í• ì¼`;
      document.getElementById('selectedDateTitle').textContent = dateTitle;
      document.getElementById('mobileSelectedDate').textContent = isToday(selectedDate) ? 'ì˜¤ëŠ˜ í• ì¼' : formatDateKR(selectedDate);
      
      const taskList = document.getElementById('taskList');
      const mobileTaskList = document.getElementById('mobileTaskList');
      const emptyState = document.getElementById('emptyState');
      
      if (dayTasks.length === 0) {
        taskList.innerHTML = '';
        mobileTaskList.innerHTML = '';
        emptyState.classList.remove('hidden');
        return;
      }
      
      emptyState.classList.add('hidden');
      
      // Sort by time
      dayTasks.sort((a, b) => (a.time || '99:99').localeCompare(b.time || '99:99'));
      
      const html = dayTasks.map(task => {
        const subject = subjectConfig[task.subject];
        const type = typeConfig[task.type];
        return `
          <div class="task-item px-5 py-4 flex items-center gap-4 ${task.completed ? 'completed' : ''}" data-id="${task.id}">
            <button onclick="toggleTask(${task.id}, event)" class="check-btn w-6 h-6 rounded-full border-2 ${task.completed ? 'bg-planner border-planner' : 'border-gray-300 hover:border-planner'} flex items-center justify-center transition-all flex-shrink-0">
              ${task.completed ? '<span class="material-icons-round text-white text-sm">check</span>' : ''}
            </button>
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-1 flex-wrap">
                <span class="px-2 py-0.5 text-[10px] font-bold rounded" style="background: ${subject.bg}; color: ${subject.color}">${subject.name}</span>
                ${type.name ? `<span class="px-2 py-0.5 text-[10px] font-bold rounded ${type.badge}">${type.name}</span>` : ''}
                ${task.time ? `<span class="text-[10px] text-text-tertiary">${task.time}</span>` : ''}
              </div>
              <p class="task-title font-medium text-text-primary">${task.title}</p>
            </div>
            <button onclick="openTaskMenu(${task.id})" class="p-2 text-text-tertiary hover:text-text-secondary rounded-lg hover:bg-gray-100 transition-colors">
              <span class="material-icons-round text-lg">more_vert</span>
            </button>
          </div>
        `;
      }).join('');
      
      const mobileHtml = dayTasks.map(task => {
        const subject = subjectConfig[task.subject];
        const type = typeConfig[task.type];
        return `
          <div class="task-item px-4 py-3 flex items-center gap-3 ${task.completed ? 'completed' : ''}" data-id="${task.id}">
            <button onclick="toggleTask(${task.id}, event)" class="check-btn w-5 h-5 rounded-full border-2 ${task.completed ? 'bg-planner border-planner' : 'border-gray-300'} flex items-center justify-center flex-shrink-0">
              ${task.completed ? '<span class="material-icons-round text-white text-xs">check</span>' : ''}
            </button>
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-1 mb-0.5 flex-wrap">
                <span class="px-1.5 py-0.5 text-[9px] font-bold rounded" style="background: ${subject.bg}; color: ${subject.color}">${subject.name}</span>
                ${type.name ? `<span class="px-1.5 py-0.5 text-[9px] font-bold rounded ${type.badge}">${type.name}</span>` : ''}
              </div>
              <p class="task-title text-sm font-medium text-text-primary truncate">${task.title}</p>
            </div>
          </div>
        `;
      }).join('');
      
      taskList.innerHTML = html;
      mobileTaskList.innerHTML = mobileHtml;
    }
    
    function selectDate(dateStr) {
      selectedDate = new Date(dateStr);
      renderWeek();
      renderTasks();
    }
    
    function goToToday() {
      currentWeekStart = getWeekStart(new Date());
      selectedDate = new Date();
      renderWeek();
      renderTasks();
    }
    
    function prevWeek() {
      currentWeekStart.setDate(currentWeekStart.getDate() - 7);
      renderWeek();
    }
    
    function nextWeek() {
      currentWeekStart.setDate(currentWeekStart.getDate() + 7);
      renderWeek();
    }
    
    function toggleTask(taskId, event) {
      event.stopPropagation();
      
      // Find task in all dates
      for (const dateStr in tasks) {
        const task = tasks[dateStr].find(t => t.id === taskId);
        if (task) {
          task.completed = !task.completed;
          
          // Animation
          const btn = event.target.closest('.check-btn');
          if (btn) {
            btn.classList.add('check-pop');
            setTimeout(() => btn.classList.remove('check-pop'), 300);
          }
          
          renderTasks();
          renderWeek();
          
          // Show toast for completion
          if (task.completed) {
            showToast('ì™„ë£Œ! ì˜í–ˆì–´ìš”! ğŸ‰');
          }
          break;
        }
      }
    }
    
    function filterTasks(filter) {
      currentFilter = filter;
      
      // Update filter buttons
      document.querySelectorAll('.filter-btn').forEach(btn => {
        if (btn.dataset.filter === filter) {
          btn.classList.remove('bg-gray-100', 'text-text-secondary', 'hover:bg-gray-200');
          btn.classList.add('bg-planner', 'text-white');
        } else {
          btn.classList.add('bg-gray-100', 'text-text-secondary', 'hover:bg-gray-200');
          btn.classList.remove('bg-planner', 'text-white');
        }
      });
      
      renderTasks();
    }
    
    function openAddTaskModal() {
      document.getElementById('addTaskModal').classList.remove('hidden');
      document.getElementById('taskDate').value = formatDate(selectedDate);
      document.body.style.overflow = 'hidden';
    }
    
    function closeAddTaskModal() {
      document.getElementById('addTaskModal').classList.add('hidden');
      document.body.style.overflow = '';
      resetForm();
    }
    
    function resetForm() {
      document.getElementById('taskTitle').value = '';
      document.getElementById('taskTime').value = '';
      document.getElementById('taskMemo').value = '';
      selectedSubject = null;
      document.querySelectorAll('.subject-btn').forEach(btn => {
        btn.classList.remove('border-korean', 'bg-korean-light', 'border-english', 'bg-english-light', 'border-math', 'bg-math-light', 'border-gray-400', 'bg-gray-100');
        btn.classList.add('border-border-light');
      });
    }
    
    function selectSubject(subject) {
      selectedSubject = subject;
      const colors = {
        korean: ['border-korean', 'bg-korean-light'],
        english: ['border-english', 'bg-english-light'],
        math: ['border-math', 'bg-math-light'],
        etc: ['border-gray-400', 'bg-gray-100'],
      };
      
      document.querySelectorAll('.subject-btn').forEach(btn => {
        const btnSubject = btn.dataset.subject;
        btn.classList.remove('border-korean', 'bg-korean-light', 'border-english', 'bg-english-light', 'border-math', 'bg-math-light', 'border-gray-400', 'bg-gray-100');
        
        if (btnSubject === subject) {
          btn.classList.add(...colors[subject]);
        } else {
          btn.classList.add('border-border-light');
        }
      });
    }
    
    function addTask() {
      const title = document.getElementById('taskTitle').value.trim();
      const date = document.getElementById('taskDate').value;
      const time = document.getElementById('taskTime').value;
      
      if (!title) {
        alert('í• ì¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      if (!selectedSubject) {
        alert('ê³¼ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      
      if (!tasks[date]) {
        tasks[date] = [];
      }
      
      tasks[date].push({
        id: Date.now(),
        title: title,
        subject: selectedSubject,
        completed: false,
        time: time || null,
        type: 'study'
      });
      
      closeAddTaskModal();
      selectDate(date);
      showToast('í• ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤');
    }
    
    function openTaskMenu(taskId) {
      // Placeholder for task menu (edit, delete)
      console.log('Open menu for task:', taskId);
    }
    
    function showToast(message) {
      const toast = document.getElementById('toast');
      document.getElementById('toastMessage').textContent = message;
      toast.classList.remove('hidden');
      setTimeout(() => toast.classList.add('hidden'), 2500);
    }
    
    // Event listeners
    document.getElementById('addTaskModal').addEventListener('click', function(e) {
      if (e.target === this) closeAddTaskModal();
    });
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      renderWeek();
      renderTasks();
    });
  </script>
  <!-- MAMA-ASST Common Modules -->
  <script src="assets/js/common.js"></script>
  <script src="assets/js/modal.js"></script>
  <script src="assets/js/toast.js"></script>
  <script src="assets/js/table.js"></script>
  <script src="assets/js/chart-config.js"></script>

</body>
</html>
